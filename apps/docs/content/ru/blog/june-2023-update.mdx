---
source-updated-at: 2025-05-29T18:05:49.000Z
translation-updated-at: 2025-06-02T19:40:43.973Z
title: Обновление App Router в Next.js
description: >-
  Команда Next.js сосредоточена на производительности, стабильности и удобстве разработчиков в предстоящие месяцы.
author:
  - name: Delba de Oliveira
    image: /static/team/delba.jpg
  - name: Lee Robinson
    image: /static/team/lee.jpg
date: 2023-06-22T14:00:00.507Z
image: >-
  https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/static/blog/june-2023-update/twitter-card.png
---

App Router представляет собой новую основу для будущего Next.js, но мы признаем, что есть возможности улучшить этот опыт. Мы хотели бы поделиться обновлением о наших текущих приоритетах.

В предстоящих релизах Next.js мы сосредоточены на следующих направлениях:

*   **Улучшение производительности**
*   **Повышение стабильности**
*   **Развитие образовательных материалов для разработчиков**

[App Router](#the-app-router)
----------------------------

Для начала полезно дать некоторый контекст о том, как был спроектирован App Router.

### [Выход за пределы Pages Router через интеграцию с React](#growing-beyond-the-pages-router-by-aligning-with-react)

По мере роста популярности Next.js и создания более масштабных приложений мы получили обратную связь от сообщества и выявили области, где начали достигать пределов возможностей Pages Router.

Наиболее заметно, что Pages Router не был разработан для потоковой передачи (streaming) — фундаментальной концепции современного React, которая помогает решать ограничения, с которыми мы столкнулись, и реализовать долгосрочное видение Next.js.

Создание API фреймворка, поддерживающих потоковую передачу для получения данных, загрузки ресурсов и метаданных страниц, а также использование новых возможностей React потребовали значительных изменений в базовой архитектуре Next.js.

Мы воспользовались возможностью построить систему на основе [новейших конкурентных возможностей React](https://react.dev/blog/2023/05/03/react-canaries), таких как Server Components, Suspense и других, которые были [разработаны для потоковых архитектур](https://github.com/reactwg/react-18/discussions/37).

### [Постепенное внедрение — обязательное условие](#incremental-adoption-is-non-negotiable)

Мы не хотели, чтобы наше сообщество было вынуждено полностью переписывать приложения для обновления до последней версии Next.js. Мы считаем, что постепенное внедрение — лучшая стратегия для эволюции приложений со временем.

*   **Постепенная миграция по маршрутам**: Без полного переписывания приложения вы можете перенести отдельный маршрут на App Router и начать использовать новые функции в удобном для вас темпе. См. наше [руководство по постепенному внедрению](/docs/app/building-your-application/upgrading/app-router-migration) или [посмотрите обучающее видео](https://www.youtube.com/watch?v=YQMSietiFm0).
*   **Простой откат**: Если вас не устраивает производительность или удобство работы с App Router, вы можете легко вернуться к Pages Router для конкретного маршрута.

Мы исследуем дополнительные возможности для ещё большего упрощения постепенного внедрения.

### [Путь к стабильности](#road-to-stability)

Мы начали разработку App Router для Next.js более года назад и с тех пор последовательно выпускаем новые функции и улучшения.

*   **Первое объявление**: В мае того года мы [опубликовали RFC](/blog/layouts-rfc), чтобы обозначить наши планы по повышению гибкости маршрутизации и макетов.
*   **Ранняя бета-версия**: В Next.js 13 мы выпустили первую версию App Router, позволив сообществу опробовать её и предоставить раннюю обратную связь.
*   **Стабильный API**: Учитывая обратную связь, мы сосредоточились на завершении основного API. В версии 13.4 мы объявили основное API App Router стабильным и готовым к широкому использованию.

[Наши текущие приоритеты](#our-current-focus)
--------------------------------------------

Объявление стабильности сигнализировало сообществу, что основное API окончательно и не будет подвергаться значительным изменениям, требующим переписывания кода.

С тех пор мы получили множество ценных отзывов, а увеличение использования неизбежно выявило ошибки и возможности для дальнейшего улучшения.

Мы хотим, чтобы вы знали: мы **ещё не удовлетворены** опытом работы с App Router, и это наш главный приоритет на ближайшее время. Давайте обсудим работу, которую мы проводим для улучшения этого опыта.

### [Улучшение производительности](#improving-performance)

В ближайшие месяцы мы сосредоточимся на трёх аспектах производительности: скорости локальной разработки, времени сборки и производительности в serverless-среде.

#### [Производительность локальной разработки](#local-development-performance)

По мере развития Next.js и роста размера приложений, построенных на нём, мы постепенно заменяем части его базовой архитектуры более быстрыми и масштабируемыми инструментами.

*   **Прогресс миграции**: Мы начали с замены Babel _(компиляция)_ и Terser _(минификация)_ на [SWC](/docs/architecture/nextjs-compiler). Это помогло улучшить скорость локальной разработки и время сборки.
    
*   **Долгосрочные инвестиции**: Сохранение высокой производительности Fast Refresh независимо от размера приложения требует, чтобы Next.js работал как можно более инкрементально во время локальной разработки, пакетируя и компилируя код только по мере необходимости.
    
    Именно поэтому мы сейчас работаем над заменой webpack _(пакетирование)_ на [Turbopack](https://nextjs.org/docs/app/api-reference/turbopack), который построен на движке инкрементальных вычислений низкого уровня, позволяющем кэшировать вплоть до отдельных функций.
    
    Приложения Next.js, перешедшие на Turbopack, увидят устойчивое улучшение скорости Fast Refresh даже при увеличении их размера.
    
    В последние несколько месяцев команда Turbo сосредоточилась на улучшении производительности Turbopack и поддержки всех функций Next.js и API App Router.
    
    Turbopack сейчас [доступен в бета-версии](/docs/architecture/turbopack) (`next dev --turbo`).
    
*   **Улучшение текущей архитектуры**: Помимо инвестиций в будущее, мы продолжаем вносить улучшения производительности в нашу текущую архитектуру на основе webpack.
    
    Для некоторых приложений Next.js, особенно тех, которые обновляют тысячи модулей, мы получали сообщения о нестабильности локальной разработки и Fast Refresh. Мы работаем над улучшением производительности и надёжности в этой области. Например, мы недавно добавили предварительно настроенные параметры (`modularizeImports`) для работы с [большими библиотеками иконок](https://github.com/vercel/next.js/pull/50900), которые могут случайно заставлять тысячи модулей перезагружаться при каждом запросе.
    

#### [Производительность сборки](#build-time-performance)

Мы также работаем над сборкой production-версий с Turbopack (`next build --turbo`) и уже [начали внедрять](https://github.com/vercel/next.js/pull/51546) первые части этой работы. Ожидайте больше обновлений в предстоящих релизах.

#### [Производительность в production](#production-performance)

Наконец, в Vercel мы работаем над оптимизацией производительности и использования памяти Vercel Functions, [определяемых через код приложения Next.js](https://vercel.com/blog/framework-defined-infrastructure), обеспечивая минимальное время холодного старта при сохранении преимуществ масштабируемой serverless-архитектуры. Эта работа привела к появлению новых [возможностей трассировки](/docs/app/building-your-application/optimizing/open-telemetry) (экспериментальных) в Next.js и первым исследованиям в области серверных инструментов для разработчиков.

[Повышение стабильности](#improving-stability)
---------------------------------------------

Pages Router существует уже шесть лет. Выпуск App Router означал введение новых API, которым всего шесть месяцев. Мы прошли долгий путь за короткое время, но есть ещё возможности для улучшений по мере того, как мы узнаём больше от нашего сообщества и их опыта использования.

Мы благодарны сообществу за готовность активно внедрять App Router и предоставлять обратную связь. Было множество отчётов об ошибках, которые мы исследуем, и мы благодарны за минимальные воспроизведения, которые вы создали, чтобы помочь изолировать проблемы и проверить исправления.

Начиная с версии 13.4, мы уже исправили ряд серьёзных ошибок, влияющих на стабильность, которые доступны в последнем патче (`13.4.7`). Мы продолжим интенсивно работать над производительностью и стабильностью.

[Развитие образовательных материалов для разработчиков](#improving-developer-education)
--------------------------------------------------------------------------------------

Хотя мы считаем, что новые функции App Router и современного React мощные, они также требуют дополнительного обучения и документации, чтобы помочь освоить эти новые концепции.

### [Функции Next.js](#nextjs-features)

В течение последнего года мы работали над полной переработкой документации Next.js. Эта работа теперь доступна на [nextjs.org/docs](/docs). Мы хотели бы выделить некоторые [важные моменты](https://twitter.com/delba_oliveira/status/1664323492077256704):

*   **Переключение между Pages и App**: Вы можете переключаться между изучением документации Pages Router или App Router с помощью кнопки в левой части документации. Кроме того, вы можете фильтровать результаты поиска в зависимости от выбранного роутера.
*   **Улучшенное содержание и архитектура информации**: Почти каждая страница документации App Router была обновлена, включая более чёткую структуру и связность между страницами, а также сотни новых иллюстраций, чтобы визуально объяснить, как работает Next.js.
*   **Ещё впереди**: Здесь нам предстоит ещё много работы. Команда Developer Experience в Vercel усердно трудится над созданием дополнительных учебных ресурсов (включая обновлённый курс на `/learn`, посвящённый App Router) и примеров реальных кодовых баз (включая переработку [Next.js Commerce](https://github.com/vercel/commerce)).

Мы будем выпускать новый контент в [документации](/docs), на [Twitter](https://twitter.com/nextjs), [YouTube](https://www.youtube.com/c/VercelHQ) и других платформах.

### [Новые функции React](#new-react-features)

Мы также услышали ваши отзывы о необходимости обучения новым функциям React, доступным в App Router Next.js.

*   **Server Components**: Важно отметить, что такие функции, как Server Components, и соглашения, такие как директива [`"use client"`](https://github.com/reactjs/rfcs/blob/main/text/0227-server-module-conventions.md), не являются специфичными для Next.js, а представляют собой часть более широкой экосистемы React.
    
    Наша команда, наши партнёры в Meta и другие независимые участники работают над предоставлением большего количества обучающих материалов по этим темам. Эти концепции ещё молоды, но мы уверены в экосистеме React и [продолжающемся обучении](https://github.com/reactwg/server-components/discussions/5).
    
*   **Client Components**: В свете недавних обсуждений Server Components важно отметить, что клиентские компоненты _не_ являются деоптимизацией. Клиент — валидная часть модели React, и он никуда не исчезает.
    
    Вы можете рассматривать клиентские компоненты как существующую сегодня экосистему Next.js, где ваши любимые библиотеки и инструменты продолжают работать. Например, частый вопрос, который мы видим: нужно ли добавлять `"use client"` в каждый файл, чтобы сделать его клиентским компонентом. Это не обязательно, но мы понимаем, что эти концепции новые и потребуется время для их изучения. Вам нужно только [обозначить верхнюю границу](/docs/getting-started/react-essentials#the-use-client-directive), где ваш код переходит с сервера на клиент. Эта архитектура позволяет вам [переплетать серверные и клиентские компоненты](https://github.com/reactwg/server-components/discussions/5).
    
*   **Развитие сторонней экосистемы**: Помимо обучения, экосистема вокруг новых функций React продолжает расти. Например, [Panda CSS](https://panda-css.com/), CSS-in-JS библиотека от создателей Chakra UI, недавно объявила о поддержке React Server Components.
    
*   **Server Actions (альфа)**: [Server Actions](/docs/app/building-your-application/data-fetching/server-actions) позволяют выполнять мутации данных на сервере, уменьшают клиентский JavaScript и обеспечивают прогрессивное улучшение форм. Мы пока не рекомендуем использовать Server Actions в production. Мы благодарны за ранние отзывы тестировщиков альфа-версии, которые помогают нам формировать будущее этой функции.
    

[Благодарности](#thank-you)
---------------------------

Мы благодарны многим из вас за выбор Next.js для обучения и разработки.

Наша сосредоточенность на производительности, стабильности и удобстве разработчиков будет отражена в предстоящих релизах Next.js. Мы хотим, чтобы работа с Next.js была приятной — и делала вас (и вашу команду) более продуктивными.

Как всегда, мы очень ценим вашу обратную связь. Если вы столкнулись с какими-либо проблемами в Next.js, пожалуйста, [создайте issue](https://github.com/vercel/next.js/issues/new/choose) или [начните новое обсуждение](https://github.com/vercel/next.js/discussions), и мы изучим их.