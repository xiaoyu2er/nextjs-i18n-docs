---
source-updated-at: 2025-05-19T22:31:51.000Z
translation-updated-at: 2025-06-02T20:01:14.340Z
title: Использование и оптимизация видео
nav_title: Видео
description: Рекомендации и лучшие практики по оптимизации видео в приложениях Next.js.
---

На этой странице описано, как работать с видео в приложениях Next.js, включая хранение и отображение видеофайлов без ущерба для производительности.

## Использование `<video>` и `<iframe>`

Видео можно встраивать на страницу с помощью HTML-тега **`<video>`** для прямого размещения видеофайлов и **`<iframe>`** для видео, размещённых на внешних платформах.

### `<video>`

HTML-тег [`<video>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video) позволяет встраивать самостоятельно размещённое или напрямую загружаемое видео, предоставляя полный контроль над воспроизведением и внешним видом.

```jsx filename="app/ui/video.jsx"
export function Video() {
  return (
    <video width="320" height="240" controls preload="none">
      <source src="/path/to/video.mp4" type="video/mp4" />
      <track
        src="/path/to/captions.vtt"
        kind="subtitles"
        srcLang="en"
        label="English"
      />
      Ваш браузер не поддерживает тег video.
    </video>
  )
}
```

### Распространённые атрибуты тега `<video>`

| Атрибут      | Описание                                                                                               | Пример значения                     |
| ------------ | ------------------------------------------------------------------------------------------------------ | ----------------------------------- |
| `src`        | Указывает источник видеофайла.                                                                        | `<video src="/path/to/video.mp4" />` |
| `width`      | Задаёт ширину видеоплеера.                                                                            | `<video width="320" />`             |
| `height`     | Задаёт высоту видеоплеера.                                                                            | `<video height="240" />`            |
| `controls`   | Если присутствует, отображает стандартные элементы управления воспроизведением.                        | `<video controls />`                |
| `autoPlay`   | Автоматически начинает воспроизведение видео при загрузке страницы. Примечание: политики автовоспроизведения различаются в браузерах. | `<video autoPlay />`                |
| `loop`       | Зацикливает воспроизведение видео.                                                                    | `<video loop />`                    |
| `muted`      | Отключает звук по умолчанию. Часто используется с `autoPlay`.                                         | `<video muted />`                   |
| `preload`    | Определяет, как видео будет загружаться заранее. Значения: `none`, `metadata`, `auto`.                | `<video preload="none" />`          |
| `playsInline`| Включает встроенное воспроизведение на устройствах iOS, часто необходимо для работы автовоспроизведения в Safari на iOS. | `<video playsInline />`             |

> **Полезно знать**: При использовании атрибута `autoPlay` важно также включать атрибут `muted` для обеспечения автовоспроизведения в большинстве браузеров и атрибут `playsInline` для совместимости с устройствами iOS.

Полный список атрибутов видео доступен в [документации MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attributes).

### Лучшие практики работы с видео

- **Резервное содержимое:** При использовании тега `<video>` включайте резервное содержимое внутри тега для браузеров, которые не поддерживают воспроизведение видео.
- **Субтитры или титры:** Добавляйте субтитры или титры для пользователей с нарушениями слуха. Используйте тег [`<track>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track) с элементами `<video>` для указания источников файлов с субтитрами.
- **Доступные элементы управления:** Рекомендуются стандартные элементы управления HTML5 для навигации с клавиатуры и совместимости с программами чтения с экрана. Для более сложных задач рассмотрите сторонние плееры, такие как [react-player](https://github.com/cookpete/react-player) или [video.js](https://videojs.com/), которые предлагают доступные элементы управления и единообразное поведение в разных браузерах.

### `<iframe>`

HTML-тег `<iframe>` позволяет встраивать видео с внешних платформ, таких как YouTube или Vimeo.

```jsx filename="app/page.jsx"
export default function Page() {
  return (
    <iframe src="https://www.youtube.com/embed/19g66ezsKAg" allowFullScreen />
  )
}
```

### Распространённые атрибуты тега `<iframe>`

| Атрибут          | Описание                                                             | Пример значения                       |
| ---------------- | -------------------------------------------------------------------- | ------------------------------------- |
| `src`            | URL страницы для встраивания.                                        | `<iframe src="https://example.com" />` |
| `width`          | Задаёт ширину iframe.                                               | `<iframe width="500" />`              |
| `height`         | Задаёт высоту iframe.                                               | `<iframe height="300" />`             |
| `allowFullScreen`| Позволяет отображать содержимое iframe в полноэкранном режиме.      | `<iframe allowFullScreen />`          |
| `sandbox`        | Включает дополнительные ограничения на содержимое внутри iframe.    | `<iframe sandbox />`                  |
| `loading`        | Оптимизирует поведение загрузки (например, отложенная загрузка).   | `<iframe loading="lazy" />`           |
| `title`          | Предоставляет заголовок для iframe в целях доступности.             | `<iframe title="Описание" />`         |

Полный список атрибутов iframe доступен в [документации MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attributes).

### Выбор метода встраивания видео

Существует два способа встраивания видео в приложение Next.js:

- **Самостоятельно размещённые или прямые видеофайлы:** Встраивайте самостоятельно размещённые видео с помощью тега `<video>` для сценариев, требующих детального контроля над функциональностью и внешним видом плеера. Этот метод интеграции в Next.js позволяет настраивать и контролировать ваше видео.
- **Использование сервисов хостинга видео (YouTube, Vimeo и др.):** Для сервисов хостинга видео, таких как YouTube или Vimeo, используйте их плееры на основе iframe с тегом `<iframe>`. Хотя этот метод ограничивает некоторый контроль над плеером, он предлагает простоту использования и функции, предоставляемые этими платформами.

Выбирайте метод встраивания, соответствующий требованиям вашего приложения и желаемому пользовательскому опыту.

### Встраивание видео с внешних платформ

Для встраивания видео с внешних платформ можно использовать Next.js для получения информации о видео и React Suspense для обработки состояния загрузки.

**1. Создание серверного компонента для встраивания видео**

Первый шаг — создание [серверного компонента](https://nextjs.org/docs/app/getting-started/server-and-client-components), который генерирует соответствующий iframe для встраивания видео. Этот компонент будет получать исходный URL видео и отображать iframe.

```jsx filename="app/ui/video-component.jsx"
export default async function VideoComponent() {
  const src = await getVideoSrc()

  return <iframe src={src} allowFullScreen />
}
```

**2. Потоковая передача компонента видео с помощью React Suspense**

После создания серверного компонента для встраивания видео следующий шаг — [потоковая передача](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming) компонента с помощью [React Suspense](https://react.dev/reference/react/Suspense).

```jsx filename="app/page.jsx"
import { Suspense } from 'react'
import VideoComponent from '../ui/VideoComponent.jsx'

export default function Page() {
  return (
    <section>
      <Suspense fallback={<p>Загрузка видео...</p>}>
        <VideoComponent />
      </Suspense>
      {/* Другое содержимое страницы */}
    </section>
  )
}
```

> **Полезно знать**: При встраивании видео с внешних платформ учитывайте следующие лучшие практики:
>
> - Убедитесь, что встраиваемые видео адаптивны. Используйте CSS, чтобы iframe или видеоплеер адаптировались к разным размерам экранов.
> - Реализуйте [стратегии загрузки видео](https://yoast.com/site-speed-tips-for-faster-video/) в зависимости от условий сети, особенно для пользователей с ограниченными тарифными планами.

Этот подход обеспечивает лучший пользовательский опыт, так как предотвращает блокировку страницы, позволяя пользователю взаимодействовать с ней во время загрузки видео.

Для более вовлекающего и информативного опыта загрузки рассмотрите использование скелетона загрузки в качестве резервного интерфейса. Вместо простого сообщения о загрузке можно показать скелетон, напоминающий видеоплеер:

```jsx filename="app/page.jsx"
import { Suspense } from 'react'
import VideoComponent from '../ui/VideoComponent.jsx'
import VideoSkeleton from '../ui/VideoSkeleton.jsx'

export default function Page() {
  return (
    <section>
      <Suspense fallback={<VideoSkeleton />}>
        <VideoComponent />
      </Suspense>
      {/* Другое содержимое страницы */}
    </section>
  )
}
```

## Самостоятельно размещённые видео

Самостоятельное размещение видео может быть предпочтительным по нескольким причинам:

- **Полный контроль и независимость:** Самостоятельное размещение даёт вам прямое управление вашим видео, от воспроизведения до внешнего вида, обеспечивая полное владение и контроль без ограничений внешних платформ.
- **Настройка под конкретные нужды:** Идеально для уникальных требований, таких как динамические фоновые видео, позволяя настраивать контент в соответствии с дизайном и функциональными потребностями.
- **Производительность и масштабируемость:** Выбирайте решения для хранения, которые одновременно высокопроизводительны и масштабируемы, чтобы эффективно поддерживать растущий трафик и размер контента.
- **Стоимость и интеграция:** Балансируйте затраты на хранение и пропускную способность с необходимостью лёгкой интеграции в ваш фреймворк Next.js и более широкую экосистему технологий.

### Использование Vercel Blob для хостинга видео

[Vercel Blob](https://vercel.com/docs/storage/vercel-blob?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) предлагает эффективный способ хостинга видео, предоставляя масштабируемое облачное хранилище, хорошо работающее с Next.js. Вот как можно разместить видео с помощью Vercel Blob:

**1. Загрузка видео в Vercel Blob**

В панели управления Vercel перейдите на вкладку "Storage" и выберите ваш [Vercel Blob](https://vercel.com/docs/storage/vercel-blob?utm_source=next-site&utm_medium=docs&utm_campaign=next-website). В правом верхнем углу таблицы Blob найдите и нажмите кнопку "Upload". Затем выберите видеофайл, который хотите загрузить. После завершения загрузки видеофайл появится в таблице Blob.

Альтернативно, вы можете загрузить видео с помощью серверного действия. Подробные инструкции см. в документации Vercel о [загрузке на стороне сервера](https://vercel.com/docs/storage/vercel-blob/server-upload). Vercel также поддерживает [загрузку на стороне клиента](https://vercel.com/docs/storage/vercel-blob/client-upload). Этот метод может быть предпочтительным для определённых случаев использования.

**2. Отображение видео в Next.js**

После загрузки и сохранения видео вы можете отобразить его в вашем приложении Next.js. Вот пример, как это сделать с помощью тега `<video>` и React Suspense:

```jsx filename="app/page.jsx"
import { Suspense } from 'react'
import { list } from '@vercel/blob'

export default function Page() {
  return (
    <Suspense fallback={<p>Загрузка видео...</p>}>
      <VideoComponent fileName="my-video.mp4" />
    </Suspense>
  )
}

async function VideoComponent({ fileName }) {
  const { blobs } = await list({
    prefix: fileName,
    limit: 1,
  })
  const { url } = blobs[0]

  return (
    <video controls preload="none" aria-label="Видеоплеер">
      <source src={url} type="video/mp4" />
      Ваш браузер не поддерживает тег video.
    </video>
  )
}
```

В этом подходе страница использует URL видео из `@vercel/blob` для отображения видео с помощью `VideoComponent`. React Suspense используется для показа резервного содержимого до тех пор, пока URL видео не будет получен и видео не будет готово к показу.

### Добавление субтитров к вашему видео

Если у вас есть субтитры для видео, вы можете легко добавить их с помощью элемента `<track>` внутри тега `<video>`. Вы можете получить файл субтитров из [Vercel Blob](https://vercel.com/docs/storage/vercel-blob?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) аналогично видеофайлу. Вот как можно обновить `<VideoComponent>`, чтобы включить субтитры.

```jsx filename="app/page.jsx"
async function VideoComponent({ fileName }) {
  const { blobs } = await list({
    prefix: fileName,
    limit: 2,
  })
  const { url } = blobs[0]
  const { url: captionsUrl } = blobs[1]

  return (
    <video controls preload="none" aria-label="Видеоплеер">
      <source src={url} type="video/mp4" />
      <track src={captionsUrl} kind="subtitles" srcLang="en" label="English" />
      Ваш браузер не поддерживает тег video.
    </video>
  )
}
```

Следуя этому подходу, вы можете эффективно самостоятельно размещать и интегрировать видео в ваши приложения Next.js.

## Ресурсы

Для дальнейшего изучения оптимизации видео и лучших практик обратитесь к следующим ресурсам:

- **Понимание форматов видео и кодеков:** Выбирайте правильный формат и кодек, например MP4 для совместимости или WebM для оптимизации для веба, в соответствии с вашими потребностями. Подробнее см. [руководство Mozilla по видеокодекам](https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs).
- **Сжатие видео:** Используйте инструменты, такие как FFmpeg, для эффективного сжатия видео, балансируя качество и размер файла. Узнайте о методах сжатия на [официальном сайте FFmpeg](https://www.ffmpeg.org/).
- **Настройка разрешения и битрейта:** Настраивайте [разрешение и битрейт](https://www.dacast.com/blog/bitrate-vs-resolution/#:~:text=The%20two%20measure%20different%20aspects,yield%20different%20qualities%20of%20video) в зависимости от платформы просмотра, с более низкими настройками для мобильных устройств.
- **Сети доставки контента (CDN):** Используйте CDN для ускорения доставки видео и управления высоким трафиком. При использовании некоторых решений для хранения, таких как Vercel Blob, функциональность CDN автоматически обрабатывается за вас. [Узнайте больше](https://vercel.com/docs/edge-network/overview?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) о CDN и их преимуществах.

Изучите эти платформы потокового видео для интеграции видео в ваши проекты Next.js:

### Компонент `next-video` с открытым исходным кодом

- Предоставляет компонент `<Video>` для Next.js, совместимый с различными сервисами хостинга, включая [Vercel Blob](https://vercel.com/docs/storage/vercel-blob?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), S3, Backblaze и Mux.
- [Подробная документация](https://next-video.dev/docs) по использованию `next-video.dev` с различными сервисами хостинга.

### Интеграция с Cloudinary

- Официальное [руководство и документация по интеграции](https://next.cloudinary.dev/) для использования Cloudinary с Next.js.
- Включает компонент `<CldVideoPlayer>` для [поддержки видео](https://next.cloudinary.dev/cldvideoplayer/basic-usage).
- Найдите [примеры](https://github.com/cloudinary-community/cloudinary-examples/?tab=readme-ov-file#nextjs) интеграции Cloudinary с Next.js, включая [адаптивную потоковую передачу с переменным битрейтом](https://github.com/cloudinary-community/cloudinary-examples/tree/main/examples/nextjs-cldvideoplayer-abr).
- Другие [библиотеки Cloudinary](https://cloudinary.com/documentation), включая SDK для Node.js, также доступны.

### Mux Video API

- Mux предоставляет [стартовый шаблон](https://github.com/muxinc/video-course-starter-kit) для создания видеокурса с Mux и Next.js.
- Узнайте о рекомендациях Mux по встраиванию [высокопроизводительного видео для вашего приложения Next.js](https://www.mux.com/for/nextjs).
- Изучите [пример проекта](https://with-mux-video.vercel.app/), демонстрирующий Mux с Next.js.

### Fastly

- Узнайте больше об интеграции решений Fastly для [видео по запросу](https://www.fastly.com/products/streaming-media/video-on-demand) и потокового медиа в Next.js.

### Интеграция с ImageKit.io

- Ознакомьтесь с [официальным руководством по быстрому старту](https://imagekit.io/docs/integration/nextjs) для интеграции ImageKit с Next.js.
- Интеграция предоставляет компонент `<IKVideo>`, который обеспечивает [бесшовную поддержку видео](https://imagekit.io/docs/integration/nextjs#rendering-videos).
- Вы также можете изучить другие [библиотеки ImageKit](https://imagekit.io/docs), такие как Node.js SDK, который также доступен.
