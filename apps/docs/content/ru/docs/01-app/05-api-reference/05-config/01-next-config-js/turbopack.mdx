---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-02T20:13:32.431Z
title: turbopack
description: Настройка Next.js с параметрами, специфичными для Turbopack
---

{/* Содержание этого документа является общим для маршрутизаторов app и pages. Вы можете использовать компонент `<PagesOnly>Content</PagesOnly>` для добавления контента, специфичного для маршрутизатора Pages. Любой общий контент не должен быть обернут в компонент. */}

Опция `turbopack` позволяет настроить [Turbopack](/docs/app/api-reference/turbopack) для преобразования различных файлов и изменения способа разрешения модулей.

```ts filename="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  turbopack: {
    // ...
  },
}

export default nextConfig
```

```js filename="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  turbopack: {
    // ...
  },
}

module.exports = nextConfig
```

> **Полезно знать**:
>
> - Turbopack для Next.js не требует загрузчиков или их конфигурации для встроенной функциональности. Turbopack имеет встроенную поддержку CSS и компиляции современного JavaScript, поэтому нет необходимости в `css-loader`, `postcss-loader` или `babel-loader`, если вы используете `@babel/preset-env`.

## Справочник

### Параметры

Доступны следующие параметры для конфигурации `turbo`:

| Параметр            | Описание                                                                 |
| ------------------- | ----------------------------------------------------------------------- |
| `root`              | Устанавливает корневую директорию приложения. Должен быть абсолютным путем. |
| `rules`             | Список поддерживаемых загрузчиков webpack для применения с Turbopack.    |
| `resolveAlias`      | Сопоставление псевдонимов импортов с модулями для загрузки вместо них.   |
| `resolveExtensions` | Список расширений для разрешения при импорте файлов.                     |

### Поддерживаемые загрузчики

Следующие загрузчики были протестированы и работают с реализацией загрузчиков webpack в Turbopack:

- [`babel-loader`](https://www.npmjs.com/package/babel-loader)
- [`@svgr/webpack`](https://www.npmjs.com/package/@svgr/webpack)
- [`svg-inline-loader`](https://www.npmjs.com/package/svg-inline-loader)
- [`yaml-loader`](https://www.npmjs.com/package/yaml-loader)
- [`string-replace-loader`](https://www.npmjs.com/package/string-replace-loader)
- [`raw-loader`](https://www.npmjs.com/package/raw-loader)
- [`sass-loader`](https://www.npmjs.com/package/sass-loader)

## Примеры

### Корневая директория

Turbopack использует корневую директорию для разрешения модулей. Файлы вне корня проекта не разрешаются.

Next.js автоматически определяет корневую директорию вашего проекта. Это делается путем поиска одного из следующих файлов:

- `pnpm-lock.yaml`
- `package-lock.json`
- `yarn.lock`
- `bun.lock`
- `bun.lockb`

Если у вас другая структура проекта, например, если вы не используете рабочие пространства, вы можете вручную установить параметр `root`:

```js filename="next.config.js"
const path = require('path')
module.exports = {
  turbopack: {
    root: path.join(__dirname, '..'),
  },
}
```

### Настройка загрузчиков webpack

Если вам нужна поддержка загрузчиков сверх встроенной функциональности, многие загрузчики webpack уже работают с Turbopack. В настоящее время есть некоторые ограничения:

- Реализовано только ядро API загрузчиков webpack. В настоящее время есть достаточное покрытие для некоторых популярных загрузчиков, и мы расширим поддержку API в будущем.
- Поддерживаются только загрузчики, возвращающие код JavaScript. Загрузчики, преобразующие файлы, такие как таблицы стилей или изображения, в настоящее время не поддерживаются.
- Параметры, передаваемые загрузчикам webpack, должны быть простыми примитивами JavaScript, объектами и массивами. Например, нельзя передавать модули плагинов через `require()` в качестве значений параметров.

Для настройки загрузчиков добавьте названия установленных загрузчиков и любые параметры в `next.config.js`, сопоставляя расширения файлов со списком загрузчиков.

Ниже приведен пример использования загрузчика [`@svgr/webpack`](https://www.npmjs.com/package/@svgr/webpack), который позволяет импортировать файлы `.svg` и отображать их как компоненты React.

```js filename="next.config.js"
module.exports = {
  turbopack: {
    rules: {
      '*.svg': {
        loaders: ['@svgr/webpack'],
        as: '*.js',
      },
    },
  },
}
```

> **Полезно знать**: До версии Next.js 13.4.4 `turbo.rules` назывался `turbo.loaders` и принимал только расширения файлов, такие как `.mdx`, вместо `*.mdx`.

### Разрешение псевдонимов

Turbopack можно настроить для изменения разрешения модулей через псевдонимы, аналогично конфигурации [`resolve.alias`](https://webpack.js.org/configuration/resolve/#resolvealias) в webpack.

Для настройки псевдонимов сопоставьте импортируемые шаблоны с их новым назначением в `next.config.js`:

```js filename="next.config.js"
module.exports = {
  turbopack: {
    resolveAlias: {
      underscore: 'lodash',
      mocha: { browser: 'mocha/browser-entry.js' },
    },
  },
}
```

Это создает псевдоним для пакета `underscore`, указывая на пакет `lodash`. Другими словами, `import underscore from 'underscore'` будет загружать модуль `lodash` вместо `underscore`.

Turbopack также поддерживает условные псевдонимы через это поле, аналогично [условным экспортам](https://nodejs.org/docs/latest-v18.x/api/packages.html#conditional-exports) в Node.js. В настоящее время поддерживается только условие `browser`. В приведенном выше случае импорты модуля `mocha` будут перенаправляться на `mocha/browser-entry.js`, когда Turbopack работает в браузерной среде.

### Разрешение пользовательских расширений

Turbopack можно настроить для разрешения модулей с пользовательскими расширениями, аналогично конфигурации [`resolve.extensions`](https://webpack.js.org/configuration/resolve/#resolveextensions) в webpack.

Для настройки разрешения расширений используйте поле `resolveExtensions` в `next.config.js`:

```js filename="next.config.js"
module.exports = {
  turbopack: {
    resolveExtensions: ['.mdx', '.tsx', '.ts', '.jsx', '.js', '.mjs', '.json'],
  },
}
```

Это перезаписывает исходные расширения для разрешения предоставленным списком. Убедитесь, что включили стандартные расширения.

Для получения дополнительной информации и руководства по миграции вашего приложения с webpack на Turbopack см. [документацию Turbopack о совместимости с webpack](https://turbo.build/pack/docs/migrating-from-webpack).

## История версий

| Версия   | Изменения                                         |
| -------- | ----------------------------------------------- |
| `15.3.0` | `experimental.turbo` изменен на `turbopack`.    |
| `13.0.0` | Введен `experimental.turbo`.                    |