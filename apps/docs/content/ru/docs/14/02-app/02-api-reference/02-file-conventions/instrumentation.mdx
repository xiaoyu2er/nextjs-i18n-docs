---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-06T16:54:23.429Z
title: instrumentation.js
description: Справочник API для файла instrumentation.js.
related:
  title: Подробнее об инструментировании
  links:
    - app/building-your-application/optimizing/instrumentation
---

Файл `instrumentation.js|ts` используется для интеграции инструментов мониторинга и логирования в ваше приложение. Это позволяет отслеживать производительность и поведение приложения, а также отлаживать проблемы в продакшене.

Для использования разместите файл в **корне** вашего приложения или внутри папки [`src`](/docs/app/building-your-application/configuring/src-directory), если она используется.

## Настройка

Инструментирование в настоящее время является экспериментальной функцией. Чтобы использовать файл `instrumentation`, необходимо явно включить его, указав [`experimental.instrumentationHook = true;`](/docs/app/api-reference/next-config-js/instrumentationHook) в вашем `next.config.js`:

```js filename="next.config.js"
module.exports = {
  experimental: {
    instrumentationHook: true,
  },
}
```

## Экспорты

### `register` (обязательный)

Файл экспортирует функцию `register`, которая вызывается **один раз** при инициализации нового экземпляра сервера Next.js. Функция `register` может быть асинхронной.

```ts filename="instrumentation.ts" switcher
import { registerOTel } from '@vercel/otel'

export function register() {
  registerOTel('next-app')
}
```

```js filename="instrumentation.js" switcher
import { registerOTel } from '@vercel/otel'

export function register() {
  registerOTel('next-app')
}
```

## История версий

| Версия    | Изменения                                               |
| --------- | ------------------------------------------------------- |
| `v14.0.4` | Добавлена поддержка Turbopack для `instrumentation`     |
| `v13.2.0` | `instrumentation` добавлен как экспериментальная функция |