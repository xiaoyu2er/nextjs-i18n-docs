---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-06T17:33:36.998Z
title: Среда выполнения Edge и Node.js
description: Узнайте о переключаемых средах выполнения (Edge и Node.js) в Next.js.
---

{/* Содержание этого документа используется как для маршрутизатора приложения, так и для страниц. Вы можете использовать компонент `<PagesOnly>Контент</PagesOnly>` для добавления контента, специфичного для маршрутизатора страниц. Любой общий контент не должен быть обернут в компонент. */}

В контексте Next.js среда выполнения (runtime) относится к набору библиотек, API и общей функциональности, доступной вашему коду во время выполнения.

На сервере есть две среды выполнения, в которых могут рендериться части вашего приложения:

- **Среда выполнения Node.js** (по умолчанию) имеет доступ ко всем API Node.js и совместимым пакетам из экосистемы.
- **Среда выполнения Edge** основана на [Web API](/docs/app/api-reference/edge).

## Различия сред выполнения

При выборе среды выполнения необходимо учитывать множество факторов. В этой таблице показаны основные различия. Для более детального анализа различий ознакомьтесь с разделами ниже.

|                                                                                                                                                     | Node   | Serverless | Edge             |
| --------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ---------- | ---------------- |
| [Холодный старт](https://vercel.com/docs/concepts/get-started/compute#cold-and-hot-boots?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) | /      | ~250мс     | Мгновенно        |
| [HTTP-потоковая передача](/docs/app/building-your-application/routing/loading-ui-and-streaming)                                                              | Да     | Да         | Да               |
| Ввод-вывод                                                                                                                                          | Все    | Все        | Только `fetch`   |
| Масштабируемость                                                                                                                                    | /      | Высокая    | Наивысшая        |
| Безопасность                                                                                                                                        | Обычная| Высокая    | Высокая          |
| Задержка                                                                                                                                            | Обычная| Низкая     | Наименьшая       |
| npm-пакеты                                                                                                                                          | Все    | Все        | Ограниченный набор |
| [Статический рендеринг](/docs/app/building-your-application/rendering/server-components#static-rendering-default)                                    | Да     | Да         | Нет              |
| [Динамический рендеринг](/docs/app/building-your-application/rendering/server-components#dynamic-rendering)                                          | Да     | Да         | Да               |
| [Ревалидация данных с `fetch`](/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#revalidating-data)               | Да     | Да         | Да               |

### Среда выполнения Edge

В Next.js облегченная среда выполнения Edge представляет собой подмножество доступных API Node.js.

Среда выполнения Edge идеально подходит, если вам нужно доставлять динамический персонализированный контент с низкой задержкой с помощью небольших простых функций. Скорость среды выполнения Edge достигается за счет минимального использования ресурсов, но это может быть ограничивающим фактором во многих сценариях.

Например, код, выполняемый в среде выполнения Edge [на Vercel, не может превышать от 1 МБ до 4 МБ](https://vercel.com/docs/concepts/limits/overview#edge-middleware-and-edge-functions-size). Этот лимит включает импортированные пакеты, шрифты и файлы и может варьироваться в зависимости от инфраструктуры развертывания.

### Среда выполнения Node.js

Использование среды выполнения Node.js дает вам доступ ко всем API Node.js и всем npm-пакетам, которые от них зависят. Однако запуск происходит не так быстро, как при использовании среды выполнения Edge.

Развертывание приложения Next.js на сервере Node.js потребует управления, масштабирования и настройки вашей инфраструктуры. В качестве альтернативы вы можете рассмотреть развертывание приложения Next.js на бессерверной платформе, такой как Vercel, которая позаботится об этом за вас.

### Бессерверная среда Node.js

Бессерверное решение идеально подходит, если вам нужно масштабируемое решение, способное обрабатывать более сложные вычислительные нагрузки, чем среда выполнения Edge. Например, с бессерверными функциями на Vercel общий размер вашего кода составляет [50 МБ](https://vercel.com/docs/concepts/limits/overview#serverless-function-size), включая импортированные пакеты, шрифты и файлы.

Недостатком по сравнению с маршрутами, использующими [Edge](https://vercel.com/docs/concepts/functions/edge-functions), является то, что бессерверным функциям могут потребоваться сотни миллисекунд для запуска перед началом обработки запросов. В зависимости от объема трафика вашего сайта это может происходить часто, так как функции не всегда находятся в "разогретом" состоянии.

<AppOnly>

## Примеры

### Настройка среды выполнения для сегмента

Вы можете указать среду выполнения для отдельных сегментов маршрута в вашем приложении Next.js. Для этого [объявите переменную с именем `runtime` и экспортируйте ее](/docs/app/api-reference/file-conventions/route-segment-config). Переменная должна быть строкой и иметь значение либо `'nodejs'`, либо `'edge'`.

В следующем примере показан сегмент маршрута страницы, который экспортирует `runtime` со значением `'edge'`:

```tsx filename="app/page.tsx" switcher
export const runtime = 'edge' // 'nodejs' (по умолчанию) | 'edge'
```

```jsx filename="app/page.js" switcher
export const runtime = 'edge' // 'nodejs' (по умолчанию) | 'edge'
```

Вы также можете определить `runtime` на уровне макета, что приведет к выполнению всех маршрутов под этим макетом в среде выполнения Edge:

```tsx filename="app/layout.tsx" switcher
export const runtime = 'edge' // 'nodejs' (по умолчанию) | 'edge'
```

```jsx filename="app/layout.js" switcher
export const runtime = 'edge' // 'nodejs' (по умолчанию) | 'edge'
```

Если среда выполнения сегмента _не_ задана, будет использоваться среда выполнения `nodejs` по умолчанию. Вам не нужно использовать опцию `runtime`, если вы не планируете переходить со среды выполнения Node.js.

</AppOnly>

> Полный список доступных API см. в [документации Node.js](https://nodejs.org/docs/latest/api/) и [документации Edge](/docs/app/api-reference/edge). Обе среды выполнения также могут поддерживать [потоковую передачу](/docs/app/building-your-application/routing/loading-ui-and-streaming) в зависимости от вашей инфраструктуры развертывания.