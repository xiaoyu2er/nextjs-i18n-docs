---
source-updated-at: 2025-05-29T19:07:21.000Z
translation-updated-at: 2025-06-02T19:25:02.135Z
title: Next.jsのインストール
headline: 'React 基礎: Next.jsのインストール'
description: Next.jsのインストール方法とコードのリファクタリングについて学びます。
image: 'https://nextjs.org/api/learn-og?title=Installing%20Next.js&amp;chapter=9'
---

プロジェクトでNext.jsを使用する場合、[unpkg.com](http://unpkg.com)から`react`と`react-dom`スクリプトを読み込む必要はありません。代わりに、`npm`またはお好みのパッケージマネージャーを使用してこれらのパッケージをローカルにインストールできます。

> **注**: Next.jsを使用するには、マシンにNode.jsバージョン**18.17.0**以上がインストールされている必要があります（[最小バージョン要件を確認](/docs/getting-started/installation)）。[こちらからダウンロード](https://nodejs.org/en/)できます。

これを行うには、`index.html`ファイルと同じディレクトリに`package.json`という新しいファイルを作成し、空のオブジェクト`{}`を記述します。

```json {1} filename="package.json"
{}
```

[ターミナル](https://code.visualstudio.com/docs/terminal/basics)で、プロジェクトのルートディレクトリで次のコマンドを実行します:

```bash filename="Terminal"
npm install react@latest react-dom@latest next@latest
```

インストールが完了すると、`package.json`ファイル内にプロジェクトの依存関係がリストされているはずです:

```json filename="package.json"
{
  "dependencies": {
    "next": "^14.0.3",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  }
}
```

上記よりも新しいバージョンが表示されても心配ありません。`next`、`react`、`react-dom`パッケージがインストールされていれば問題ありません。

また、各パッケージの正確なバージョン情報を含む`package-lock.json`という新しいファイルも作成されます。

`index.html`ファイルに戻り、以下のコードを削除します:

1. `<html>`と`<body>`タグ
2. `id`が`app`の`<div>`要素
3. NPMでインストールしたため`react`と`react-dom`スクリプト
4. Next.jsにはJSXをブラウザが理解できる有効なJavaScriptに変換するコンパイラがあるため、`Babel`スクリプト
5. `<script type="text/jsx">`タグ
6. `document.getElementById()`と`ReactDom.createRoot()`メソッド
7. `React.useState(0)`関数の`React.`部分

上記の行を削除した後、ファイルの先頭に次のインポートを追加します:

```html filename="index.html"
import { useState } from 'react';
```

コードは次のようになります:

```html {1} filename="index.html"
import { useState } from 'react';
 
function Header({ title }) {
  return <h1>{title ? title : 'Default title'}</h1>;
}
 
function HomePage() {
  const names = ['Ada Lovelace', 'Grace Hopper', 'Margaret Hamilton'];
 
  const [likes, setLikes] = useState(0);
 
  function handleClick() {
    setLikes(likes + 1);
  }
 
  return (
    <div>
      <Header title="Develop. Preview. Ship." />
      <ul>
        {names.map((name) => (
          <li key={name}>{name}</li>
        ))}
      </ul>
 
      <button onClick={handleClick}>Like ({likes})</button>
    </div>
  );
}
```

HTMLファイルに残っているコードはJSXのみなので、ファイルタイプを`.html`から`.js`または`.jsx`に変更できます。

[最初のページを作成](#creating-your-first-page)
-----------------------------------------------------

Next.jsはファイルシステムベースのルーティングを使用します。これは、アプリケーションのルートをコードで定義する代わりに、フォルダとファイルを使用できることを意味します。

Next.jsで最初のページを作成する方法は次のとおりです:

1. [app](/docs/app/building-your-application/routing#the-app-router)という新しいフォルダを作成し、`index.js`ファイルをその中に移動します。
2. `index.js`ファイルを`page.js`に名前変更します。これがアプリケーションのメインページになります。
3. `<HomePage>`コンポーネントに`export default`を追加して、Next.jsがページのメインコンポーネントとしてレンダリングするコンポーネントを識別できるようにします。

```js {7} filename="app/page.js"
import { useState } from 'react';
 
function Header({ title }) {
  return <h1>{title ? title : 'Default title'}</h1>;
}
 
export default function HomePage() {
  // ...
}
```

[開発サーバーの実行](#running-the-development-server)
-----------------------------------------------------------------

次に、開発中に新しいページの変更を確認できるように開発サーバーを実行しましょう。`package.json`ファイルに`"next dev"`スクリプトを追加します:

```json {2,3,4} filename="package.json"
{
  "scripts": {
    "dev": "next dev"
  },
  "dependencies": {
    "next": "^14.0.3",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  }
}
```

ターミナルで`npm run dev`を実行して確認します。次の2つのことに気付くでしょう:

1. [localhost:3000](http://localhost:3000)に移動すると、次のエラーが表示されます:

<Image
  alt="Next.jsエラーメッセージ: useStateが必要なコンポーネントをインポートしています。これはクライアントコンポーネントでのみ機能します..."
  srcLight="https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/learn/light/learn-usestate-rsc-error.png"
  srcDark="https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/learn/dark/learn-usestate-rsc-error.png"
  width="1600"
  height="894"
/>

これは、Next.jsがReactサーバーコンポーネントを使用しているためです。サーバーコンポーネントは`useState`をサポートしていないため、代わりにクライアントコンポーネントを使用する必要があります。

次の章では、サーバーコンポーネントとクライアントコンポーネントの主な違いについて説明し、このエラーを修正します。

2. `app`フォルダ内に`layout.js`という新しいファイルが自動的に作成されます。これはアプリケーションのメインレイアウトです。すべてのページで共有されるUI要素（ナビゲーション、フッターなど）を追加するために使用できます。

```js filename="/app/layout.js"
export const metadata = {
  title: 'Next.js',
  description: 'Generated by Next.js',
};
 
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

[まとめ](#summary)
-------------------

これまでの移行作業を見ると、Next.jsを使用する利点がすでに感じられるかもしれません:

* ReactとBabelスクリプトを削除しました。これにより、考慮する必要のある複雑なツールと設定が不要になります。
* 最初のページを作成しました。

> **追加資料:**
> 
> *   [Next.jsルーティングの基礎](/docs/app/building-your-application/routing)
> *   [ルートの定義](/docs/app/building-your-application/routing/defining-routes)
> *   [ページとレイアウト](/docs/app/building-your-application/routing/pages-and-layouts)