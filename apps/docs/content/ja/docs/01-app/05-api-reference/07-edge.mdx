---
source-updated-at: 2025-05-19T22:31:51.000Z
translation-updated-at: 2025-06-02T19:58:46.940Z
title: Edge Runtime
description: Edge Runtime に関する API リファレンス
---

{/* このドキュメントの内容は App Router と Pages Router で共有されています。Pages Router 固有のコンテンツを追加する場合は `<PagesOnly>コンテンツ</PagesOnly>` コンポーネントを使用できます。共有コンテンツはコンポーネントでラップしないでください。 */}

Next.js ではアプリケーションで使用できる2つのサーバーランタイムを提供しています:

- **Node.js ランタイム** (デフォルト): すべての Node.js API にアクセス可能で、アプリケーションのレンダリングに使用されます。
- **Edge ランタイム**: [制限された API セット](#reference) を含み、[Middleware](/docs/app/api-reference/file-conventions/middleware) で使用されます。

## 注意事項

- Edge ランタイムはすべての Node.js API をサポートしていません。一部のパッケージは期待通りに動作しない可能性があります。
- Edge ランタイムは インクリメンタル静的再生成 (ISR) をサポートしていません。
- どちらのランタイムも、デプロイアダプターに応じて [ストリーミング](/docs/app/building-your-application/routing/loading-ui-and-streaming) をサポートできます。

## リファレンス

Edge ランタイムは以下の API をサポートしています:

### ネットワーク API

| API                                                                             | 説明                                |
| ------------------------------------------------------------------------------- | ----------------------------------- |
| [`Blob`](https://developer.mozilla.org/docs/Web/API/Blob)                       | バイナリデータを表す                |
| [`fetch`](https://developer.mozilla.org/docs/Web/API/Fetch_API)                 | リソースを取得する                  |
| [`FetchEvent`](https://developer.mozilla.org/docs/Web/API/FetchEvent)           | フェッチイベントを表す              |
| [`File`](https://developer.mozilla.org/docs/Web/API/File)                       | ファイルを表す                      |
| [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData)               | フォームデータを表す                |
| [`Headers`](https://developer.mozilla.org/docs/Web/API/Headers)                 | HTTP ヘッダーを表す                 |
| [`Request`](https://developer.mozilla.org/docs/Web/API/Request)                 | HTTP リクエストを表す               |
| [`Response`](https://developer.mozilla.org/docs/Web/API/Response)               | HTTP レスポンスを表す               |
| [`URLSearchParams`](https://developer.mozilla.org/docs/Web/API/URLSearchParams) | URL 検索パラメータを表す            |
| [`WebSocket`](https://developer.mozilla.org/docs/Web/API/WebSocket)             | WebSocket 接続を表す                |

### エンコーディング API

| API                                                                                 | 説明                                      |
| ----------------------------------------------------------------------------------- | ----------------------------------------- |
| [`atob`](https://developer.mozilla.org/en-US/docs/Web/API/atob)                     | base-64 エンコードされた文字列をデコード  |
| [`btoa`](https://developer.mozilla.org/en-US/docs/Web/API/btoa)                     | 文字列を base-64 エンコード               |
| [`TextDecoder`](https://developer.mozilla.org/docs/Web/API/TextDecoder)             | Uint8Array を文字列にデコード             |
| [`TextDecoderStream`](https://developer.mozilla.org/docs/Web/API/TextDecoderStream) | ストリーム用のチェーン可能なデコーダー    |
| [`TextEncoder`](https://developer.mozilla.org/docs/Web/API/TextEncoder)             | 文字列を Uint8Array にエンコード          |
| [`TextEncoderStream`](https://developer.mozilla.org/docs/Web/API/TextEncoderStream) | ストリーム用のチェーン可能なエンコーダー  |

### ストリーム API

| API                                                                                                     | 説明                                      |
| ------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| [`ReadableStream`](https://developer.mozilla.org/docs/Web/API/ReadableStream)                           | 読み取り可能なストリームを表す            |
| [`ReadableStreamBYOBReader`](https://developer.mozilla.org/docs/Web/API/ReadableStreamBYOBReader)       | ReadableStream のリーダーを表す           |
| [`ReadableStreamDefaultReader`](https://developer.mozilla.org/docs/Web/API/ReadableStreamDefaultReader) | ReadableStream のデフォルトリーダーを表す |
| [`TransformStream`](https://developer.mozilla.org/docs/Web/API/TransformStream)                         | 変換ストリームを表す                      |
| [`WritableStream`](https://developer.mozilla.org/docs/Web/API/WritableStream)                           | 書き込み可能なストリームを表す            |
| [`WritableStreamDefaultWriter`](https://developer.mozilla.org/docs/Web/API/WritableStreamDefaultWriter) | WritableStream のライターを表す           |

### 暗号化 API

| API                                                                       | 説明                                                                                       |
| ------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| [`crypto`](https://developer.mozilla.org/docs/Web/API/Window/crypto)      | プラットフォームの暗号化機能へのアクセスを提供                                            |
| [`CryptoKey`](https://developer.mozilla.org/docs/Web/API/CryptoKey)       | 暗号鍵を表す                                                                              |
| [`SubtleCrypto`](https://developer.mozilla.org/docs/Web/API/SubtleCrypto) | ハッシュ、署名、暗号化/復号化などの一般的な暗号プリミティブへのアクセスを提供             |

### Web 標準 API

| API                                                                                                                   | 説明                                                                                                                                                                                                 |
| --------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`AbortController`](https://developer.mozilla.org/docs/Web/API/AbortController)                                       | 1つ以上のDOMリクエストを任意のタイミングで中止できるようにする                                                                                                                                       |
| [`Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)                           | 値の配列を表す                                                                                                                                                                                      |
| [`ArrayBuffer`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)               | 固定長の生のバイナリデータバッファを表す                                                                                                                                                            |
| [`Atomics`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics)                       | アトミック操作を静的メソッドとして提供する                                                                                                                                                          |
| [`BigInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt)                         | 任意精度の整数を表す                                                                                                                                                                                |
| [`BigInt64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array)           | 64ビット符号付き整数の型付き配列を表す                                                                                                                                                              |
| [`BigUint64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array)         | 64ビット符号なし整数の型付き配列を表す                                                                                                                                                              |
| [`Boolean`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                       | 論理値を表し、`true`と`false`の2つの値を持つ                                                                                                                                                        |
| [`clearInterval`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval)                 | `setInterval()`で設定された繰り返し処理をキャンセルする                                                                                                                                             |
| [`clearTimeout`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout)                   | `setTimeout()`で設定された遅延処理をキャンセルする                                                                                                                                                  |
| [`console`](https://developer.mozilla.org/docs/Web/API/Console)                                                       | ブラウザのデバッグコンソールへのアクセスを提供する                                                                                                                                                  |
| [`DataView`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView)                     | `ArrayBuffer`の汎用ビューを表す                                                                                                                                                                     |
| [`Date`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date)                             | プラットフォームに依存しない形式で単一の時点を表す                                                                                                                                                  |
| [`decodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURI)                   | `encodeURI`または類似のルーチンで作成されたURIをデコードする                                                                                                                                        |
| [`decodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent) | `encodeURIComponent`または類似のルーチンで作成されたURIコンポーネントをデコードする                                                                                                                 |
| [`DOMException`](https://developer.mozilla.org/docs/Web/API/DOMException)                                             | DOMで発生したエラーを表す                                                                                                                                                                           |
| [`encodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)                   | 特定の文字をUTF-8エンコーディングを表す1～4つのエスケープシーケンスに置き換えてURIをエンコードする                                                                                                 |
| [`encodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) | 特定の文字をUTF-8エンコーディングを表す1～4つのエスケープシーケンスに置き換えてURIコンポーネントをエンコードする                                                                                   |
| [`Error`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)                           | 文の実行やプロパティへのアクセス時に発生するエラーを表す                                                                                                                                            |
| [`EvalError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/EvalError)                   | グローバル関数`eval()`に関連するエラーを表す                                                                                                                                                        |
| [`Float32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float32Array)             | 32ビット浮動小数点数の型付き配列を表す                                                                                                                                                              |
| [`Float64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float64Array)             | 64ビット浮動小数点数の型付き配列を表す                                                                                                                                                              |
| [`Function`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function)                     | 関数を表す                                                                                                                                                                                          |
| [`Infinity`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Infinity)                     | 数学的な無限大の値を表す                                                                                                                                                                            |
| [`Int8Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array)                   | 8ビット符号付き整数の型付き配列を表す                                                                                                                                                               |
| [`Int16Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int16Array)                 | 16ビット符号付き整数の型付き配列を表す                                                                                                                                                              |
| [`Int32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int32Array)                 | 32ビット符号付き整数の型付き配列を表す                                                                                                                                                              |
| [`Intl`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl)                             | 国際化(i18n)と地域化(l10n)機能へのアクセスを提供する                                                                                                                                                |
| [`isFinite`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isFinite)                     | 値が有限数かどうかを判定する                                                                                                                                                                        |
| [`isNaN`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isNaN)                           | 値が`NaN`かどうかを判定する                                                                                                                                                                         |
| [`JSON`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON)                             | JavaScriptの値とJSON形式の相互変換機能を提供する                                                                                                                                                     |
| [`Map`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map)                               | 各値が一度だけ出現する値のコレクションを表す                                                                                                                                                        |
| [`Math`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math)                             | 数学関数と定数へのアクセスを提供する                                                                                                                                                                |
| [`Number`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                         | 数値を表す                                                                                                                                                                                          |
| [`Object`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)                         | すべてのJavaScriptオブジェクトの基底となるオブジェクトを表す                                                                                                                                        |
| [`parseFloat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseFloat)                 | 文字列引数を解析して浮動小数点数を返す                                                                                                                                                              |
| [`parseInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseInt)                     | 文字列引数を解析して指定された基数の整数を返す                                                                                                                                                      |
| [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)                       | 非同期操作の最終的な完了（または失敗）とその結果の値を表す                                                                                                                                          |
| [`Proxy`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy)                           | 基本的な操作（プロパティ検索、代入、列挙、関数呼び出しなど）のカスタム動作を定義するために使用されるオブジェクトを表す                                                                            |
| [`queueMicrotask`](https://developer.mozilla.org/docs/Web/API/queueMicrotask)                                         | マイクロタスクをキューに入れて実行する                                                                                                                                                              |
| [`RangeError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RangeError)                 | 値が許可された値のセットまたは範囲にない場合のエラーを表す                                                                                                                                          |
| [`ReferenceError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError)         | 存在しない変数が参照された場合のエラーを表す                                                                                                                                                        |
| [`Reflect`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Reflect)                       | インターセプト可能なJavaScript操作のメソッドを提供する                                                                                                                                              |
| [`RegExp`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RegExp)                         | 正規表現を表し、文字の組み合わせをマッチさせる                                                                                                                                                      |
| [`Set`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Set)                               | 各値が一度だけ出現する値のコレクションを表す                                                                                                                                                        |
| [`setInterval`](https://developer.mozilla.org/docs/Web/API/setInterval)                                               | 一定の時間間隔で関数を繰り返し呼び出す                                                                                                                                                              |
| [`setTimeout`](https://developer.mozilla.org/docs/Web/API/setTimeout)                                                 | 指定したミリ秒後に関数を呼び出すか式を評価する                                                                                                                                                      |
| [`SharedArrayBuffer`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)   | 固定長の生のバイナリデータバッファを表す                                                                                                                                                            |
| [`String`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                         | 文字のシーケンスを表す                                                                                                                                                                              |
| [`structuredClone`](https://developer.mozilla.org/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)            | 値のディープコピーを作成する                                                                                                                                                                        |
| [`Symbol`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Symbol)                         | オブジェクトプロパティのキーとして使用されるユニークで不変のデータ型を表す                                                                                                                        |
| [`SyntaxError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError)               | 構文的に無効なコードを解釈しようとした場合のエラーを表す                                                                                                                                            |
| [`TypeError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypeError)                   | 値が期待された型ではない場合のエラーを表す                                                                                                                                                          |
| [`Uint8Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)                 | 8ビット符号なし整数の型付き配列を表す                                                                                                                                                               |
| [`Uint8ClampedArray`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray)   | 0-255にクランプされた8ビット符号なし整数の型付き配列を表す                                                                                                                                          |
| [`Uint32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array)               | 32ビット符号なし整数の型付き配列を表す                                                                                                                                                              |
| [`URIError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/URIError)                     | グローバルURI処理関数が誤って使用された場合のエラーを表す                                                                                                                                           |
| [`URL`](https://developer.mozilla.org/docs/Web/API/URL)                                                               | オブジェクトURLを作成するための静的メソッドを提供するオブジェクトを表す                                                                                                                            |
| [`URLPattern`](https://developer.mozilla.org/docs/Web/API/URLPattern)                                                 | URLパターンを表す                                                                                                                                                                                   |
| [`URLSearchParams`](https://developer.mozilla.org/docs/Web/API/URLSearchParams)                                       | キー/値ペアのコレクションを表す                                                                                                                                                                    |
| [`WeakMap`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)                       | キーが弱参照されているキー/値ペアのコレクションを表す                                                                                                                                               |
| [`WeakSet`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WeakSet)                       | 各オブジェクトが一度だけ出現するオブジェクトのコレクションを表す                                                                                                                                    |
| [`WebAssembly`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly)               | WebAssemblyへのアクセスを提供する                                                                                                                                                                    |

### Next.js 固有のポリフィル

- [`AsyncLocalStorage`](https://nodejs.org/api/async_context.html#class-asynclocalstorage)

### 環境変数

`next dev` と `next build` の両方で[環境変数](/docs/app/guides/environment-variables)にアクセスするために `process.env` を使用できます。

### サポートされていない API

Edge Runtime には以下のような制限があります:

- ネイティブの Node.js API は**サポートされていません**。例えば、ファイルシステムの読み書きはできません。
- `node_modules` は使用_可能_ですが、ES モジュールを実装しており、ネイティブの Node.js API を使用していない場合に限ります。
- `require` の直接呼び出しは**許可されていません**。代わりに ES モジュールを使用してください。

以下の JavaScript 言語機能は無効化されており、**動作しません**:

| API                                                                                                                             | 説明                                                                |
| ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| [`eval`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/eval)                                       | 文字列として表現された JavaScript コードを評価する                    |
| [`new Function(evalString)`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function)               | 引数として提供されたコードで新しい関数を作成する                      |
| [`WebAssembly.compile`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compile)         | バッファソースから WebAssembly モジュールをコンパイルする             |
| [`WebAssembly.instantiate`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/instantiate) | バッファソースから WebAssembly モジュールをコンパイル・インスタンス化する |

まれなケースとして、コードに（またはインポートしたモジュールに）ランタイム時に到達できない動的コード評価文が含まれており、ツリーシェイキングで削除できない場合があります。
Middleware 設定で特定のファイルを許可するようにチェックを緩和できます:

```javascript filename="middleware.ts"
export const config = {
  unstable_allowDynamic: [
    // 単一のファイルを許可
    '/lib/utilities.js',
    // サードパーティモジュール function-bind 内のすべてを許可するグロブを使用
    '**/node_modules/function-bind/**',
  ],
}
```

`unstable_allowDynamic` は [glob](https://github.com/micromatch/micromatch#matching-features)、または glob の配列で、特定のファイルに対する動的コード評価を無視します。glob はアプリケーションのルートフォルダからの相対パスです。

これらの文が Edge で実行された場合、_エラーがスローされランタイムエラーを引き起こす_ことに注意してください。
