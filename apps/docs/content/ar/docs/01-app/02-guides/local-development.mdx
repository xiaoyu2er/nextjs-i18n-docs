---
source-updated-at: 2025-05-19T22:31:51.000Z
translation-updated-at: 2025-06-02T20:00:29.522Z
title: كيفية تحسين بيئة التطوير المحلية لديك
nav_title: بيئة التطوير
description: تعلم كيفية تحسين بيئة التطوير المحلية باستخدام Next.js.
---

تم تصميم Next.js لتوفير تجربة ممتازة للمطورين. مع نمو تطبيقك، قد تلاحظ بطئًا في أوقات الترجمة أثناء التطوير المحلي. سيساعدك هذا الدليل في تحديد وإصلاح مشاكل الأداء الشائعة المتعلقة بوقت الترجمة.

## التطوير المحلي مقابل الإنتاج

تختلف عملية التطوير باستخدام `next dev` عن `next build` و `next start`.

`next dev` يترجم مسارات التطبيق أثناء فتحها أو التنقل إليها. هذا يتيح لك بدء خادم التطوير دون انتظار ترجمة كل المسارات في التطبيق، مما يجعل العملية أسرع ويستهلك ذاكرة أقل. بينما يقوم بناء الإنتاج بتطبيق تحسينات أخرى مثل تصغير الملفات وإنشاء تجزئات المحتوى، والتي لا تكون ضرورية للتطوير المحلي.

## تحسين أداء التطوير المحلي

### 1. تحقق من برنامج مكافحة الفيروسات على جهازك

يمكن لبرامج مكافحة الفيروسات إبطاء الوصول إلى الملفات.

حاول إضافة مجلد مشروعك إلى قائمة الاستثناءات في برنامج مكافحة الفيروسات. بينما يكون هذا أكثر شيوعًا على أجهزة ويندوز، نوصي به لأي نظام مثبت عليه أداة مكافحة فيروسات.

### 2. قم بتحديث Next.js وتمكين Turbopack

تأكد من استخدام أحدث إصدار من Next.js. كل إصدار جديد غالبًا ما يتضمن تحسينات في الأداء.

Turbopack هو حزمة جديدة مدمجة في Next.js يمكنها تحسين الأداء المحلي.

```bash
npm install next@latest
npm run dev --turbopack
```

[تعرف على المزيد حول Turbopack](/blog/turbopack-for-development-stable). راجع [أدلة الترقية](/docs/app/guides/upgrading) وأدوات التعديل التلقائي لمزيد من المعلومات.

### 3. تحقق من عمليات الاستيراد الخاصة بك

يمكن أن تؤثر طريقة استيراد الكود بشكل كبير على وقت الترجمة والتعبئة. تعلم المزيد حول [تحسين تجميع الحزم](/docs/app/guides/package-bundling) واستكشف أدوات مثل [Dependency Cruiser](https://github.com/sverweij/dependency-cruiser) أو [Madge](https://github.com/pahen/madge).

### مكتبات الأيقونات

مكتبات مثل `@material-ui/icons` أو `react-icons` يمكنها استيراد آلاف الأيقونات، حتى لو كنت تستخدم عددًا قليلاً فقط. حاول استيراد الأيقونات التي تحتاجها فقط:

```jsx
// بدلاً من هذا:
import { Icon1, Icon2 } from 'react-icons/md'

// افعل هذا:
import Icon1 from 'react-icons/md/Icon1'
import Icon2 from 'react-icons/md/Icon2'
```

تحتوي مكتبات مثل `react-icons` على العديد من مجموعات الأيقونات المختلفة. اختر مجموعة واحدة والتزم بها.

على سبيل المثال، إذا كان تطبيقك يستخدم `react-icons` ويستورد كل هذه المجموعات:

- `pi` (Phosphor Icons)
- `md` (Material Design Icons)
- `tb` (tabler-icons)
- `cg` (cssgg)

سيكون مجموعها عشرات الآلاف من الوحدات التي يجب على المترجم التعامل معها، حتى لو كنت تستخدم استيرادًا واحدًا فقط من كل مجموعة.

### ملفات البرميل (Barrel files)

"ملفات البرميل" هي ملفات تصدر العديد من العناصر من ملفات أخرى. يمكنها إبطاء عمليات البناء لأن المترجم يجب أن يحللها للعثور على ما إذا كانت هناك تأثيرات جانبية في نطاق الوحدة باستخدام الاستيراد.

حاول الاستيراد مباشرة من ملفات محددة عندما يكون ذلك ممكنًا. [تعلم المزيد عن ملفات البرميل](https://vercel.com/blog/how-we-optimized-package-imports-in-next-js) والتحسينات المدمجة في Next.js.

### تحسين استيراد الحزم

يمكن لـ Next.js تحسين عمليات الاستيراد تلقائيًا لبعض الحزم. إذا كنت تستخدم حزمًا تستخدم ملفات برميل، أضفها إلى `next.config.js`:

```jsx
module.exports = {
  experimental: {
    optimizePackageImports: ['package-name'],
  },
}
```

يقوم Turbopack تلقائيًا بتحليل عمليات الاستيراد وتحسينها. لا يحتاج إلى هذا التكوين.

### 4. تحقق من إعداد Tailwind CSS

إذا كنت تستخدم Tailwind CSS، تأكد من إعداده بشكل صحيح.

خطأ شائع هو تكوين مصفوفة `content` بطريقة تتضمن `node_modules` أو مجلدات كبيرة أخرى من الملفات التي لا يجب فحصها.

سيحذرك إصدار Tailwind CSS 3.4.8 أو الأحدث من الإعدادات التي قد تبطئ عملية البناء.

1. في ملف `tailwind.config.js`، كن محددًا بشأن الملفات التي تريد فحصها:

   ```jsx
   module.exports = {
     content: [
       './src/**/*.{js,ts,jsx,tsx}', // جيد
       // هذا قد يكون واسعًا جدًا
       // سيطابق `packages/**/node_modules` أيضًا
       // '../../packages/**/*.{js,ts,jsx,tsx}',
     ],
   }
   ```

2. تجنب فحص ملفات غير ضرورية:

   ```jsx
   module.exports = {
     content: [
       // أفضل - يفحص فقط مجلد 'src'
       '../../packages/ui/src/**/*.{js,ts,jsx,tsx}',
     ],
   }
   ```

### 5. تحقق من إعدادات webpack المخصصة

إذا أضفت إعدادات webpack مخصصة، فقد تكون تبطئ عملية الترجمة.

فكر فيما إذا كنت حقًا بحاجة إليها للتطوير المحلي. يمكنك اختياريًا تضمين أدوات معينة فقط لبناء الإنتاج، أو استكشاف الانتقال إلى Turbopack واستخدام [أحمال](/docs/app/api-reference/config/next-config-js/turbopack#supported-loaders).

### 6. تحسين استخدام الذاكرة

إذا كان تطبيقك كبيرًا جدًا، فقد يحتاج إلى ذاكرة أكثر.

[تعلم المزيد حول تحسين استخدام الذاكرة](/docs/app/guides/memory-usage).

### 7. مكونات الخادم وجلب البيانات

تغييرات مكونات الخادم تتسبب في إعادة عرض الصفحة بالكامل محليًا لإظهار التغييرات الجديدة، بما في ذلك جلب بيانات جديدة للمكون.

خيار `serverComponentsHmrCache` التجريبي يسمح لك بتخزين استجابات `fetch` في مكونات الخادم عبر تحديثات Hot Module Replacement (HMR) في التطوير المحلي. هذا يؤدي إلى استجابات أسرع وتقليل تكاليف استدعاءات API المدفوعة.

[تعلم المزيد عن الخيار التجريبي](/docs/app/api-reference/config/next-config-js/serverComponentsHmrCache).

## أدوات لاكتشاف المشاكل

### تسجيل جلب البيانات التفصيلي

استخدم خيار `logging.fetches` في ملف `next.config.js` لرؤية معلومات أكثر تفصيلاً عما يحدث أثناء التطوير:

```js
module.exports = {
  logging: {
    fetches: {
      fullUrl: true,
    },
  },
}
```

[تعلم المزيد حول تسجيل جلب البيانات](/docs/app/api-reference/config/next-config-js/logging).

## تتبع Turbopack

تتبع Turbopack هو أداة تساعدك على فهم أداء تطبيقك أثناء التطوير المحلي.
يوفر معلومات مفصلة عن الوقت المستغرق لكل وحدة للترجمة وكيفية ارتباطها ببعضها.

1. تأكد من أن لديك أحدث إصدار من Next.js مثبتًا.
1. قم بإنشاء ملف تتبع Turbopack:

   ```bash
   NEXT_TURBOPACK_TRACING=1 npm run dev
   ```

1. انتقل عبر تطبيقك أو قم بإجراء تعديلات على الملفات لإعادة إنتاج المشكلة.
1. أوقف خادم تطوير Next.js.
1. سيكون ملف يسمى `trace-turbopack` متاحًا في مجلد `.next`.
1. يمكنك تفسير الملف باستخدام `next internal trace [مسار-إلى-الملف]`:

   ```bash
   next internal trace .next/trace-turbopack
   ```

   في الإصدارات التي لا يتوفر فيها `trace`، كان الأمر يسمى `turbo-trace-server`:

   ```bash
   next internal turbo-trace-server .next/trace-turbopack
   ```

1. بمجرد تشغيل خادم التتبع، يمكنك عرض التتبع على https://trace.nextjs.org/.
1. بشكل افتراضي، سيقوم عارض التتبع بتجميع التوقيتات، لرؤية كل وقت فردي يمكنك التبديل من "Aggregated in order" إلى "Spans in order" في أعلى يمين العارض.

## لا تزال تواجه مشاكل؟

شارك ملف التتبع الذي تم إنشاؤه في قسم [تتبع Turbopack](#turbopack-tracing) وشاركه على [مناقشات GitHub](https://github.com/vercel/next.js/discussions) أو [Discord](https://nextjs.org/discord).