---
source-updated-at: 2025-06-02T15:30:01.000Z
translation-updated-at: 2025-06-02T20:10:59.991Z
title: تكوين مقطع المسار
description: تعرف على كيفية تكوين خيارات مقاطع المسار في Next.js.
---

> الخيارات الموضحة في هذه الصفحة تكون معطلة إذا كان علم [`dynamicIO`](/docs/app/api-reference/config/next-config-js/dynamicIO) مفعلاً، وسيتم إيقاف استخدامها في المستقبل.

تتيح لك خيارات مقطع المسار تكوين سلوك [الصفحة](/docs/app/api-reference/file-conventions/layout)، أو [التخطيط](/docs/app/api-reference/file-conventions/layout)، أو [معالج المسار](/docs/app/building-your-application/routing/route-handlers) عن طريق تصدير المتغيرات التالية مباشرة:

| الخيار                                  | النوع                                                                                                                      | الافتراضي                    |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| [`experimental_ppr`](#experimental_ppr) | `boolean`                                                                                                                 |
| [`dynamic`](#dynamic)                   | `'auto' \| 'force-dynamic' \| 'error' \| 'force-static'`                                                                  | `'auto'`                   |
| [`dynamicParams`](#dynamicparams)       | `boolean`                                                                                                                 | `true`                     |
| [`revalidate`](#revalidate)             | `false \| 0 \| number`                                                                                                    | `false`                    |
| [`fetchCache`](#fetchcache)             | `'auto' \| 'default-cache' \| 'only-cache' \| 'force-cache' \| 'force-no-store' \| 'default-no-store' \| 'only-no-store'` | `'auto'`                   |
| [`runtime`](#runtime)                   | `'nodejs' \| 'edge'`                                                                                                      | `'nodejs'`                 |
| [`preferredRegion`](#preferredregion)   | `'auto' \| 'global' \| 'home' \| string \| string[]`                                                                      | `'auto'`                   |
| [`maxDuration`](#maxduration)           | `number`                                                                                                                  | يتم تعيينه بواسطة منصة النشر |

## الخيارات

### `experimental_ppr`

تمكين [التصيير الجزئي المسبق (PPR)](/docs/app/getting-started/partial-prerendering) للتخطيط أو الصفحة.

```tsx filename="layout.tsx | page.tsx " switcher
export const experimental_ppr = true
// true | false
```

```jsx filename="layout.js | page.js " switcher
export const experimental_ppr = true
// true | false
```

### `dynamic`

تغيير السلوك الديناميكي للتخطيط أو الصفحة ليصبح ثابتًا بالكامل أو ديناميكيًا بالكامل.

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const dynamic = 'auto'
// 'auto' | 'force-dynamic' | 'error' | 'force-static'
```

```js filename="layout.js | page.js | route.js" switcher
export const dynamic = 'auto'
// 'auto' | 'force-dynamic' | 'error' | 'force-static'
```

> **معلومة مفيدة**: النموذج الجديد في دليل `app` يفضل التحكم الدقيق في التخزين المؤقت على مستوى طلب `fetch` بدلاً من النموذج الثنائي الكلي لـ `getServerSideProps` و `getStaticProps` على مستوى الصفحة في دليل `pages`. خيار `dynamic` هو طريقة للعودة إلى النموذج السابق كتسهيل ويوفر مسار هجرة أبسط.

- **`'auto'`** (الافتراضي): الخيار الافتراضي لتخزين أكبر قدر ممكن دون منع أي مكونات من اختيار السلوك الديناميكي.
- **`'force-dynamic'`**: إجبار [التصيير الديناميكي](/docs/app/getting-started/partial-prerendering#dynamic-rendering)، مما يؤدي إلى تصيير المسارات لكل مستخدم عند وقت الطلب. هذا الخيار يعادل:
  - تعيين خيار كل طلب `fetch()` في التخطيط أو الصفحة إلى `{ cache: 'no-store', next: { revalidate: 0 } }`.
  - تعيين تكوين المقطع إلى `export const fetchCache = 'force-no-store'`
- **`'error'`**: إجبار التصيير الثابت وتخزين بيانات التخطيط أو الصفحة عن طريق التسبب في خطأ إذا استخدمت أي مكونات [واجهات برمجة التطبيقات الديناميكية](/docs/app/getting-started/partial-prerendering#dynamic-rendering) أو بيانات غير مخزنة. هذا الخيار يعادل:
  - `getStaticProps()` في دليل `pages`.
  - تعيين خيار كل طلب `fetch()` في التخطيط أو الصفحة إلى `{ cache: 'force-cache' }`.
  - تعيين تكوين المقطع إلى `fetchCache = 'only-cache', dynamicParams = false`.
  - `dynamic = 'error'` يغير الافتراضي لـ `dynamicParams` من `true` إلى `false`. يمكنك العودة إلى تصيير الصفحات ديناميكيًا للمعاملات الديناميكية التي لم يتم إنشاؤها بواسطة `generateStaticParams` عن طريق تعيين `dynamicParams = true` يدويًا.
- **`'force-static'`**: إجبار التصيير الثابت وتخزين بيانات التخطيط أو الصفحة عن طريق إجبار [`cookies`](/docs/app/api-reference/functions/cookies)، و [`headers()`](/docs/app/api-reference/functions/headers)، و [`useSearchParams()`](/docs/app/api-reference/functions/use-search-params) على إرجاع قيم فارغة. من الممكن استخدام [`revalidate`](#revalidate)، أو [`revalidatePath`](/docs/app/api-reference/functions/revalidatePath)، أو [`revalidateTag`](/docs/app/api-reference/functions/revalidateTag) في الصفحات أو التخطيطات المصيرة باستخدام `force-static`.

> **معلومة مفيدة**:
>
> - يمكن العثور على تعليمات حول [كيفية الهجرة](/docs/app/guides/migrating/app-router-migration#step-6-migrating-data-fetching-methods) من `getServerSideProps` و `getStaticProps` إلى `dynamic: 'force-dynamic'` و `dynamic: 'error'` في [دليل الترقية](/docs/app/guides/migrating/app-router-migration#step-6-migrating-data-fetching-methods).

### `dynamicParams`

التحكم فيما يحدث عند زيارة مقطع ديناميكي لم يتم إنشاؤه باستخدام [generateStaticParams](/docs/app/api-reference/functions/generate-static-params).

```tsx filename="layout.tsx | page.tsx" switcher
export const dynamicParams = true // true | false,
```

```js filename="layout.js | page.js | route.js" switcher
export const dynamicParams = true // true | false,
```

- **`true`** (الافتراضي): يتم إنشاء المقاطع الديناميكية غير المضمنة في `generateStaticParams` عند الطلب.
- **`false`**: ستعيد المقاطع الديناميكية غير المضمنة في `generateStaticParams` خطأ 404.

> **معلومة مفيدة**:
>
> - يحل هذا الخيار محل خيار `fallback: true | false | blocking` لـ `getStaticPaths` في دليل `pages`.
> - لتصيير جميع المسارات ثابتًا في المرة الأولى التي يتم زيارتها فيها، ستحتاج إلى إرجاع مصفوفة فارغة في `generateStaticParams` أو استخدام `export const dynamic = 'force-static'`.
> - عندما يكون `dynamicParams = true`، يستخدم المقطع [تصيير الخادم المتدفق (Streaming Server Rendering)](/docs/app/building-your-application/routing/loading-ui-and-streaming#streaming-with-suspense).

### `revalidate`

تعيين وقت إعادة التحقق الافتراضي للتخطيط أو الصفحة. لا يتجاوز هذا الخيار قيمة `revalidate` المعينة بواسطة طلبات `fetch` الفردية.

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const revalidate = false
// false | 0 | number
```

```js filename="layout.js | page.js | route.js" switcher
export const revalidate = false
// false | 0 | number
```

- **`false`** (الافتراضي): الاستدلال الافتراضي لتخزين أي طلبات `fetch` التي تعين خيار `cache` إلى `'force-cache'` أو يتم اكتشافها قبل استخدام [واجهة برمجة التطبيقات الديناميكية](/docs/app/getting-started/partial-prerendering#dynamic-rendering#dynamic-apis). يعادل دلاليًا `revalidate: Infinity` مما يعني بشكل فعال أنه يجب تخزين المورد إلى أجل غير مسمى. لا يزال بإمكان طلبات `fetch` الفردية استخدام `cache: 'no-store'` أو `revalidate: 0` لتجنب التخزين وجعل المسار مصيرًا ديناميكيًا. أو تعيين `revalidate` إلى رقم موجب أقل من الافتراضي للمسار لزيادة تواتر إعادة التحقق للمسار.
- **`0`**: التأكد من أن التخطيط أو الصفحة يتم [تصييره ديناميكيًا](/docs/app/getting-started/partial-prerendering#dynamic-rendering) دائمًا حتى إذا لم يتم اكتشاف أي واجهات برمجة تطبيقات ديناميكية أو جلب بيانات غير مخزنة. يغير هذا الخيار افتراضي طلبات `fetch` التي لا تعين خيار `cache` إلى `'no-store'` ولكن يترك طلبات `fetch` التي تختار `'force-cache'` أو تستخدم `revalidate` موجبًا كما هي.
- **`number`**: (بالثواني) تعيين تواتر إعادة التحقق الافتراضي للتخطيط أو الصفحة إلى `n` ثانية.

> **معلومة مفيدة**:
>
> - يجب أن تكون قيمة إعادة التحقق قابلة للتحليل الثابت. على سبيل المثال `revalidate = 600` صالحة، ولكن `revalidate = 60 * 10` غير صالحة.
> - قيمة إعادة التحقق غير متاحة عند استخدام `runtime = 'edge'`.
> - في وضع التطوير، يتم تصيير الصفحات دائمًا عند الطلب ولا يتم تخزينها مطلقًا. يتيح لك ذلك رؤية التغييرات على الفور دون انتظار انتهاء فترة إعادة التحقق.

#### تواتر إعادة التحقق

- سيحدد أقل قيمة `revalidate` عبر كل تخطيط وصفحة لمسار واحد تواتر إعادة التحقق للمسار بأكمله. يضمن ذلك إعادة تحقق الصفحات الفرعية بنفس تواتر التخطيطات الأصلية.
- يمكن لطلبات `fetch` الفردية تعيين قيمة `revalidate` أقل من الافتراضي للمسار لزيادة تواتر إعادة التحقق للمسار بأكمله. يتيح لك ذلك اختيار إعادة التحقق الأكثر تواترًا ديناميكيًا لمسارات معينة بناءً على بعض المعايير.

### `fetchCache`

<details>
  <summary>هذا خيار متقدم يجب استخدامه فقط إذا كنت بحاجة إلى تجاوز السلوك الافتراضي.</summary>

بشكل افتراضي، سيقوم Next.js **بتخزين** أي طلبات `fetch()` يمكن الوصول إليها **قبل** استخدام أي [واجهات برمجة التطبيقات الديناميكية](/docs/app/getting-started/partial-prerendering#dynamic-rendering#dynamic-apis) ولن يقوم **بتخزين** طلبات `fetch` التي يتم اكتشافها **بعد** استخدام واجهات برمجة التطبيقات الديناميكية.

يسمح لك `fetchCache` بتجاوز خيار `cache` الافتراضي لجميع طلبات `fetch` في التخطيط أو الصفحة.

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const fetchCache = 'auto'
// 'auto' | 'default-cache' | 'only-cache'
// 'force-cache' | 'force-no-store' | 'default-no-store' | 'only-no-store'
```

```js filename="layout.js | page.js | route.js" switcher
export const fetchCache = 'auto'
// 'auto' | 'default-cache' | 'only-cache'
// 'force-cache' | 'force-no-store' | 'default-no-store' | 'only-no-store'
```

- **`'auto'`** (الافتراضي): الخيار الافتراضي لتخزين طلبات `fetch` قبل واجهات برمجة التطبيقات الديناميكية مع خيار `cache` الذي توفره وعدم تخزين طلبات `fetch` بعد واجهات برمجة التطبيقات الديناميكية.
- **`'default-cache'`**: السماح بأي خيار `cache` يتم تمريره إلى `fetch` ولكن إذا لم يتم توفير خيار، فسيتم تعيين خيار `cache` إلى `'force-cache'`. يعني ذلك أن طلبات `fetch` بعد واجهات برمجة التطبيقات الديناميكية تعتبر ثابتة.
- **`'only-cache'`**: التأكد من أن جميع طلبات `fetch` تختار التخزين عن طريق تغيير الافتراضي إلى `cache: 'force-cache'` إذا لم يتم توفير خيار والتسبب في خطأ إذا استخدمت أي طلبات `fetch` `cache: 'no-store'`.
- **`'force-cache'`**: التأكد من أن جميع طلبات `fetch` تختار التخزين عن طريق تعيين خيار `cache` لجميع طلبات `fetch` إلى `'force-cache'`.
- **`'default-no-store'`**: السماح بأي خيار `cache` يتم تمريره إلى `fetch` ولكن إذا لم يتم توفير خيار، فسيتم تعيين خيار `cache` إلى `'no-store'`. يعني ذلك أن طلبات `fetch` قبل واجهات برمجة التطبيقات الديناميكية تعتبر ديناميكية.
- **`'only-no-store'`**: التأكد من أن جميع طلبات `fetch` تختار عدم التخزين عن طريق تغيير الافتراضي إلى `cache: 'no-store'` إذا لم يتم توفير خيار والتسبب في خطأ إذا استخدمت أي طلبات `fetch` `cache: 'force-cache'`
- **`'force-no-store'`**: التأكد من أن جميع طلبات `fetch` تختار عدم التخزين عن طريق تعيين خيار `cache` لجميع طلبات `fetch` إلى `'no-store'`. يجبر ذلك جميع طلبات `fetch` على إعادة الجلب في كل طلب حتى إذا قدمت خيار `'force-cache'`.

#### سلوك المقطع عبر المسار

- يجب أن تكون أي خيارات معينة عبر كل تخطيط وصفحة لمسار واحد متوافقة مع بعضها البعض.
  - إذا تم توفير كل من `'only-cache'` و `'force-cache'`، فإن `'force-cache'` يفوز. إذا تم توفير كل من `'only-no-store'` و `'force-no-store'`، فإن `'force-no-store'` يفوز. يغير الخيار القسري السلوك عبر المسار بحيث يمنع مقطع واحد مع `'force-*'` أي أخطاء ناتجة عن `'only-*'`.
  - الهدف من خيارات `'only-*'` و `'force-*'` هو ضمان أن المسار بأكمله إما ثابت بالكامل أو ديناميكي بالكامل. يعني ذلك:
    - لا يُسمح بجمع `'only-cache'` و `'only-no-store'` في مسار واحد.
    - لا يُسمح بجمع `'force-cache'` و `'force-no-store'` في مسار واحد.
  - لا يمكن للوالد توفير `'default-no-store'` إذا كان الابن يوفر `'auto'` أو `'*-cache'` لأن ذلك قد يجعل نفس طلب `fetch` له سلوك مختلف.
- يُوصى عمومًا بترك التخطيطات الأصلية المشتركة كـ `'auto'` وتخصيص الخيارات حيث تختلف المقاطع الفرعية.

</details>

### `runtime`

نوصي باستخدام وقت تشغيل Node.js لتصيير تطبيقك، ووقت تشغيل Edge للبرمجيات الوسيطة.

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const runtime = 'nodejs'
// 'nodejs' | 'edge'
```

```js filename="layout.js | page.js | route.js" switcher
export const runtime = 'nodejs'
// 'nodejs' | 'edge'
```

- **`'nodejs'`** (الافتراضي)
- **`'edge'`**

### `preferredRegion`

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const preferredRegion = 'auto'
// 'auto' | 'global' | 'home' | ['iad1', 'sfo1']
```

```js filename="layout.js | page.js | route.js" switcher
export const preferredRegion = 'auto'
// 'auto' | 'global' | 'home' | ['iad1', 'sfo1']
```

يعتمد دعم `preferredRegion` والمناطق المدعومة على منصة النشر الخاصة بك.

> **معلومة مفيدة**:
>
> - إذا لم يتم تحديد `preferredRegion`، فسوف يرث الخيار من أقرب تخطيط أصل.
> - التخطيط الجذري افتراضيًا لجميع المناطق.

### `maxDuration`

بشكل افتراضي، لا يحد Next.js من تنفيذ المنطق من جانب الخادم (تصيير صفحة أو معالجة واجهة برمجة التطبيقات).
يمكن لمنصات النشر استخدام `maxDuration` من إخراج بناء Next.js لإضافة حدود تنفيذ محددة.

**ملاحظة**: يتطلب هذا الإعداد Next.js `13.4.10` أو أعلى.

```tsx filename="layout.tsx | page.tsx | route.ts" switcher
export const maxDuration = 5
```

```js filename="layout.js | page.js | route.js" switcher
export const maxDuration = 5
```

> **معلومة مفيدة**:
>
> - إذا كنت تستخدم [إجراءات الخادم (Server Actions)](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)، فقم بتعيين `maxDuration` على مستوى الصفحة لتغيير المهلة الافتراضية لجميع إجراءات الخادم المستخدمة في الصفحة.

### `generateStaticParams`

يمكن استخدام الدالة `generateStaticParams` بالاشتراك مع [مقاطع المسار الديناميكية](/docs/app/api-reference/file-conventions/dynamic-routes) لتحديد قائمة معلمات مقطع المسار التي سيتم إنشاؤها ثابتًا في وقت البناء بدلاً من عند الطلب في وقت الطلب.

راجع [مرجع واجهة برمجة التطبيقات](/docs/app/api-reference/functions/generate-static-params) لمزيد من التفاصيل.

## سجل الإصدارات

| الإصدار      |                                                                                                                                                                                                                |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `v15.0.0-RC` | تم إيقاف استخدام `export const runtime = "experimental-edge"`. يتوفر [أداة تحويل الشفرات (codemod)](/docs/app/guides/upgrading/codemods#transform-app-router-route-segment-config-runtime-value-from-experimental-edge-to-edge). |