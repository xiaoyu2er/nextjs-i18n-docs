---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-06T18:07:11.734Z
title: <Image>
description: تحسين الصور في تطبيق Next.js الخاص بك باستخدام مكون `next/image` المدمج.
---

{/* المحتوى مشترك بين تطبيقات وموجهات الصفحات. يمكنك استخدام مكون `<PagesOnly>المحتوى</PagesOnly>` لإضافة محتوى خاص بموجه الصفحات. أي محتوى مشترك لا يجب أن يكون مغلفًا بمكون. */}

<details>
  <summary>أمثلة</summary>

- [مكون الصورة](https://github.com/vercel/next.js/tree/canary/examples/image-component)

</details>

<PagesOnly>

> **معلومة مفيدة**: إذا كنت تستخدم إصدارًا من Next.js قبل الإصدار 13، فستحتاج إلى استخدام وثائق [next/legacy/image](/docs/pages/api-reference/components/image-legacy) حيث تم تغيير اسم المكون.

</PagesOnly>

سيساعدك مرجع API هذا على فهم كيفية استخدام [الخصائص (props)](#props) وخيارات [التكوين](#configuration-options) المتاحة لمكون الصورة. لميزات الاستخدام، يرجى زيارة صفحة [مكون الصورة](/docs/app/building-your-application/optimizing/images).

```jsx filename="app/page.js"
import Image from 'next/image'

export default function Page() {
  return (
    <Image
      src="/profile.png"
      width={500}
      height={500}
      alt="صورة المؤلف"
    />
  )
}
```

## الخصائص (Props)

فيما يلي ملخص للخصائص المتاحة لمكون الصورة:

<div style={{ overflowX: 'auto', width: '100%' }}>
| الخاصية                                      | مثال                              | النوع            | مطلوب |
| ----------------------------------------- | ------------------------------------ | --------------- | -------- |
| [`src`](#src)                             | `src="/profile.png"`                 | سلسلة نصية          | نعم      |
| [`width`](#width)                         | `width={500}`                        | عدد صحيح (بكسل)    | نعم      |
| [`height`](#height)                       | `height={500}`                       | عدد صحيح (بكسل)    | نعم      |
| [`alt`](#alt)                             | `alt="صورة المؤلف"`        | سلسلة نصية          | نعم      |
| [`loader`](#loader)                       | `loader={imageLoader}`               | دالة        | -        |
| [`fill`](#fill)                           | `fill={true}`                        | قيمة منطقية         | -        |
| [`sizes`](#sizes)                         | `sizes="(max-width: 768px) 100vw"`   | سلسلة نصية          | -        |
| [`quality`](#quality)                     | `quality={80}`                       | عدد صحيح (1-100) | -        |
| [`priority`](#priority)                   | `priority={true}`                    | قيمة منطقية         | -        |
| [`placeholder`](#placeholder)             | `placeholder="blur"`                 | سلسلة نصية          | -        |
| [`style`](#style)                         | `style={{objectFit: "contain"}}`     | كائن          | -        |
| [`onLoadingComplete`](#onloadingcomplete) | `onLoadingComplete={img => done())}` | دالة        | -        |
| [`onLoad`](#onload)                       | `onLoad={event => done())}`          | دالة        | -        |
| [`onError`](#onerror)                     | `onError(event => fail()}`           | دالة        | -        |
| [`loading`](#loading)                     | `loading="lazy"`                     | سلسلة نصية          | -        |
| [`blurDataURL`](#blurdataurl)             | `blurDataURL="data:image/jpeg..."`   | سلسلة نصية          | -        |
</div>

## الخصائص المطلوبة

يتطلب مكون الصورة الخصائص التالية: `src`، `width`، `height`، و `alt`.

```jsx filename="app/page.js"
import Image from 'next/image'

export default function Page() {
  return (
    <div>
      <Image
        src="/profile.png"
        width={500}
        height={500}
        alt="صورة المؤلف"
      />
    </div>
  )
}
```

### `src`

يجب أن يكون أحد الخيارات التالية:

- ملف صورة [مستورد بشكل ثابت](/docs/app/building-your-application/optimizing/images#local-images)
- مسار نصي. يمكن أن يكون هذا عنوان URL خارجي مطلق، أو مسار داخلي اعتمادًا على خاصية [المحمل (loader)](#loader).

عند استخدام عنوان URL خارجي، يجب إضافته إلى [remotePatterns](#remotepatterns) في ملف `next.config.js`.

### `width`

تمثل خاصية `width` العرض _المعروض_ بالبكسل، لذا ستؤثر على حجم الصورة الظاهر.

مطلوبة، باستثناء الصور [المستوردة بشكل ثابت](/docs/app/building-your-application/optimizing/images#local-images) أو الصور ذات خاصية [`fill`](#fill).

### `height`

تمثل خاصية `height` الارتفاع _المعروض_ بالبكسل، لذا ستؤثر على حجم الصورة الظاهر.

مطلوبة، باستثناء الصور [المستوردة بشكل ثابت](/docs/app/building-your-application/optimizing/images#local-images) أو الصور ذات خاصية [`fill`](#fill).

### `alt`

تستخدم خاصية `alt` لوصف الصورة لبرامج قراءة الشاشة ومحركات البحث. وهي أيضًا النص الاحتياطي إذا تم تعطيل الصور أو حدث خطأ أثناء تحميل الصورة.

يجب أن يحتوي على نص يمكن أن يحل محل الصورة [دون تغيير معنى الصفحة](https://html.spec.whatwg.org/multipage/images.html#general-guidelines). ليس المقصود منه استكمال الصورة ولا يجب أن يكرر المعلومات المقدمة بالفعل في التسميات التوضيحية أعلى أو أسفل الصورة.

إذا كانت الصورة [زخرفية بحتة](https://html.spec.whatwg.org/multipage/images.html#a-purely-decorative-image-that-doesn't-add-any-information) أو [غير مخصصة للمستخدم](https://html.spec.whatwg.org/multipage/images.html#an-image-not-intended-for-the-user)، فيجب أن تكون خاصية `alt` سلسلة نصية فارغة (`alt=""`).

[تعلم المزيد](https://html.spec.whatwg.org/multipage/images.html#alt)

## الخصائص الاختيارية

يقبل مكون `<Image />` عددًا من الخصائص الإضافية بخلاف تلك المطلوبة. يصف هذا القسم الخصائص الأكثر استخدامًا لمكون الصورة. يمكن العثور على تفاصيل حول الخصائص الأقل استخدامًا في قسم [الخصائص المتقدمة](#advanced-props).

### `loader`

دالة مخصصة تستخدم لحل عناوين URL للصور.

`loader` هي دالة تُرجع سلسلة نصية لعنوان URL للصورة، مع الأخذ في الاعتبار المعلمات التالية:

- [`src`](#src)
- [`width`](#width)
- [`quality`](#quality)

فيما يلي مثال لاستخدام محمل مخصص:

```js
'use client'

import Image from 'next/image'

const imageLoader = ({ src, width, quality }) => {
  return `https://example.com/${src}?w=${width}&q=${quality || 75}`
}

export default function Page() {
  return (
    <Image
      loader={imageLoader}
      src="me.png"
      alt="صورة المؤلف"
      width={500}
      height={500}
    />
  )
}
```

<AppOnly>

> **معلومة مفيدة**: استخدام خصائص مثل `loader`، التي تقبل دالة، يتطلب استخدام [مكونات العميل (Client Components)](/docs/app/building-your-application/rendering/client-components) لتحويل الدالة المقدمة.

</AppOnly>

بدلاً من ذلك، يمكنك استخدام تكوين [loaderFile](#loaderfile) في ملف `next.config.js` لتكوين كل مثيل لـ `next/image` في تطبيقك، دون تمرير خاصية.

### `fill`

```js
fill={true} // {true} | {false}
```

قيمة منطقية تجعل الصورة تملأ العنصر الأصل، وهو مفيد عندما يكون [`width`](#width) و [`height`](#height) غير معروفين.

يجب أن يخصص العنصر الأصل نمط `position: "relative"` أو `position: "fixed"` أو `position: "absolute"`.

بشكل افتراضي، سيتم تخصيص نمط `position: "absolute"` لعنصر img تلقائيًا.

إذا لم يتم تطبيق أي أنماط على الصورة، فستتمدد الصورة لملء الحاوية. قد تفضل تعيين `object-fit: "contain"` للصورة التي يتم ضبطها لملء الحاوية مع الحفاظ على نسبة العرض إلى الارتفاع.

بدلاً من ذلك، سيؤدي `object-fit: "cover"` إلى ملء الصورة للحاوية بالكامل واقتصاصها للحفاظ على نسبة العرض إلى الارتفاع. لكي يبدو هذا صحيحًا، يجب تعيين نمط `overflow: "hidden"` للعنصر الأصل.

لمزيد من المعلومات، انظر أيضًا:

- [`position`](https://developer.mozilla.org/docs/Web/CSS/position)
- [`object-fit`](https://developer.mozilla.org/docs/Web/CSS/object-fit)
- [`object-position`](https://developer.mozilla.org/docs/Web/CSS/object-position)

### `sizes`

سلسلة نصية، تشبه استعلام الوسائط، توفر معلومات حول عرض الصورة عند نقاط التوقف المختلفة. ستؤثر قيمة `sizes` بشكل كبير على أداء الصور التي تستخدم [`fill`](#fill) أو التي [تم تصميمها بحجم متجاوب](#responsive-images).

تخدم خاصية `sizes` غرضين مهمين متعلقين بأداء الصورة:

- أولاً، تستخدم المتصفحات قيمة `sizes` لتحديد حجم الصورة الذي يجب تنزيله، من `srcset` الذي تم إنشاؤه تلقائيًا بواسطة `next/image`. عندما يختار المتصفح، لا يعرف بعد حجم الصورة على الصفحة، لذا يختار صورة بنفس حجم أو أكبر من نافذة العرض. تتيح لك خاصية `sizes` إخبار المتصفح بأن الصورة ستكون في الواقع أصغر من عرض الشاشة بالكامل. إذا لم تحدد قيمة `sizes` في صورة ذات خاصية `fill`، فسيتم استخدام القيمة الافتراضية `100vw` (عرض الشاشة بالكامل).
- ثانيًا، تغير خاصية `sizes` سلوك قيمة `srcset` التي تم إنشاؤها تلقائيًا. إذا لم تكن هناك قيمة `sizes` موجودة، يتم إنشاء `srcset` صغير مناسب لصورة بحجم ثابت (1x/2x/إلخ). إذا تم تعريف `sizes`، يتم إنشاء `srcset` كبير مناسب لصورة متجاوبة (640w/750w/إلخ). إذا كانت خاصية `sizes` تتضمن أحجامًا مثل `50vw`، التي تمثل نسبة مئوية من عرض نافذة العرض، فسيتم تقليم `srcset` لاستبعاد أي قيم صغيرة جدًا بحيث لا تكون ضرورية أبدًا.

على سبيل المثال، إذا كنت تعلم أن تصميمك سيجعل الصورة بعرض كامل على الأجهزة المحمولة، وتخطيط من عمودين على الأجهزة اللوحية، وتخطيط من ثلاثة أعمدة على شاشات سطح المكتب، فيجب عليك تضمين خاصية sizes مثل التالي:

```jsx
import Image from 'next/image'

export default function Page() {
  return (
    <div className="grid-element">
      <Image
        fill
        src="/example.png"
        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
      />
    </div>
  )
}
```

يمكن أن يكون لهذا المثال من `sizes` تأثير كبير على مقاييس الأداء. بدون `sizes` بقيمة `33vw`، ستكون الصورة المختارة من الخادم أوسع بثلاث مرات مما يجب أن تكون. نظرًا لأن حجم الملف يتناسب مع مربع العرض، فبدون `sizes`، سيقوم المستخدم بتنزيل صورة أكبر بتسع مرات مما هو ضروري.

تعلم المزيد عن `srcset` و `sizes`:

- [web.dev](https://web.dev/learn/design/responsive-images/#sizes)
- [mdn](https://developer.mozilla.org/docs/Web/HTML/Element/img#attr-sizes)

### `quality`

```js
quality={75} // {number 1-100}
```

جودة الصورة المحسنة، عدد صحيح بين `1` و `100`، حيث `100` هي أفضل جودة وبالتالي أكبر حجم ملف. القيمة الافتراضية هي `75`.

### `priority`

```js
priority={false} // {false} | {true}
```

عندما تكون القيمة `true`، ستعتبر الصورة ذات أولوية عالية وسيتم [تحميلها مسبقًا](https://web.dev/preload-responsive-images/). يتم تعطيل التحميل البطيء تلقائيًا للصور التي تستخدم `priority`.

يجب استخدام خاصية `priority` على أي صورة تم اكتشافها كعنصر [أكبر محتوى مرئي (LCP)](https://nextjs.org/learn/seo/web-performance/lcp). قد يكون من المناسب وجود عدة صور ذات أولوية، حيث يمكن أن تكون صور مختلفة هي عنصر LCP لأحجام نافذة عرض مختلفة.

يجب استخدامها فقط عندما تكون الصورة مرئية فوق الطية. القيمة الافتراضية هي `false`.

### `placeholder`

```js
placeholder = 'empty' // "empty" | "blur" | "data:image/..."
```

عنصر نائب لاستخدامه أثناء تحميل الصورة. القيم الممكنة هي `blur`، `empty`، أو `data:image/...`. القيمة الافتراضية هي `empty`.

عند `blur`، سيتم استخدام خاصية [`blurDataURL`](#blurdataurl) كعنصر نائب. إذا كان `src` كائنًا من [استيراد ثابت](/docs/app/building-your-application/optimizing/images#local-images) وكانت الصورة المستوردة بصيغة `.jpg`، أو `.png`، أو `.webp`، أو `.avif`، فسيتم ملء `blurDataURL` تلقائيًا، إلا إذا تم اكتشاف أن الصورة متحركة.

للصور الديناميكية، يجب توفير خاصية [`blurDataURL`](#blurdataurl). يمكن أن تساعد حلول مثل [Plaiceholder](https://github.com/joe-bell/plaiceholder) في إنشاء `base64`.

عند `data:image/...`، سيتم استخدام [عنوان URL للبيانات (Data URL)](https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) كعنصر نائب أثناء تحميل الصورة.

عند `empty`، لن يكون هناك عنصر نائب أثناء تحميل الصورة، فقط مساحة فارغة.

جربها:

- [عرض تجريبي لعنصر النائب `blur`](https://image-component.nextjs.gallery/placeholder)
- [عرض تجريبي لتأثير الوميض مع خاصية `placeholder` لعنوان URL للبيانات](https://image-component.nextjs.gallery/shimmer)
- [عرض تجريبي لتأثير اللون مع خاصية `blurDataURL`](https://image-component.nextjs.gallery/color)

## الخصائص المتقدمة

في بعض الحالات، قد تحتاج إلى استخدام أكثر تقدمًا. يقبل مكون `<Image />` الخصائص المتقدمة التالية اختياريًا.

### `style`

يسمح بتمرير أنماط CSS إلى عنصر الصورة الأساسي.

```jsx filename="components/ProfileImage.js"
const imageStyle = {
  borderRadius: '50%',
  border: '1px solid #fff',
}

export default function ProfileImage() {
  return <Image src="..." style={imageStyle} />
}
```

تذكر أن خصائص العرض والارتفاع المطلوبة يمكن أن تتفاعل مع التصميم الخاص بك. إذا استخدمت التصميم لتعديل عرض الصورة، فيجب أيضًا تصميم ارتفاعها على `auto` للحفاظ على نسبة العرض إلى الارتفاع الأصلية، وإلا سيتم تشويه الصورة.

### `onLoadingComplete`

```jsx
'use client'

<Image onLoadingComplete={(img) => console.log(img.naturalWidth)} />
```

دالة رد اتصال يتم استدعاؤها بمجرد تحميل الصورة بالكامل وإزالة [العنصر النائب (placeholder)](#placeholder).

سيتم استدعاء دالة الرد بوسيطة واحدة، وهي مرجع لعنصر `<img>` الأساسي.

<AppOnly>

> **معلومة مفيدة**: استخدام خصائص مثل `onLoadingComplete`، التي تقبل دالة، يتطلب استخدام [مكونات العميل (Client Components)](/docs/app/building-your-application/rendering/client-components) لتحويل الدالة المقدمة.

</AppOnly>

### `onLoad`

```jsx
<Image onLoad={(e) => console.log(e.target.naturalWidth)} />
```

دالة رد اتصال يتم استدعاؤها عند تحميل الصورة.

قد يحدث حدث التحميل قبل إزالة العنصر النائب للصورة وفك تشفير الصورة بالكامل. إذا كنت تريد الانتظار حتى يتم تحميل الصورة بالكامل، فاستخدم [`onLoadingComplete`](#onloadingcomplete) بدلاً من ذلك.

<AppOnly>

> **معلومة مفيدة**: استخدام خصائص مثل `onLoad`، التي تقبل دالة، يتطلب استخدام [مكونات العميل (Client Components)](/docs/app/building-your-application/rendering/client-components) لتحويل الدالة المقدمة.

</AppOnly>

### `onError`

```jsx
<Image onError={(e) => console.error(e.target.id)} />
```

دالة رد اتصال يتم استدعاؤها إذا فشل تحميل الصورة.

<AppOnly>

> **معلومة مفيدة**: استخدام خصائص مثل `onError`، التي تقبل دالة، يتطلب استخدام [مكونات العميل (Client Components)](/docs/app/building-your-application/rendering/client-components) لتحويل الدالة المقدمة.

</AppOnly>

### `loading`

> **توصية**: هذه الخاصية مخصصة فقط لحالات الاستخدام المتقدمة. تحويل صورة للتحميل بـ `eager` عادةً ما **يضر بالأداء**. نوصي باستخدام خاصية [`priority`](#priority) بدلاً من ذلك، والتي ستحمل الصورة مسبقًا بفارغ الصبر.

```js
loading = 'lazy' // {lazy} | {eager}
```

سلوك تحميل الصورة. القيمة الافتراضية هي `lazy`.

عند `lazy`، يتم تأجيل تحميل الصورة حتى تصل إلى مسافة محسوبة من نافذة العرض.

عند `eager`، يتم تحميل الصورة على الفور.

تعلم المزيد عن [خاصية `loading`](https://developer.mozilla.org/docs/Web/HTML/Element/img#attr-loading).

### `blurDataURL`

[رابط البيانات (Data URL)](https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) ليتم استخدامه كصورة نائبة قبل تحميل صورة `src` بنجاح. يكون فعالاً فقط عند دمجه مع [`placeholder="blur"`](#placeholder).

يجب أن تكون الصورة مشفرة بـ base64. سيتم تكبيرها وطمسها، لذا يُنصح باستخدام صورة صغيرة جدًا (10 بكسل أو أقل). قد يؤدي تضمين صور أكبر كعناصر نائبة إلى الإضرار بأداء تطبيقك.

جربها:

- [عرض خاصية `blurDataURL` الافتراضية](https://image-component.nextjs.gallery/placeholder)
- [عرض تأثير اللون مع خاصية `blurDataURL`](https://image-component.nextjs.gallery/color)

يمكنك أيضًا [إنشاء رابط بيانات بلون ثابت](https://png-pixel.com) لتتناسب مع الصورة.

### `unoptimized`

```js
unoptimized = {false} // {false} | {true}
```

عندما يكون `true`، سيتم تقديم الصورة المصدر كما هي دون تغيير الجودة، الحجم، أو التنسيق. القيمة الافتراضية هي `false`.

```js
import Image from 'next/image'

const UnoptimizedImage = (props) => {
  return <Image {...props} unoptimized />
}
```

بدءًا من Next.js 12.3.0، يمكن تعيين هذه الخاصية لجميع الصور عن طريق تحديث `next.config.js` بالإعداد التالي:

```js filename="next.config.js"
module.exports = {
  images: {
    unoptimized: true,
  },
}
```

### الخصائص الأخرى

سيتم تمرير الخصائص الأخرى في مكون `<Image />` إلى عنصر `img` الأساسي باستثناء ما يلي:

- `srcSet`. استخدم [أحجام الجهاز (Device Sizes)](#devicesizes) بدلاً من ذلك.
- `decoding`. تكون دائمًا `"async"`.

## خيارات التكوين

بالإضافة إلى الخصائص، يمكنك تكوين مكون الصورة في `next.config.js`. الخيارات المتاحة هي:

### `remotePatterns`

لحماية تطبيقك من المستخدمين الضارين، يلزم التكوين لاستخدام الصور الخارجية. هذا يضمن أن الصور الخارجية من حسابك فقط يمكن تقديمها من واجهة برمجة تطبيقات تحسين الصور في Next.js. يمكن تكوين هذه الصور الخارجية باستخدام خاصية `remotePatterns` في ملف `next.config.js`، كما هو موضح أدناه:

```js filename="next.config.js"
module.exports = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'example.com',
        port: '',
        pathname: '/account123/**',
      },
    ],
  },
}
```

> **معلومة جيدة**: المثال أعلاه يضمن أن خاصية `src` في `next/image` يجب أن تبدأ بـ `https://example.com/account123/`. أي بروتوكول آخر، أو اسم مضيف، أو منفذ، أو مسار غير متطابق سيؤدي إلى رد بـ 400 Bad Request.

إليك مثال آخر لخاصية `remotePatterns` في ملف `next.config.js`:

```js filename="next.config.js"
module.exports = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: '**.example.com',
      },
    ],
  },
}
```

> **معلومة جيدة**: المثال أعلاه يضمن أن خاصية `src` في `next/image` يجب أن تبدأ بـ `https://img1.example.com` أو `https://me.avatar.example.com` أو أي عدد من النطاقات الفرعية. أي بروتوكول آخر أو اسم مضيف غير متطابق سيؤدي إلى رد بـ 400 Bad Request.

يمكن استخدام أنماط الأحرف البدلة (wildcard) لكل من `pathname` و `hostname` ولها الصيغة التالية:

- `*` تطابق مقطع مسار واحد أو نطاق فرعي
- `**` تطابق أي عدد من مقاطع المسار في النهاية أو النطاقات الفرعية في البداية

لا تعمل صيغة `**` في منتصف النمط.

### `domains`

> **تحذير**: نوصي بتكوين [`remotePatterns`](#remotepatterns) بدقة بدلاً من `domains` لحماية تطبيقك من المستخدمين الضارين. استخدم `domains` فقط إذا كنت تملك كل المحتوى المقدم من النطاق.

على غرار [`remotePatterns`](#remotepatterns)، يمكن استخدام تكوين `domains` لتوفير قائمة بأسماء المضيفين المسموح بها للصور الخارجية.

ومع ذلك، لا يدعم تكوين `domains` مطابقة أنماط الأحرف البدلة ولا يمكنه تقييد البروتوكول، المنفذ، أو مسار الملف.

إليك مثال لخاصية `domains` في ملف `next.config.js`:

```js filename="next.config.js"
module.exports = {
  images: {
    domains: ['assets.acme.com'],
  },
}
```

### `loaderFile`

إذا كنت ترغب في استخدام موفر سحابي لتحسين الصور بدلاً من استخدام واجهة برمجة تطبيقات تحسين الصور المدمجة في Next.js، يمكنك تكوين `loaderFile` في `next.config.js` كما يلي:

```js filename="next.config.js"
module.exports = {
  images: {
    loader: 'custom',
    loaderFile: './my/image/loader.js',
  },
}
```

يجب أن يشير هذا إلى ملف نسبي إلى جذر تطبيق Next.js الخاص بك. يجب أن يصدر الملف دالة افتراضية تُرجع سلسلة نصية، على سبيل المثال:

```js
'use client'

export default function myImageLoader({ src, width, quality }) {
  return `https://example.com/${src}?w=${width}&q=${quality || 75}`
}
```

بدلاً من ذلك، يمكنك استخدام [خاصية `loader`](#loader) لتكوين كل مثيل من `next/image`.

أمثلة:

- [تكوين محمل الصور المخصص](/docs/app/api-reference/next-config-js/images#example-loader-configuration)

<AppOnly>

> **معلومة جيدة**: يتطلب تخصيص ملف محمل الصور، الذي يقبل دالة، استخدام [مكونات العميل (Client Components)](/docs/app/building-your-application/rendering/client-components) لتحويل الدالة المقدمة إلى تنسيق قابل للتخزين.

</AppOnly>

## متقدم

التكوين التالي مخصص لحالات الاستخدام المتقدمة وعادةً لا يكون ضروريًا. إذا اخترت تكوين الخصائص أدناه، فستتجاوز أي تغييرات على الإعدادات الافتراضية لـ Next.js في التحديثات المستقبلية.

### `deviceSizes`

إذا كنت تعرف عرض الأجهزة المتوقع لمستخدميك، يمكنك تحديد قائمة بنقاط التوقف لعرض الجهاز باستخدام خاصية `deviceSizes` في `next.config.js`. تُستخدم هذه الأبعاد عندما يستخدم مكون `next/image` خاصية [`sizes`](#sizes) لضمان تقديم الصورة الصحيحة لجهاز المستخدم.

إذا لم يتم توفير أي تكوين، يتم استخدام الإعداد الافتراضي أدناه.

```js filename="next.config.js"
module.exports = {
  images: {
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
  },
}
```

### `imageSizes`

يمكنك تحديد قائمة بعروض الصور باستخدام خاصية `images.imageSizes` في ملف `next.config.js` الخاص بك. يتم دمج هذه الأبعاد مع مصفوفة [أحجام الجهاز (deviceSizes)](#devicesizes) لتشكيل المصفوفة الكاملة للأحجام المستخدمة لإنشاء [srcset](https://developer.mozilla.org/docs/Web/API/HTMLImageElement/srcset) للصور.

السبب في وجود قائمتين منفصلتين هو أن `imageSizes` تُستخدم فقط للصور التي توفر خاصية [`sizes`](#sizes)، مما يشير إلى أن الصورة أصغر من العرض الكامل للشاشة. **لذلك، يجب أن تكون جميع الأحجام في `imageSizes` أصغر من أصغر حجم في `deviceSizes`.**

إذا لم يتم توفير أي تكوين، يتم استخدام الإعداد الافتراضي أدناه.

```js filename="next.config.js"
module.exports = {
  images: {
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  },
}
```

### `formats`

ستكتشف [واجهة برمجة تطبيقات تحسين الصور (Image Optimization API)](#loader) الافتراضية تلقائيًا تنسيقات الصور المدعومة من المتصفح عبر رأس `Accept` للطلب.

إذا كان رأس `Accept` يتطابق مع أكثر من تنسيق واحد من التنسيقات المكونة، يتم استخدام أول تطابق في المصفوفة. لذلك، ترتيب المصفوفة مهم. إذا لم يكن هناك تطابق (أو إذا كانت الصورة المصدر [متحركة (animated)](#animated-images))، ستعود واجهة برمجة تطبيقات تحسين الصور إلى تنسيق الصورة الأصلي.

إذا لم يتم توفير أي تكوين، يتم استخدام الإعداد الافتراضي أدناه.

```js filename="next.config.js"
module.exports = {
  images: {
    formats: ['image/webp'],
  },
}
```

يمكنك تمكين دعم AVIF مع التكوين التالي.

```js filename="next.config.js"
module.exports = {
  images: {
    formats: ['image/avif', 'image/webp'],
  },
}
```

> **معلومة جيدة**:
>
> - عادةً ما يستغرق ترميز AVIF وقتًا أطول بنسبة 20٪ ولكنه يضغط بنسبة 20٪ أصغر مقارنة بـ WebP. هذا يعني أن المرة الأولى التي يتم فيها طلب الصورة، ستكون عادةً أبطأ ثم الطلبات اللاحقة التي يتم تخزينها مؤقتًا ستكون أسرع.
> - إذا كنت تستضيف بنفسك مع وكيل/شبكة توصيل محتوى (Proxy/CDN) أمام Next.js، يجب تكوين الوكيل لإعادة توجيه رأس `Accept`.

## سلوك التخزين المؤقت

يصف ما يلي خوارزمية التخزين المؤقت لـ [المحمل (loader)](#loader) الافتراضي. بالنسبة لجميع المحملات الأخرى، يرجى الرجوع إلى وثائق موفر السحابة الخاص بك.

يتم تحسين الصور ديناميكيًا عند الطلب وتخزينها في دليل `<distDir>/cache/images`. سيتم تقديم ملف الصورة المحسن للطلبات اللاحقة حتى يتم الوصول إلى تاريخ الانتهاء. عند إجراء طلب يتطابق مع ملف مخزن مؤقتًا ولكنه منتهي الصلاحية، يتم تقديم الصورة المنتهية الصلاحية على الفور. ثم يتم تحسين الصورة مرة أخرى في الخلفية (يُسمى أيضًا إعادة التحقق) وحفظها في ذاكرة التخزين المؤقت مع تاريخ انتهاء جديد.

يمكن تحديد حالة التخزين المؤقت للصورة عن طريق قراءة قيمة رأس الاستجابة `x-nextjs-cache`. القيم الممكنة هي كما يلي:

- `MISS` - المسار غير موجود في ذاكرة التخزين المؤقت (يحدث مرة واحدة على الأكثر، في الزيارة الأولى)
- `STALE` - المسار موجود في ذاكرة التخزين المؤقت ولكنه تجاوز وقت إعادة التحقق لذلك سيتم تحديثه في الخلفية
- `HIT` - المسار موجود في ذاكرة التخزين المؤقت ولم يتجاوز وقت إعادة التحقق

يتم تعريف تاريخ الانتهاء (أو بالأحرى الحد الأقصى للعمر) إما عن طريق تكوين [`minimumCacheTTL`](#minimumcachettl) أو رأس `Cache-Control` للصورة الأصلية، أيهما أكبر. على وجه التحديد، يتم استخدام قيمة `max-age` لرأس `Cache-Control`. إذا تم العثور على كل من `s-maxage` و `max-age`، يتم تفضيل `s-maxage`. يتم أيضًا تمرير `max-age` إلى أي عملاء لاحقين بما في ذلك شبكات توصيل المحتوى (CDNs) والمتصفحات.

- يمكنك تكوين [`minimumCacheTTL`](#minimumcachettl) لزيادة مدة التخزين المؤقت عندما لا يتضمن رأس `Cache-Control` للصورة الأصلية أو كانت القيمة منخفضة جدًا.
- يمكنك تكوين [`deviceSizes`](#devicesizes) و [`imageSizes`](#imagesizes) لتقليل العدد الإجمالي للصور الممكن إنشاؤها.
- يمكنك تكوين [formats](#formats) لتعطيل تنسيقات متعددة لصالح تنسيق صورة واحد.

### `minimumCacheTTL`

يمكنك تكوين وقت البقاء (TTL) بالثواني للصور المحسنة المخزنة مؤقتًا. في كثير من الحالات، من الأفضل استخدام [استيراد صورة ثابتة (Static Image Import)](/docs/app/building-your-application/optimizing/images#local-images) والتي ستقوم تلقائيًا بتجزئة محتويات الملف وتخزين الصورة مؤقتًا إلى الأبد مع رأس `Cache-Control` بقيمة `immutable`.

```js filename="next.config.js"
module.exports = {
  images: {
    minimumCacheTTL: 60,
  },
}
```

يتم تعريف تاريخ انتهاء الصورة المحسنة (أو بالأحرى الحد الأقصى للعمر) إما عن طريق `minimumCacheTTL` أو رأس `Cache-Control` للصورة الأصلية، أيهما أكبر.

إذا كنت بحاجة إلى تغيير سلوك التخزين المؤقت لكل صورة، يمكنك تكوين [`headers`](/docs/app/api-reference/next-config-js/headers) لتعيين رأس `Cache-Control` على الصورة الأصلية (مثل `/some-asset.jpg`، وليس `/_next/image` نفسها).

لا توجد آلية لإبطال ذاكرة التخزين المؤقت في هذا الوقت، لذا من الأفضل الحفاظ على `minimumCacheTTL` منخفضًا. وإلا قد تحتاج إلى تغيير خاصية [`src`](#src) يدويًا أو حذف `<distDir>/cache/images`.

### `disableStaticImages`

يسمح السلوك الافتراضي باستيراد الملفات الثابتة مثل `import icon from './icon.png'` ثم تمريرها إلى خاصية `src`.

في بعض الحالات، قد ترغب في تعطيل هذه الميزة إذا كانت تتعارض مع الملحقات الأخرى التي تتوقع أن يكون الاستيراد مختلفًا.

يمكنك تعطيل استيراد الصور الثابتة داخل `next.config.js`:

```js filename="next.config.js"
module.exports = {
  images: {
    disableStaticImages: true,
  },
}
```

### `dangerouslyAllowSVG`

لا يقوم [المحمل (loader)](#loader) الافتراضي بتحسين صور SVG لعدة أسباب. أولاً، SVG هو تنسيق متجه مما يعني أنه يمكن تغيير حجمه دون فقدان الجودة. ثانيًا، يحتوي SVG على العديد من الميزات نفسها مثل HTML/CSS، مما قد يؤدي إلى ثغرات أمنية بدون [سياسة أمان محتوى (Content Security Policy)](/docs/app/building-your-application/configuring/content-security-policy) مناسبة.

إذا كنت بحاجة إلى تقديم صور SVG باستخدام واجهة برمجة تطبيقات تحسين الصور الافتراضية، يمكنك تعيين `dangerouslyAllowSVG` داخل `next.config.js`:

```js filename="next.config.js"
module.exports = {
  images: {
    dangerouslyAllowSVG: true,
    contentDispositionType: 'attachment',
    contentSecurityPolicy: "default-src 'self'; script-src 'none'; sandbox;",
  },
}
```

بالإضافة إلى ذلك، يُوصى بشدة أيضًا بتعيين `contentDispositionType` لإجبار المتصفح على تنزيل الصورة، وكذلك `contentSecurityPolicy` لمنع تنفيذ البرامج النصية المضمنة في الصورة.

## الصور المتحركة

سيقوم [المحمل (loader)](#loader) الافتراضي تلقائيًا بتجاوز تحسين الصور للصور المتحركة وتقديم الصورة كما هي.

الكشف التلقائي عن الملفات المتحركة هو أفضل جهد ويدعم GIF و APNG و WebP. إذا كنت ترغب في تجاوز تحسين الصور صراحةً لصورة متحركة معينة، استخدم خاصية [unoptimized](#unoptimized).

## الصور المتجاوبة

يحتوي `srcset` المُنشأ افتراضيًا على صور `1x` و `2x` لدعم نسب بكسل الجهاز المختلفة. ومع ذلك، قد ترغب في عرض صورة متجاوبة تتمدد مع نافذة العرض. في هذه الحالة، ستحتاج إلى تعيين [`sizes`](#sizes) بالإضافة إلى `style` (أو `className`).

يمكنك عرض صورة متجاوبة باستخدام إحدى الطرق التالية.

### صورة متجاوبة باستخدام استيراد ثابت

إذا لم تكن الصورة المصدر ديناميكية، يمكنك استيرادها بشكل ثابت لإنشاء صورة متجاوبة:

```jsx filename="components/author.js"
import Image from 'next/image'
import me from '../photos/me.jpg'

export default function Author() {
  return (
    <Image
      src={me}
      alt="Picture of the author"
      sizes="100vw"
      style={{
        width: '100%',
        height: 'auto',
      }}
    />
  )
}
```

جربها:

- [عرض الصورة المتجاوبة مع نافذة العرض](https://image-component.nextjs.gallery/responsive)

### صورة متجاوبة مع نسبة العرض إلى الارتفاع

إذا كانت الصورة المصدر ديناميكية أو عنوان URL بعيد، ستحتاج أيضًا إلى توفير `width` و `height` لتعيين نسبة العرض إلى الارتفاع الصحيحة للصورة المتجاوبة:

```jsx filename="components/page.js"
import Image from 'next/image'

export default function Page({ photoUrl }) {
  return (
    <Image
      src={photoUrl}
      alt="Picture of the author"
      sizes="100vw"
      style={{
        width: '100%',
        height: 'auto',
      }}
      width={500}
      height={300}
    />
  )
}
```

جربها:

- [عرض الصورة المتجاوبة مع نافذة العرض](https://image-component.nextjs.gallery/responsive)

### صورة متجاوبة مع `fill`

إذا كنت لا تعرف نسبة العرض إلى الارتفاع، ستحتاج إلى تعيين خاصية [`fill`](#fill) وتعيين `position: relative` على العنصر الأب. اختياريًا، يمكنك تعيين `object-fit` حسب سلوك التمدد أو الاقتصاص المطلوب:

```jsx filename="app/page.js"
import Image from 'next/image'

export default function Page({ photoUrl }) {
  return (
    <div style={{ position: 'relative', width: '500px', height: '300px' }}>
      <Image
        src={photoUrl}
        alt="Picture of the author"
        sizes="500px"
        fill
        style={{
          objectFit: 'contain',
        }}
      />
    </div>
  )
}
```

جربها:

- [عرض خاصية `fill`](https://image-component.nextjs.gallery/fill)

## اكتشاف السمة (Theme Detection)

إذا كنت تريد عرض صورة مختلفة لوضعي الضوء والظلام، يمكنك إنشاء مكون جديد يضم مكوني `<Image>` ويكشف الصورة الصحيحة بناءً على استعلام CSS الإعلامي.

```css filename="components/theme-image.module.css"
.imgDark {
  display: none;
}

@media (prefers-color-scheme: dark) {
  .imgLight {
    display: none;
  }
  .imgDark {
    display: unset;
  }
}
```

```tsx filename="components/theme-image.tsx" switcher
import styles from './theme-image.module.css'
import Image, { ImageProps } from 'next/image'

type Props = Omit<ImageProps, 'src' | 'priority' | 'loading'> & {
  srcLight: string
  srcDark: string
}

const ThemeImage = (props: Props) => {
  const { srcLight, srcDark, ...rest } = props

  return (
    <>
      <Image {...rest} src={srcLight} className={styles.imgLight} />
      <Image {...rest} src={srcDark} className={styles.imgDark} />
    </>
  )
}
```

```jsx filename="components/theme-image.js" switcher
import styles from './theme-image.module.css'
import Image from 'next/image'

const ThemeImage = (props) => {
  const { srcLight, srcDark, ...rest } = props

  return (
    <>
      <Image {...rest} src={srcLight} className={styles.imgLight} />
      <Image {...rest} src={srcDark} className={styles.imgDark} />
    </>
  )
}
```

> **جيد أن تعرف**: السلوك الافتراضي لـ `loading="lazy"` يضمن تحميل الصورة الصحيحة فقط. لا يمكنك استخدام `priority` أو `loading="eager"` لأن ذلك سيؤدي إلى تحميل كلا الصورتين. بدلاً من ذلك، يمكنك استخدام [`fetchPriority="high"`](https://developer.mozilla.org/docs/Web/API/HTMLImageElement/fetchPriority).

جربها بنفسك:

- [عرض توضيحي لاكتشاف سمة الضوء/الظلام](https://image-component.nextjs.gallery/theme)

## أخطاء متصفح معروفة (Known Browser Bugs)

يستخدم مكون `next/image` هذا [تحميل كسول (lazy loading)](https://caniuse.com/loading-lazy-attr) أصلي من المتصفح، والذي قد يعود إلى التحميل المتعطش (eager loading) للمتصفحات القديمة قبل Safari 15.4. عند استخدام عنصر نائب ضبابي (blur-up placeholder)، ستعود المتصفحات القديمة قبل Safari 12 إلى عنصر نائب فارغ. عند استخدام أنماط مع `width`/`height` بقيمة `auto`، من الممكن التسبب في [انزياح تخطيط (Layout Shift)](https://web.dev/cls/) على المتصفحات القديمة قبل Safari 15 التي لا [تحافظ على نسبة العرض إلى الارتفاع (aspect ratio)](https://caniuse.com/mdn-html_elements_img_aspect_ratio_computed_from_attributes). لمزيد من التفاصيل، راجع [هذا الفيديو من MDN](https://www.youtube.com/watch?v=4-d_SoCHeWE).

- [Safari 15 - 16.3](https://bugs.webkit.org/show_bug.cgi?id=243601) يعرض حدودًا رمادية أثناء التحميل. Safari 16.4 [أصلح هذه المشكلة](https://webkit.org/blog/13966/webkit-features-in-safari-16-4/#:~:text=Now%20in%20Safari%2016.4%2C%20a%20gray%20line%20no%20longer%20appears%20to%20mark%20the%20space%20where%20a%20lazy%2Dloaded%20image%20will%20appear%20once%20it%E2%80%99s%20been%20loaded.). حلول ممكنة:
  - استخدم CSS `@supports (font: -apple-system-body) and (-webkit-appearance: none) { img[loading="lazy"] { clip-path: inset(0.6px) } }`
  - استخدم [`priority`](#priority) إذا كانت الصورة فوق الطية (above the fold)
- [Firefox 67+](https://bugzilla.mozilla.org/show_bug.cgi?id=1556156) يعرض خلفية بيضاء أثناء التحميل. حلول ممكنة:
  - تمكين [`formats`](#formats) من نوع AVIF
  - استخدم [`placeholder`](#placeholder)

## سجل الإصدارات (Version History)

| الإصدار    | التغييرات                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `v13.4.14` | دعم خاصية `placeholder` لـ `data:/image...`                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `v13.2.0`  | إضافة تكوين `contentDispositionType`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `v13.0.6`  | إضافة خاصية `ref`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `v13.0.0`  | تم تغيير اسم استيراد `next/image` إلى `next/legacy/image`. تم تغيير اسم استيراد `next/future/image` إلى `next/image`. يتوفر [أداة تحويل تلقائي (codemod)](/docs/app/building-your-application/upgrading/codemods#next-image-to-legacy-image) لإعادة تسمية الاستيرادات بأمان. تمت إزالة غلاف `<span>`. تمت إزالة خصائص `layout`, `objectFit`, `objectPosition`, `lazyBoundary`, `lazyRoot`. أصبحت خاصية `alt` مطلوبة. تستقبل `onLoadingComplete` مرجعًا لعنصر `img`. تمت إزالة تكوين المحمل المدمج. |
| `v12.3.0`  | أصبح تكوين `remotePatterns` و `unoptimized` مستقرًا.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `v12.2.0`  | إضافة تكوين `remotePatterns` و `unoptimized` تجريبيًا. تمت إزالة `layout="raw"`.                                                                                                                                                                                                                                                                                                                                                                                                     |
| `v12.1.1`  | إضافة خاصية `style`. إضافة دعم تجريبي لـ `layout="raw"`.                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `v12.1.0`  | إضافة تكوين `dangerouslyAllowSVG` و `contentSecurityPolicy`.                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `v12.0.9`  | إضافة خاصية `lazyRoot`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `v12.0.0`  | إضافة تكوين `formats`.<br/>إضافة دعم AVIF.<br/>تغيير غلاف `<div>` إلى `<span>`.                                                                                                                                                                                                                                                                                                                                                                                                               |
| `v11.1.0`  | إضافة خصائص `onLoadingComplete` و `lazyBoundary`.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `v11.0.0`  | دعم خاصية `src` للاستيراد الثابت.<br/>إضافة خاصية `placeholder`.<br/>إضافة خاصية `blurDataURL`.                                                                                                                                                                                                                                                                                                                                                                                                             |
| `v10.0.5`  | إضافة خاصية `loader`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `v10.0.1`  | إضافة خاصية `layout`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `v10.0.0`  | تقديم `next/image`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
