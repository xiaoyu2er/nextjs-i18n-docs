---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-06T17:34:26.682Z
title: Actions serveur (Server Actions)
nav_title: Actions serveur
description: R√©f√©rence API pour les actions serveur (Server Actions) dans Next.js.
related:
  title: √âtapes suivantes
  description: Pour plus d'informations sur les prochaines √©tapes, nous recommandons les sections suivantes
  links:
    - app/building-your-application/data-fetching/forms-and-mutations
---

{/* TODO: Cette page devra inclure un lien vers la documentation React mentionn√©e en bas */}

Next.js s'int√®gre avec les actions React pour fournir une solution int√©gr√©e pour les [mutations c√¥t√© serveur](/docs/app/building-your-application/data-fetching/forms-and-mutations).

## Convention

Vous pouvez activer les actions serveur (Server Actions) dans votre projet Next.js en activant le flag **exp√©rimental** `serverActions`.

```js filename="next.config.js"
module.exports = {
  experimental: {
    serverActions: true,
  },
}
```

Les actions serveur peuvent √™tre d√©finies √† deux endroits :

- √Ä l'int√©rieur du composant qui l'utilise (uniquement pour les composants serveur).
- Dans un fichier s√©par√© (pour les composants client et serveur), pour une meilleure r√©utilisabilit√©. Vous pouvez d√©finir plusieurs actions serveur dans un seul fichier.

### Avec les composants serveur

Cr√©ez une action serveur en d√©finissant une fonction asynchrone avec la directive [`"use server"`](https://react.dev/reference/react/use-server) en haut du corps de la fonction. `"use server"` garantit que cette fonction ne sera ex√©cut√©e que sur le serveur.

Cette fonction doit avoir des [arguments s√©rialisables](https://developer.mozilla.org/docs/Glossary/Serialization) et une [valeur de retour s√©rialisable](https://developer.mozilla.org/docs/Glossary/Serialization).

```jsx filename="app/page.js" highlight={2}
export default function ServerComponent() {
  async function myAction() {
    'use server'
    // ...
  }
}
```

### Avec les composants client

#### Importation

Cr√©ez votre action serveur dans un fichier s√©par√© avec la directive `"use server"` en haut du fichier. Ensuite, importez l'action serveur dans votre composant client :

```js filename="app/actions.js" highlight={1}
'use server'

export async function myAction() {
  // ...
}
```

```jsx filename="app/client-component.jsx" highlight={1}
'use client'

import { myAction } from './actions'

export default function ClientComponent() {
  return (
    <form action={myAction}>
      <button type="submit">Ajouter au panier</button>
    </form>
  )
}
```

> **Bon √† savoir** : Lorsque vous utilisez une directive `"use server"` de haut niveau, toutes les exportations en dessous seront consid√©r√©es comme des actions serveur. Vous pouvez avoir plusieurs actions serveur dans un seul fichier.

#### Props

Dans certains cas, vous pourriez vouloir passer une action serveur √† un composant client en tant que prop.

```jsx
<ClientComponent updateItem={updateItem} />
```

```jsx filename="app/client-component.jsx"
'use client'

export default function ClientComponent({ myAction }) {
  return (
    <form action={myAction}>
      <input type="text" name="name" />
      <button type="submit">Mettre √† jour l'√©l√©ment</button>
    </form>
  )
}
```

### Liaison d'arguments

Vous pouvez lier des arguments √† une action serveur en utilisant la m√©thode `bind`. Cela vous permet de cr√©er une nouvelle action serveur avec certains arguments d√©j√† li√©s. Ceci est utile lorsque vous voulez passer des arguments suppl√©mentaires √† une action serveur.

```jsx filename="app/client-component.jsx" highlight={6}
'use client'

import { updateUser } from './actions'

export function UserProfile({ userId }) {
  const updateUserWithId = updateUser.bind(null, userId)

  return (
    <form action={updateUserWithId}>
      <input type="text" name="name" />
      <button type="submit">Mettre √† jour le nom</button>
    </form>
  )
}
```

Ensuite, l'action serveur `updateUser` recevra toujours l'argument `userId`, en plus des donn√©es du formulaire :

```js filename="app/actions.js"
'use server'

export async function updateUser(userId, formData) {
  // ...
}
```

> **Bon √† savoir** : `.bind` d'une action serveur fonctionne √† la fois dans les composants serveur et client. Il prend √©galement en charge l'[am√©lioration progressive](#am√©lioration-progressive).

## Invocation

Vous pouvez invoquer des actions serveur en utilisant les m√©thodes suivantes :

- Utilisation de `action` : La prop `action` de React permet d'invoquer une action serveur sur un √©l√©ment `<form>`.
- Utilisation de `formAction` : La prop `formAction` de React permet de g√©rer les √©l√©ments `<button>`, `<input type="submit">` et `<input type="image">` dans un `<form>`.
- Invocation personnalis√©e avec `startTransition` : Invoquez des actions serveur sans utiliser `action` ou `formAction` en utilisant `startTransition`. Cette m√©thode **d√©sactive l'[am√©lioration progressive](#am√©lioration-progressive)**.

## Am√©lioration progressive

L'am√©lioration progressive permet √† un `<form>` de fonctionner correctement sans JavaScript, ou avec JavaScript d√©sactiv√©. Cela permet aux utilisateurs d'interagir avec le formulaire et de soumettre des donn√©es m√™me si le JavaScript du formulaire n'a pas encore √©t√© charg√© ou s'il √©choue √† se charger.

Les actions React (√† la fois c√¥t√© serveur et client) prennent en charge l'am√©lioration progressive, en utilisant l'une des deux strat√©gies suivantes :

- Si une **action serveur** est pass√©e directement √† un `<form>`, le formulaire est interactif **m√™me si JavaScript est d√©sactiv√©**.
- Si une **action client** est pass√©e √† un `<form>`, le formulaire reste interactif, mais l'action sera plac√©e dans une file d'attente jusqu'√† ce que le formulaire soit hydrat√©. React priorise l'action, donc elle se produit rapidement.

Dans les deux cas, le formulaire est interactif avant l'hydratation. Bien que les actions serveur aient l'avantage suppl√©mentaire de ne pas d√©pendre du JavaScript c√¥t√© client, vous pouvez toujours composer un comportement suppl√©mentaire avec des actions client si n√©cessaire, sans sacrifier l'interactivit√©.

## Limite de taille

Par d√©faut, la taille maximale du corps de la requ√™te envoy√©e √† une action serveur est de 1 Mo, pour √©viter la consommation excessive de ressources serveur lors de l'analyse de grandes quantit√©s de donn√©es.

Cependant, vous pouvez configurer cette limite en utilisant l'option `serverActionsBodySizeLimit`. Elle peut prendre un nombre d'octets ou toute cha√Æne de caract√®res support√©e par bytes, par exemple `1000`, `'500kb'` ou `'3mb'`.

```js filename="next.config.js"
module.exports = {
  experimental: {
    serverActions: true,
    serverActionsBodySizeLimit: '2mb',
  },
}
```

## Ressources suppl√©mentaires

Les pages d'API React suivantes sont actuellement en cours de documentation :

- [`"use server"`](https://react.dev/reference/react/use-server)
- `action` (üöß)
- `formAction` (üöß)
- `useFormStatus` (üöß)
- `useFormState` (üöß)
- `useOptimistic` (üöß)