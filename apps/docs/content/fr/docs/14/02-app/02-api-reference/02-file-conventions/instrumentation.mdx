---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-06-06T17:05:45.937Z
title: instrumentation.js
description: Référence API pour le fichier instrumentation.js.
related:
  title: En savoir plus sur l'instrumentation
  links:
    - app/building-your-application/optimizing/instrumentation
---

Le fichier `instrumentation.js|ts` est utilisé pour intégrer des outils de surveillance et de journalisation dans votre application. Cela vous permet de suivre les performances et le comportement de votre application, ainsi que de déboguer des problèmes en production.

Pour l'utiliser, placez le fichier à la **racine** de votre application ou dans un dossier [`src`](/docs/app/building-your-application/configuring/src-directory) si vous en utilisez un.

## Option de configuration

L'instrumentation est actuellement une fonctionnalité expérimentale. Pour utiliser le fichier `instrumentation`, vous devez explicitement l'activer en définissant [`experimental.instrumentationHook = true;`](/docs/app/api-reference/next-config-js/instrumentationHook) dans votre `next.config.js` :

```js filename="next.config.js"
module.exports = {
  experimental: {
    instrumentationHook: true,
  },
}
```

## Exports

### `register` (requis)

Le fichier exporte une fonction `register` qui est appelée **une fois** lorsqu'une nouvelle instance du serveur Next.js est initialisée. `register` peut être une fonction asynchrone.

```ts filename="instrumentation.ts" switcher
import { registerOTel } from '@vercel/otel'

export function register() {
  registerOTel('next-app')
}
```

```js filename="instrumentation.js" switcher
import { registerOTel } from '@vercel/otel'

export function register() {
  registerOTel('next-app')
}
```

## Historique des versions

| Version   | Modifications                                           |
| --------- | ------------------------------------------------------ |
| `v14.0.4` | Prise en charge de Turbopack pour `instrumentation`    |
| `v13.2.0` | `instrumentation` introduite comme fonctionnalité expérimentale |