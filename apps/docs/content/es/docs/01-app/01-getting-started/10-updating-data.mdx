---
source-updated-at: 2025-06-01T01:32:20.000Z
translation-updated-at: 2025-06-02T20:02:54.513Z
title: Cómo actualizar datos
nav_title: Actualización de datos
description: Aprende cómo actualizar datos en tu aplicación Next.js.
related:
  title: Referencia de API
  description: Obtén más información sobre las características mencionadas en esta página leyendo la Referencia de API.
  links:
    - app/api-reference/functions/revalidatePath
    - app/api-reference/functions/revalidateTag
    - app/api-reference/functions/redirect
---

Puedes actualizar datos en Next.js utilizando las [Funciones del Servidor (Server Functions)](https://react.dev/reference/rsc/server-functions) de React. Esta página explicará cómo puedes [crear](#creando-funciones-del-servidor) e [invocar](#invocando-funciones-del-servidor) Funciones del Servidor.

## Funciones del Servidor

Una Función del Servidor es una función asíncrona que se ejecuta en el servidor. Las Funciones del Servidor son inherentemente asíncronas porque son invocadas por el cliente mediante una solicitud de red. Cuando se invocan como parte de una `action`, también se les llama **Acciones del Servidor (Server Actions)**.

Por convención, una `action` es una función asíncrona pasada a `startTransition`. Las Funciones del Servidor se envuelven automáticamente con `startTransition` cuando:

- Se pasan a un `<form>` usando la prop `action`,
- Se pasan a un `<button>` usando la prop `formAction`
- Se pasan a `useActionState`

## Creando Funciones del Servidor

Una Función del Servidor puede definirse usando la directiva [`use server`](https://react.dev/reference/rsc/use-server). Puedes colocar la directiva al inicio de una función **asíncrona** para marcar la función como una Función del Servidor, o al inicio de un archivo separado para marcar todas las exportaciones de ese archivo.

```ts filename="app/lib/actions.ts" switcher
export async function createPost(formData: FormData) {
  'use server'
  const title = formData.get('title')
  const content = formData.get('content')

  // Actualizar datos
  // Revalidar caché
}

export async function deletePost(formData: FormData) {
  'use server'
  const id = formData.get('id')

  // Actualizar datos
  // Revalidar caché
}
```

```js filename="app/lib/actions.js" switcher
export async function createPost(formData) {
  'use server'
  const title = formData.get('title')
  const content = formData.get('content')

  // Actualizar datos
  // Revalidar caché
}

export async function deletePost(formData) {
  'use server'
  const id = formData.get('id')

  // Actualizar datos
  // Revalidar caché
}
```

### Componentes del Servidor

Las Funciones del Servidor pueden incluirse en línea en Componentes del Servidor añadiendo la directiva `"use server"` al inicio del cuerpo de la función:

```tsx filename="app/page.tsx" switcher
export default function Page() {
  // Acción del Servidor
  async function createPost(formData: FormData) {
    'use server'
    // ...
  }

  return <></>
}
```

```jsx filename="app/page.js" switcher
export default function Page() {
  // Acción del Servidor
  async function createPost(formData) {
    'use server'
    // ...
  }

  return <></>
}
```

### Componentes del Cliente

No es posible definir Funciones del Servidor en Componentes del Cliente. Sin embargo, puedes invocarlas en Componentes del Cliente importándolas desde un archivo que tenga la directiva `"use server"` al inicio:

```ts filename="app/actions.ts" switcher
'use server'

export async function createPost() {}
```

```js filename="app/actions.js" switcher
'use server'

export async function createPost() {}
```

```tsx filename="app/ui/button.tsx" switcher
'use client'

import { createPost } from '@/app/actions'

export function Button() {
  return <button formAction={createPost}>Crear</button>
}
```

```jsx filename="app/ui/button.js" switcher
'use client'

import { createPost } from '@/app/actions'

export function Button() {
  return <button formAction={createPost}>Crear</button>
}
```

## Invocando Funciones del Servidor

Hay dos formas principales de invocar una Función del Servidor:

1. [Formularios](#formularios) en Componentes del Servidor y del Cliente
2. [Manejadores de Eventos](#manejadores-de-eventos) en Componentes del Cliente

### Formularios

React extiende el elemento HTML [`<form>`](https://react.dev/reference/react-dom/components/form) para permitir que una Función del Servidor sea invocada con la prop `action` de HTML.

Cuando se invoca en un formulario, la función recibe automáticamente el objeto [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData/FormData). Puedes extraer los datos usando los [métodos nativos de `FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData#instance_methods):

```tsx filename="app/ui/form.tsx" switcher
import { createPost } from '@/app/actions'

export function Form() {
  return (
    <form action={createPost}>
      <input type="text" name="title" />
      <input type="text" name="content" />
      <button type="submit">Crear</button>
    </form>
  )
}
```

```jsx filename="app/ui/form.js" switcher
import { createPost } from '@/app/actions'

export function Form() {
  return (
    <form action={createPost}>
      <input type="text" name="title" />
      <input type="text" name="content" />
      <button type="submit">Crear</button>
    </form>
  )
}
```

```ts filename="app/actions.ts" switcher
'use server'

export async function createPost(formData: FormData) {
  const title = formData.get('title')
  const content = formData.get('content')

  // Actualizar datos
  // Revalidar caché
}
```

```js filename="app/actions.js" switcher
'use server'

export async function createPost(formData) {
  const title = formData.get('title')
  const content = formData.get('content')

  // Actualizar datos
  // Revalidar caché
}
```

> **Nota importante:** Cuando se pasan a la prop `action`, las Funciones del Servidor también se conocen como _Acciones del Servidor (Server Actions)_.

### Manejadores de Eventos

Puedes invocar una Función del Servidor en un Componente del Cliente usando manejadores de eventos como `onClick`.

```tsx filename="app/like-button.tsx" switcher
'use client'

import { incrementLike } from './actions'
import { useState } from 'react'

export default function LikeButton({ initialLikes }: { initialLikes: number }) {
  const [likes, setLikes] = useState(initialLikes)

  return (
    <>
      <p>Me gustas totales: {likes}</p>
      <button
        onClick={async () => {
          const updatedLikes = await incrementLike()
          setLikes(updatedLikes)
        }}
      >
        Me gusta
      </button>
    </>
  )
}
```

```jsx filename="app/like-button.js" switcher
'use client'

import { incrementLike } from './actions'
import { useState } from 'react'

export default function LikeButton({ initialLikes }) {
  const [likes, setLikes] = useState(initialLikes)

  return (
    <>
      <p>Me gustas totales: {likes}</p>
      <button
        onClick={async () => {
          const updatedLikes = await incrementLike()
          setLikes(updatedLikes)
        }}
      >
        Me gusta
      </button>
    </>
  )
}
```

## Ejemplos

### Mostrando un estado pendiente

Mientras se ejecuta una Función del Servidor, puedes mostrar un indicador de carga con el hook [`useActionState`](https://react.dev/reference/react/useActionState) de React. Este hook devuelve un booleano `pending`:

```tsx filename="app/ui/button.tsx" switcher
'use client'

import { useActionState } from 'react'
import { createPost } from '@/app/actions'
import { LoadingSpinner } from '@/app/ui/loading-spinner'

export function Button() {
  const [state, action, pending] = useActionState(createPost, false)

  return (
    <button onClick={async () => action()}>
      {pending ? <LoadingSpinner /> : 'Crear publicación'}
    </button>
  )
}
```

```jsx filename="app/ui/button.js" switcher
'use client'

import { useActionState } from 'react'
import { createPost } from '@/app/actions'
import { LoadingSpinner } from '@/app/ui/loading-spinner'

export function Button() {
  const [state, action, pending] = useActionState(createPost, false)

  return (
    <button onClick={async () => action()}>
      {pending ? <LoadingSpinner /> : 'Crear publicación'}
    </button>
  )
}
```

### Revalidando la caché

Después de realizar una actualización, puedes revalidar la caché de Next.js y mostrar los datos actualizados llamando a [`revalidatePath`](/docs/app/api-reference/functions/revalidatePath) o [`revalidateTag`](/docs/app/api-reference/functions/revalidateTag) dentro de la Función del Servidor:

```ts filename="app/lib/actions.ts" switcher
import { revalidatePath } from 'next/cache'

export async function createPost(formData: FormData) {
  'use server'
  // Actualizar datos
  // ...

  revalidatePath('/posts')
}
```

```js filename="app/actions.js" switcher
import { revalidatePath } from 'next/cache'

export async function createPost(formData) {
  'use server'
  // Actualizar datos
  // ...
  revalidatePath('/posts')
}
```

### Redireccionando

Puedes querer redirigir al usuario a una página diferente después de realizar una actualización. Puedes hacer esto llamando a [`redirect`](/docs/app/api-reference/functions/redirect) dentro de la Función del Servidor:

```ts filename="app/lib/actions.ts" switcher
'use server'

import { redirect } from 'next/navigation'

export async function createPost(formData: FormData) {
  // Actualizar datos
  // ...

  redirect('/posts')
}
```

```js filename="app/actions.js" switcher
'use server'

import { redirect } from 'next/navigation'

export async function createPost(formData) {
  // Actualizar datos
  // ...

  redirect('/posts')
}
```