---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-05-21T20:57:37.771Z
title: æœåŠ¡ç«¯æ“ä½œ (Server Actions)
nav_title: æœåŠ¡ç«¯æ“ä½œ
description: Next.js æœåŠ¡ç«¯æ“ä½œ (Server Actions) çš„ API å‚è€ƒæ–‡æ¡£ã€‚
related:
  title: åç»­æ­¥éª¤
  description: å¦‚éœ€äº†è§£æ›´å¤šåç»­æ“ä½œä¿¡æ¯ï¼Œæˆ‘ä»¬æ¨èä»¥ä¸‹ç« èŠ‚
  links:
    - app/building-your-application/data-fetching/forms-and-mutations
---

{/* TODO: æ­¤é¡µé¢éœ€æ·»åŠ æŒ‡å‘åº•éƒ¨æåˆ°çš„ React æ–‡æ¡£é“¾æ¥ */}

Next.js é›†æˆäº† React Actionsï¼Œä¸º[æœåŠ¡ç«¯å˜æ›´ (server mutations)](/docs/app/building-your-application/data-fetching/forms-and-mutations) æä¾›äº†å†…ç½®è§£å†³æ–¹æ¡ˆã€‚

## çº¦å®š

é€šè¿‡åœ¨ Next.js é¡¹ç›®ä¸­å¯ç”¨ **å®éªŒæ€§** `serverActions` æ ‡å¿—æ¥ä½¿ç”¨æœåŠ¡ç«¯æ“ä½œåŠŸèƒ½ï¼š

```js filename="next.config.js"
module.exports = {
  experimental: {
    serverActions: true,
  },
}
```

æœåŠ¡ç«¯æ“ä½œå¯åœ¨ä»¥ä¸‹ä¸¤ç§ä½ç½®å®šä¹‰ï¼š

- ä½¿ç”¨è¯¥æ“ä½œçš„ç»„ä»¶å†…éƒ¨ï¼ˆä»…é™æœåŠ¡ç«¯ç»„ä»¶ï¼‰
- å•ç‹¬æ–‡ä»¶ä¸­ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç»„ä»¶å‡å¯ï¼‰ï¼Œä»¥å®ç°å¯å¤ç”¨æ€§ã€‚å•ä¸ªæ–‡ä»¶ä¸­å¯å®šä¹‰å¤šä¸ªæœåŠ¡ç«¯æ“ä½œ

### æœåŠ¡ç«¯ç»„ä»¶ä¸­ä½¿ç”¨

é€šè¿‡åœ¨å¼‚æ­¥å‡½æ•°ä½“é¡¶éƒ¨æ·»åŠ  [`"use server"`](https://react.dev/reference/react/use-server) æŒ‡ä»¤æ¥åˆ›å»ºæœåŠ¡ç«¯æ“ä½œã€‚`"use server"` ç¡®ä¿è¯¥å‡½æ•°ä»…åœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚

æ­¤å‡½æ•°åº”å…·æœ‰[å¯åºåˆ—åŒ–å‚æ•°](https://developer.mozilla.org/docs/Glossary/Serialization)å’Œ[å¯åºåˆ—åŒ–è¿”å›å€¼](https://developer.mozilla.org/docs/Glossary/Serialization)ã€‚

```jsx filename="app/page.js" highlight={2}
export default function ServerComponent() {
  async function myAction() {
    'use server'
    // ...
  }
}
```

### å®¢æˆ·ç«¯ç»„ä»¶ä¸­ä½¿ç”¨

#### å¯¼å…¥æ–¹å¼

åœ¨å•ç‹¬æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  `"use server"` æŒ‡ä»¤åˆ›å»ºæœåŠ¡ç«¯æ“ä½œï¼Œç„¶åå°†å…¶å¯¼å…¥å®¢æˆ·ç«¯ç»„ä»¶ï¼š

```js filename="app/actions.js" highlight={1}
'use server'

export async function myAction() {
  // ...
}
```

```jsx filename="app/client-component.jsx" highlight={1}
'use client'

import { myAction } from './actions'

export default function ClientComponent() {
  return (
    <form action={myAction}>
      <button type="submit">åŠ å…¥è´­ç‰©è½¦</button>
    </form>
  )
}
```

> **é¡»çŸ¥**ï¼šå½“ä½¿ç”¨æ–‡ä»¶é¡¶å±‚çš„ `"use server"` æŒ‡ä»¤æ—¶ï¼Œè¯¥æ–‡ä»¶ä¸‹æ‰€æœ‰å¯¼å‡ºéƒ½å°†è¢«è§†ä¸ºæœåŠ¡ç«¯æ“ä½œã€‚å•ä¸ªæ–‡ä»¶ä¸­å¯åŒ…å«å¤šä¸ªæœåŠ¡ç«¯æ“ä½œã€‚

#### å±æ€§ä¼ é€’

æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦å°†æœåŠ¡ç«¯æ“ä½œä½œä¸ºå±æ€§ä¼ é€’ç»™å®¢æˆ·ç«¯ç»„ä»¶ã€‚

```jsx
<ClientComponent updateItem={updateItem} />
```

```jsx filename="app/client-component.jsx"
'use client'

export default function ClientComponent({ myAction }) {
  return (
    <form action={myAction}>
      <input type="text" name="name" />
      <button type="submit">æ›´æ–°é¡¹ç›®</button>
    </form>
  )
}
```

### å‚æ•°ç»‘å®š

ä½¿ç”¨ `bind` æ–¹æ³•å¯ä»¥ä¸ºæœåŠ¡ç«¯æ“ä½œç»‘å®šå‚æ•°ã€‚è¿™å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå·²ç»‘å®šéƒ¨åˆ†å‚æ•°çš„æ–°æœåŠ¡ç«¯æ“ä½œï¼Œé€‚ç”¨äºéœ€è¦ä¼ é€’é¢å¤–å‚æ•°çš„æƒ…å†µã€‚

```jsx filename="app/client-component.jsx" highlight={6}
'use client'

import { updateUser } from './actions'

export function UserProfile({ userId }) {
  const updateUserWithId = updateUser.bind(null, userId)

  return (
    <form action={updateUserWithId}>
      <input type="text" name="name" />
      <button type="submit">æ›´æ–°ç”¨æˆ·åç§°</button>
    </form>
  )
}
```

æ­¤æ—¶ `updateUser` æœåŠ¡ç«¯æ“ä½œé™¤äº†æ¥æ”¶è¡¨å•æ•°æ®å¤–ï¼Œè¿˜å°†å§‹ç»ˆæ¥æ”¶ `userId` å‚æ•°ï¼š

```js filename="app/actions.js"
'use server'

export async function updateUser(userId, formData) {
  // ...
}
```

> **é¡»çŸ¥**ï¼šæœåŠ¡ç«¯æ“ä½œçš„ `.bind` æ–¹æ³•åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»„ä»¶ä¸­å‡å¯ä½¿ç”¨ï¼ŒåŒæ—¶æ”¯æŒ[æ¸è¿›å¢å¼º (Progressive Enhancement)](#progressive-enhancement)ã€‚

## è°ƒç”¨æ–¹å¼

å¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•è°ƒç”¨æœåŠ¡ç«¯æ“ä½œï¼š

- ä½¿ç”¨ `action`ï¼šReact çš„ `action` å±æ€§å…è®¸åœ¨ `<form>` å…ƒç´ ä¸Šè°ƒç”¨æœåŠ¡ç«¯æ“ä½œ
- ä½¿ç”¨ `formAction`ï¼šReact çš„ `formAction` å±æ€§å¯å¤„ç† `<form>` ä¸­çš„ `<button>`ã€`<input type="submit">` å’Œ `<input type="image">` å…ƒç´ 
- ä½¿ç”¨ `startTransition` è‡ªå®šä¹‰è°ƒç”¨ï¼šä¸ä½¿ç”¨ `action` æˆ– `formAction` çš„æƒ…å†µä¸‹é€šè¿‡ `startTransition` è°ƒç”¨æœåŠ¡ç«¯æ“ä½œï¼Œæ­¤æ–¹æ³•**ä¼šç¦ç”¨[æ¸è¿›å¢å¼º](#progressive-enhancement)**åŠŸèƒ½

## æ¸è¿›å¢å¼º

æ¸è¿›å¢å¼ºæŠ€æœ¯ä½¿å¾— `<form>` è¡¨å•åœ¨æ—  JavaScript æˆ– JavaScript ç¦ç”¨æ—¶ä»èƒ½æ­£å¸¸å·¥ä½œã€‚å³ä½¿ç”¨æˆ·ç«¯çš„è¡¨å• JavaScript å°šæœªåŠ è½½æˆ–åŠ è½½å¤±è´¥ï¼Œç”¨æˆ·ä»å¯æ­£å¸¸æäº¤æ•°æ®ã€‚

React Actionsï¼ˆåŒ…æ‹¬æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ“ä½œï¼‰é€šè¿‡ä»¥ä¸‹ä¸¤ç§ç­–ç•¥æ”¯æŒæ¸è¿›å¢å¼ºï¼š

- è‹¥ç›´æ¥å°†**æœåŠ¡ç«¯æ“ä½œ**ä¼ é€’ç»™ `<form>`ï¼Œå³ä½¿ JavaScript è¢«ç¦ç”¨ï¼Œè¡¨å•ä»å¯äº¤äº’
- è‹¥å°†**å®¢æˆ·ç«¯æ“ä½œ**ä¼ é€’ç»™ `<form>`ï¼Œè¡¨å•åœ¨ hydration å®Œæˆå‰ä»å¯äº¤äº’ï¼Œä½†æ“ä½œä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ç­‰å¾… hydration å®Œæˆåæ‰§è¡Œã€‚React ä¼šä¼˜å…ˆå¤„ç†è¿™äº›æ“ä½œï¼Œå› æ­¤å“åº”ä»ç„¶è¿…é€Ÿ

ä¸¤ç§æƒ…å†µä¸‹è¡¨å•åœ¨ hydration å‰éƒ½ä¿æŒå¯äº¤äº’çŠ¶æ€ã€‚è™½ç„¶æœåŠ¡ç«¯æ“ä½œå…·æœ‰ä¸ä¾èµ–å®¢æˆ·ç«¯ JavaScript çš„é¢å¤–ä¼˜åŠ¿ï¼Œä½†æ‚¨ä»å¯æ ¹æ®éœ€è¦åœ¨å®¢æˆ·ç«¯æ“ä½œä¸­ç»„åˆé™„åŠ è¡Œä¸ºï¼Œè€Œä¸ä¼šç‰ºç‰²äº¤äº’æ€§ã€‚

## å¤§å°é™åˆ¶

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€è‡³æœåŠ¡ç«¯æ“ä½œçš„è¯·æ±‚ä½“æœ€å¤§ä¸º 1MBï¼Œä»¥é˜²æ­¢è§£æå¤§é‡æ•°æ®æ¶ˆè€—è¿‡å¤šæœåŠ¡å™¨èµ„æºã€‚

ä½†æ‚¨å¯ä»¥é€šè¿‡ `serverActionsBodySizeLimit` é€‰é¡¹é…ç½®æ­¤é™åˆ¶ã€‚å¯æ¥å—å­—èŠ‚æ•°æˆ– bytes åº“æ”¯æŒçš„ä»»ä½•å­—ç¬¦ä¸²æ ¼å¼ï¼Œä¾‹å¦‚ `1000`ã€`'500kb'` æˆ– `'3mb'`ã€‚

```js filename="next.config.js"
module.exports = {
  experimental: {
    serverActions: true,
    serverActionsBodySizeLimit: '2mb',
  },
}
```

## æ‰©å±•èµ„æº

ä»¥ä¸‹ React API æ–‡æ¡£æ­£åœ¨ç¼–å†™ä¸­ï¼š

- [`"use server"`](https://react.dev/reference/react/use-server)
- `action` (ğŸš§)
- `formAction` (ğŸš§)
- `useFormStatus` (ğŸš§)
- `useFormState` (ğŸš§)
- `useOptimistic` (ğŸš§)