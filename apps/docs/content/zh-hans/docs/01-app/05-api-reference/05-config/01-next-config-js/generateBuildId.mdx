---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-05-20T22:58:21.034Z
title: generateBuildId
description: 配置构建 ID，该 ID 用于标识当前正在提供服务的应用程序构建版本。
---

{/* 本文档内容在应用路由器和页面路由器之间共享。您可以使用 `<PagesOnly>内容</PagesOnly>` 组件添加特定于页面路由器的内容。任何共享内容不应包裹在组件中。 */}

Next.js 会在执行 `next build` 时生成一个 ID，用于标识当前正在提供服务的应用程序版本。相同的构建版本应该被用于启动多个容器。

如果您需要为环境的每个阶段重新构建，则需要生成一致的构建 ID 供容器之间使用。在 `next.config.js` 中使用 `generateBuildId` 命令：

```jsx filename="next.config.js"
module.exports = {
  generateBuildId: async () => {
    // 这里可以返回任何内容，例如使用最新的 git 哈希值
    return process.env.GIT_HASH
  },
}
```