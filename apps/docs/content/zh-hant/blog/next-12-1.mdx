---
source-updated-at: 2025-05-29T18:05:49.000Z
translation-updated-at: 2025-05-29T20:01:20.095Z
title: 關於 Next.js
description: Next.js 是一個用於構建全端網頁應用程式的 React 框架。了解如何使用 Next.js 來開發你的應用程式。
---

Next.js 是一個基於 React 的框架，用於構建全端網頁應用程式。你可以使用 React 元件來建構使用者介面，並透過 Next.js 獲得額外的功能與優化。

它還會自動配置底層工具，例如打包工具 (bundler) 和編譯器 (compiler)。這樣你就能專注於產品開發並快速交付。

無論你是獨立開發者還是團隊成員，Next.js 都能幫助你建構互動式、動態且快速的 React 應用程式。---
title: Next.js 12.1 版本發布
description: >-
  Next.js 12.1 帶來了按需增量靜態再生 (ISR)、支援 styled-components 和 Relay、零配置 Jest 支援等多項新功能！
author:
  - name: Balázs Orbán
    image: /static/team/balazs.jpg
  - name: DongYoon Kang
    image: /static/team/kdy.jpg
  - name: Gerald Monaco
    image: /static/team/gerald.jpg
  - name: Javi Velasco
    image: /static/team/javi.jpg
  - name: Jiachi Liu
    image: /static/team/jiachi.png
  - name: JJ Kasper
    image: /static/team/jj.jpg
  - name: Joe Haddad
    image: /static/team/timer.jpg
  - name: Kara Erickson
    image: /static/team/kara.jpg
  - name: Maia Teegarden
    image: /static/team/maia.jpg
  - name: Shu Ding
    image: /static/team/shu.jpg
  - name: Steven
    image: /static/team/styfle.png
  - name: Tim Neutkens
    image: /static/team/tim.jpg
  - name: Tobias Koppers
    image: /static/team/sokra.jpg
date: 2022-02-17T16:00:00.507Z
image: >-
  https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/static/blog/next-12-1/twitter-card.png
---

我們非常興奮地在 Next.js 12.1 中發布了最受期待的功能之一：

*   [**按需增量靜態再生 (ISR) (Beta)：**](#on-demand-incremental-static-regeneration-beta) 使用 `getStaticProps` 即時重新驗證頁面。
*   [**擴展的 SWC 支援：**](#improved-swc-support) 新增對 `styled-components`、Relay 等的支援。
*   [**`next/jest` 插件：**](#zero-configuration-jest-plugin) 使用 SWC 實現零配置 Jest 支援。
*   [**更快的 SWC 代碼壓縮 (RC)：**](#faster-minification-with-swc) 比 Terser 快 7 倍的壓縮速度。
*   [**自託管改進：**](#self-hosted-nextjs-improvements) Docker 映像體積縮小約 80%。
*   [**React 18 與伺服器元件 (Alpha)：**](#react-18-server-components-and-ssr-streaming-alpha) 穩定性和支援性提升。
*   [**開發者問卷調查：**](#nextjs-developer-survey) 幫助我們透過您的反饋改進 Next.js。

立即執行 `npm i next@latest` 進行更新。

[按需增量靜態再生 (Beta)](#on-demand-incremental-static-regeneration-beta)
---------------------------------------------------------------------------------------------------

Next.js 現在提供了 `unstable_revalidate()` 函數，允許您重新驗證使用 `getStaticProps` 的單個頁面。這是自我們在 Next.js 9.5 中引入[增量靜態再生](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration) (ISR) 以來最受歡迎的功能之一。

自 ISR 發布以來，我們已經看到 [Tripadvisor](https://vercel.com/customers/cruise-critic)、[Parachute](https://vercel.com/customers/parachute)、HashiCorp 等公司大幅縮短了構建時間，同時保持了出色的性能。然而，我們聽取了您對基於時間間隔的重新驗證的反饋，並很高興能提供更多靈活性。

目前，如果您將 `revalidate` 時間設為 `60`，所有訪問者將在一分鐘內看到相同的生成版本。唯一使緩存失效的方法是有人在該分鐘過後訪問該頁面。現在，您可以按需手動清除特定頁面的 Next.js 緩存。

這使得在以下情況下更新網站更加容易：

*   您的無頭 CMS 內容被創建或更新時
*   電子商務元數據變更（價格、描述、類別、評論等）

```js filename="pages/api/revalidate.js"
export default async function handler(req, res) {
  // 檢查密鑰以確認這是一個有效的請求
  if (req.query.secret !== process.env.MY_SECRET_TOKEN) {
    return res.status(401).json({ message: '無效的令牌' });
  }
 
  try {
    await res.unstable_revalidate('/path-to-revalidate');
    return res.json({ revalidated: true });
  } catch (err) {
    // 如果出現錯誤，Next.js 將繼續
    // 顯示最後成功生成的頁面
    return res.status(500).send('重新驗證時出錯');
  }
}
```

在 `getStaticProps` 中，您不需要指定 `revalidate` 來使用按需重新驗證。如果省略 `revalidate`，Next.js 將使用默認值 `false`（不重新驗證），並且僅在調用 `unstable_revalidate()` 時按需重新驗證頁面。

增量靜態再生適用於所有支援 [Next.js 構建 API](/docs/pages/building-your-application/deploying#nextjs-build-api) (`next build`) 的提供商。從今天開始，當部署到 Vercel 時，按需重新驗證在將頁面推送到邊緣時將在約 300 毫秒內全局傳播。

[查看我們的演示](https://on-demand-isr.vercel.app/) 以了解按需重新驗證的實際效果並提供反饋。Svix（企業級 Webhooks）和 Clerk（身份驗證）也[創建了一個演示](https://www.svix.com/blog/vercel-on-demand-isr-and-svix)來展示按需 ISR。

[改進的 SWC 支援](#improved-swc-support)
---------------------------------------------

我們希望讓每個 Next.js 應用在生產環境中構建得更快，並在本地開發中獲得即時反饋。[Next.js 12](https://nextjs.org/blog/next-12) 引入了一個新的[基於 Rust 的編譯器](/docs/architecture/nextjs-compiler)，它利用了原生編譯的優勢。

在 12.1 中，我們為 Next.js 編譯器新增了以下支援：

*   [styled-components](/docs/architecture/nextjs-compiler#styled-components)
*   [importSource](/docs/architecture/nextjs-compiler#importsource)
*   [legacy-decorators](/docs/architecture/nextjs-compiler#legacy-decorators)
*   [relay](/docs/architecture/nextjs-compiler#relay)
*   [remove-react-properties](/docs/architecture/nextjs-compiler#remove-react-properties)
*   [remove-console](/docs/architecture/nextjs-compiler#remove-console)

隨著上述六個轉換的加入，我們現在已將最常見的 Babel 插件移植到使用新編譯器的 Rust 中。如果您希望看到其他插件，[請在討論中告訴我們](https://github.com/vercel/next.js/discussions/30174)。此外，我們正在開發一個通過 SWC 啟用的[高性能 WebAssembly 插件系統](https://twitter.com/swc_rs/status/1492454606118752257)。

[零配置 Jest 插件](#zero-configuration-jest-plugin)
-----------------------------------------------------------------

Next.js 現在會自動為您配置 Jest (`next/jest`)，使用基於 Rust 的 Next.js 編譯器來轉換文件，包括：

*   自動模擬樣式表 (`.css`、`.module.css` 及其 `.scss` 變體) 和圖片導入
*   將 `.env` (及其所有變體) 加載到 `process.env`
*   忽略 `node_modules` 的測試解析和轉換
*   忽略 `.next` 的測試解析
*   加載 `next.config.js` 以啟用 Next.js 編譯器轉換的標誌

[查看文檔](/docs/pages/building-your-application/optimizing/testing#setting-up-jest-with-the-rust-compiler) 了解更多信息，或從我們的 [Jest 示例](https://github.com/vercel/next.js/tree/canary/examples/with-jest) 開始。

[更快的 SWC 代碼壓縮](#faster-minification-with-swc)
-------------------------------------------------------------

在 [Next.js 12](https://nextjs.org/blog/next-12) 中，我們引入了使用 SWC 作為 Next.js 編譯器一部分的代碼壓縮功能。早期結果顯示它比 Terser **快 7 倍**。在 12.1 中，SWC 壓縮功能已進入發布候選 (RC) 階段，並將在 12.2 中成為默認選項。

您可以在 `next.config.js` 中選擇使用 SWC 進行代碼壓縮：

```js filename="next.config.js"
module.exports = {
  swcMinify: true,
};
```

請在[討論區](https://github.com/vercel/next.js/discussions/30237)分享您的反饋。

[更快的圖片優化](#faster-image-optimization)
-------------------------------------------------------

內置的圖片優化 API 已更新，支援與 [ISR 頁面](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration) 相同的模式，即圖片會先以過期狀態提供，並在後台重新驗證（也稱為 `stale-while-revalidate`）。

這對於優化圖片性能是一個重大改進。詳情請參閱[圖片緩存行為](/docs/pages/api-reference/components/image#caching-behavior)。

[自託管 Next.js 改進](#self-hosted-nextjs-improvements)
--------------------------------------------------------------------

Next.js 現在可以自動創建一個 `standalone` 文件夾，僅複製生產部署所需的文件。這使得自託管 Next.js 應用的 **Docker 映像體積縮小了約 80%**。

要利用此自動複製功能，您可以在 `next.config.js` 中啟用它：

```js filename="next.config.js"
module.exports = {
  experimental: {
    outputStandalone: true,
  },
};
```

這將在 `.next/standalone` 創建一個文件夾，該文件夾可以獨立部署，無需安裝 `node_modules`。

[查看文檔](/docs/pages/api-reference/next-config-js/output#automatically-copying-traced-files-experimental) 或從 [Docker 示例](https://github.com/vercel/next.js/tree/canary/examples/with-docker) 開始。我們現在還提供了一個[多環境 Docker 示例](https://github.com/vercel/next.js/tree/canary/examples/with-docker-multi-env)，支援根據環境加載不同的 `.env` 文件。

[React 18、伺服器元件與 SSR 串流 (Alpha)](#react-18-server-components-and-ssr-streaming-alpha)
-------------------------------------------------------------------------------------------------------------

如 [Next.js Conf](https://www.youtube.com/watch?v=WlP2TB2ORL4) 所示，我們一直在努力將 React 18、伺服器端 Suspense、串流 SSR 以及最終的伺服器元件引入 Next.js。

伺服器元件是 React 的一項新功能，可讓您通過分離伺服器和客戶端代碼來減少 JavaScript 包的大小。伺服器元件允許開發人員構建跨越伺服器和客戶端的應用，將客戶端應用的豐富交互性與傳統伺服器渲染的改進性能相結合。

對於那些在 Next.js 中從 Alpha 到 Beta 階段[跟進](https://github.com/vercel/next.js/discussions/31263) 伺服器元件開發的開發者，以下是最近的一些更新：

*   [在 HTML 中內聯伺服器元件響應以避免第二次請求](https://github.com/vercel/next.js/issues/30994)
*   [改進串流時的腳本加載以實現 React 18 的部分水合](https://github.com/vercel/next.js/issues/31338)
*   [支援 React 18 的新 `useId` API](https://github.com/vercel/next.js/pull/31102)
*   [支援將 `_app` 作為伺服器元件](https://github.com/vercel/next.js/issues/30996)
*   [改進伺服器元件的代碼分割](https://github.com/vercel/next.js/pull/31968)
*   [改進串流性能](https://github.com/vercel/next.js/pull/30585)
*   [能夠在 Node.js 和 Edge 之間更改默認運行時](https://github.com/vercel/next.js/pull/34068) ([RFC](https://github.com/vercel/next.js/discussions/34179))

我們正在努力讓您能夠在邊緣運行整個 Next.js 應用的伺服器渲染。您可以選擇哪些頁面應選擇加入 Edge 運行時，這樣您就可以在準備好時從 Node.js 逐步遷移頁面。

我們將很快發布另一篇文章，更深入地探討 Edge 運行時。我們的兩個演示（[next-server-components](https://github.com/vercel/next-server-components) 和 [next-rsc-demo](https://github.com/vercel/next-rsc-demo)）都已更新為最新的更改。

[其他錯誤修復與改進](#other-bug-fixes-and-improvements)
---------------------------------------------------------------------

*   使用 `<a>` 並設置 `target="blank"` 時，ESLint 不再警告需要使用 `next/link`。
*   `.d.ts` 文件不再被視為頁面。
*   當向屏幕閱讀器宣布頁面更改時，`document.title` 現在優先於 `h1`。
*   現在可以創建 `pages/index/[...dynamic].js`，之前由於 `index` 是保留關鍵字而無法實現。
*   當使用 `dynamic(() => import('./some-component'), { ssr: false })` 時，導入將自動從伺服器代碼中進行樹搖優化。
*   為了減小安裝大小並提高安全性，我們正在努力預編譯更多依賴項。最新添加的是 `node-fetch`。
*   改進了使用[中介軟體](/docs/pages/building-your-application/routing/middleware)時的快速刷新功能。
*   支援 ESLint 8 與我們的[內置 ESLint 集成](/docs/pages/building-your-application/configuring/eslint)。
*   `styled-jsx` 已升級至 5.0，包括所有 `styled-jsx` 編譯錯誤的新幫助鏈接。
*   Edge 運行時：支援 `AbortController` 和 `AbortSignal`。
*   Edge 運行時：添加了 `CryptoKey` 和 `globalThis.CryptoKey`。
*   大型 Next.js 應用在最近的改進後（超過 1,000 個模塊重新加載），快速刷新時間提高了約 60%。
*   如果快速刷新失敗並導致完整頁面重新加載，現在會顯示通知。
*   當使用 React 18 嚴格模式時，現在會正確跳過宣布初始頁面加載。
*   與 2021 年 12 月相比，我們已將 Next.js 存儲庫中的[開放問題減少了近 300 個](https://nextjs-issue-tracker.vercel.app/)（解決了近 1000 個問題）。

[Next.js 開發者問卷調查](#nextjs-developer-survey)
----------------------------------------------------

分享您的反饋，幫助我們通過[首次開發者問卷調查](https://vercel.link/nextjs-survey)改進 Next.js。

本次問卷調查分為兩部分：一個包含八個問題的快速調查和一個深入探討各項功能反饋的擴展調查。如果您有時間，我們希望您能填寫兩個部分；如果沒有，您可以在完成第一部分後提交答案。

您的答案將完全匿名，但如果您願意，可以選擇與我們分享您的應用 URL。

感謝您幫助我們改進 Next.js！

[感謝貢獻者](#thank-you-contributors)
--------------------------------------------------

Next.js 是 **超過 2,000 名獨立開發者**、Google 和 Facebook 等行業合作夥伴以及我們的核心團隊共同努力的成果。

為了讓貢獻更容易，我們已將 Next.js 存儲庫遷移到使用 [Turborepo](https://turborepo.com) 以提升構建性能。我們還添加了測試和錯誤鏈接的腳手架，讓開始編寫測試更加容易。最後，我們錄製了一段[40 分鐘的入門視頻](https://www.youtube.com/watch?v=cuoNzXFLitc)，展示如何為 Next.js 做出貢獻。

本次發布要感謝以下貢獻者：@MaedahBatool, @mutebg, @sokra, @huozhi, @hanford, @shuding, @sean6bucks, @jameshfisher, @devknoll, @yuta-ike, @zh-lx, @amandeepmittal, @alunyov, @stefanprobst, @leerob, @balazsorban44, @kdy1, @brittanyrw, @jord1e, @kara, @vvo, @ismaelrumzan, @dlindenkreuz, @MohammadxAli, @nguyenyou, @thibautsabot, @hanneslund, @vertti, @KateKate, @stefee, @mikinovation, @Leticijak, @mohsen1, @ncphillips, @ehowey, @lancechentw, @krychaxp, @fmacherey, @pklawansky, @RyanClementsHax, @lakbychance, @sannajammeh, @oliviertassinari, @alexander-akait, @u-yas, @Cheprer, @msp5382, @chrispat, @getspooky, @Ryz0nd, @klaasman, @midgleyc, @kumard3, @jesstelford, @neeraj3029, @glenngijsberts, @pie6k, @wouterraateland, @timneutkens, @11koukou, @thesyedbasim, @aeneasr, @ijjk, @lfades, @JuniorTour, @xavhan, @mattyocode, @padmaia, @Skn0tt, @gwer, @Nutlope, @styfle, @stipsan, @xhoantran, @eolme, @sespinosa, @zenorocha, @hjaber, @benmvp, @T-O-R-U-S, @dburrows, @atcastle, @kiriny, @molebox, @Vienio99, @kyliau, @PepijnSenders, @krystofex, @PizzaPete, @souljuse, @Schniz, @Nelsonfrank, @Mhmdrza, @hideokamoto-stripe, @Emrin, @gr-qft, @delbaoliveira, @redbar0n, @lxy-yz, @Divlo, @kachkaev, @teleaziz, @OgbeniHMMD, @goncy, @bennettdams, @hsynlms, @callumgare, @jonrosner, @karaggeorge, @rpie3, @MartijnHols, @bashunaimiroy, @NOCELL, @rishabhpoddar, @omariosouto, @theMosaad, @javivelasco, @pierrenel, @lobsterkatie, @tharakabimal, @saevarb, @nbouvrette, @paulnbrd, @ecklf, @renbaoshuo, @chozzz, @tbezman, @karlhorky, @j-mendez, @ffan0811, @arthurfiorette, @chimit, @joperron, @moh12594, @rasmusjp, @bryanrsmith, @TrySound, @josharsh, @thecrypticace, @arturparkhisenko, @segheysens, @thevinter, @AryanBeezadhur, @xiaohp, @tknickman, @oriolcp, @smakosh, @jorrit, @mix3d, @Clecio013, @michielvangendt, @intergalacticspacehighway, @jbraithwaite, @marcelocarmona, @benmerckx, @haykerman, @steven-tey, @jaredpalmer, @pi-guy-in-the-sky, @JuanM04, @apollisa, @D-Pagey, @Kikobeats, @ramosbugs, @dan-weaver, @chris-stytch, @MikevPeeren, @janpio, @emw3, @nubpro, @cmdcolin, @joostdecock, @sgallese, @housseindjirdeh, @minervabot, @cjboco, @Ryuurock, @dm430, @mkarkachov, @nvh95, @gfortaine, @zifeo, @vicente-s, @Rohithgilla12, @brookton, @skirsten, @davidfateh, @DavidBabel, @mannybecerra, @pveyes, @kaykdm, @xhiroga, @mzaien, @losfair, @ykzts, @knezevicdev, @yang-feng-yfeng, @xuchaobei, @elkevinwolf, @fabienheureux, @nilskaspersson, @Andarist, @mathcrln, @dferber90, @FranciscoMoretti, @benschwarz, @wendellhu95, @gazdagergo, @imabp, @ljosberinn, @samuliasmala, @ka2jun8, @monsonjeremy, @pqt, @leoortizz, @michel-kraemer, @ntkoopman, @iicdii, @chentsulin, @ericmatthys, @lennym, @balogunkeji, @wnr, @chemicalkosek, @KittyGiraudel, @OKinane, @KonstHardy, @BrandonRomano, @furcan, @dusanralic, @elliottsj, @hi-ogawa, @panva, @genetschneider, @thundermiracle, @stefano-rainieri, @ericbiewener, @vordgi, @stevejarvis, @ihmpavel, @matamatanot, @dyarfaradj, @iheyunfei, @ascorbic, @fytriht, @emzoumpo, @onurtemiz, @a-ursino, @mxschmitt, @bywo, @OArnarsson, @TurekBot, @gish, @vadymshymko, @kamsar, @skhaz, @Prashoon123, @IrisvanOllefen, @evan-bradley, @ntltd, @EzequielDM, @oBusk, @martpie, @BruceRodrigues, @luke-h1, @lucasvazq, @velocity23, @AkiraTsuboi, @mitheelgajare, @JamiesWhiteShirt, @leroydev, @JulienZD, @leotaku, @mattfwood, 和 @kripod。
