---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-05-25T20:46:17.418Z
title: Edge Runtime
description: Edge Runtime 的 API 參考文件。
---

{/* 此文件的內容在應用程式路由器和頁面路由器之間共享。您可以使用 `<PagesOnly>內容</PagesOnly>` 元件來新增專屬於頁面路由器的內容。任何共享內容不應包裹在元件中。 */}

Next.js 的 Edge Runtime 基於標準 Web API，支援以下 API：

## 網路 API

| API                                                                             | 描述                           |
| ------------------------------------------------------------------------------- | ------------------------------ |
| [`Blob`](https://developer.mozilla.org/docs/Web/API/Blob)                       | 表示一個 blob 物件              |
| [`fetch`](https://developer.mozilla.org/docs/Web/API/Fetch_API)                 | 獲取資源                        |
| [`FetchEvent`](https://developer.mozilla.org/docs/Web/API/FetchEvent)           | 表示一個 fetch 事件             |
| [`File`](https://developer.mozilla.org/docs/Web/API/File)                       | 表示一個檔案物件                |
| [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData)               | 表示表單資料                    |
| [`Headers`](https://developer.mozilla.org/docs/Web/API/Headers)                 | 表示 HTTP 標頭                  |
| [`Request`](https://developer.mozilla.org/docs/Web/API/Request)                 | 表示一個 HTTP 請求              |
| [`Response`](https://developer.mozilla.org/docs/Web/API/Response)               | 表示一個 HTTP 回應              |
| [`URLSearchParams`](https://developer.mozilla.org/docs/Web/API/URLSearchParams) | 表示 URL 搜尋參數               |
| [`WebSocket`](https://developer.mozilla.org/docs/Web/API/WebSocket)             | 表示一個 WebSocket 連線         |

## 編碼 API

| API                                                                                 | 描述                            |
| ----------------------------------------------------------------------------------- | ------------------------------- |
| [`atob`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/atob) | 解碼 base-64 編碼的字串         |
| [`btoa`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/btoa) | 將字串編碼為 base-64            |
| [`TextDecoder`](https://developer.mozilla.org/docs/Web/API/TextDecoder)             | 將 Uint8Array 解碼為字串        |
| [`TextDecoderStream`](https://developer.mozilla.org/docs/Web/API/TextDecoderStream) | 可鏈接的串流解碼器              |
| [`TextEncoder`](https://developer.mozilla.org/docs/Web/API/TextEncoder)             | 將字串編碼為 Uint8Array         |
| [`TextEncoderStream`](https://developer.mozilla.org/docs/Web/API/TextEncoderStream) | 可鏈接的串流編碼器              |

## 串流 API

| API                                                                                                     | 描述                              |
| ------------------------------------------------------------------------------------------------------- | --------------------------------- |
| [`ReadableStream`](https://developer.mozilla.org/docs/Web/API/ReadableStream)                           | 表示一個可讀串流                  |
| [`ReadableStreamBYOBReader`](https://developer.mozilla.org/docs/Web/API/ReadableStreamBYOBReader)       | 表示 ReadableStream 的讀取器      |
| [`ReadableStreamDefaultReader`](https://developer.mozilla.org/docs/Web/API/ReadableStreamDefaultReader) | 表示 ReadableStream 的預設讀取器  |
| [`TransformStream`](https://developer.mozilla.org/docs/Web/API/TransformStream)                         | 表示一個轉換串流                  |
| [`WritableStream`](https://developer.mozilla.org/docs/Web/API/WritableStream)                           | 表示一個可寫串流                  |
| [`WritableStreamDefaultWriter`](https://developer.mozilla.org/docs/Web/API/WritableStreamDefaultWriter) | 表示 WritableStream 的預設寫入器  |

## 加密 API

| API                                                                       | 描述                                                                                         |
| ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
| [`crypto`](https://developer.mozilla.org/docs/Web/API/Window/crypto)      | 提供平台加密功能的存取權限                                                                  |
| [`CryptoKey`](https://developer.mozilla.org/docs/Web/API/CryptoKey)       | 表示一個加密金鑰                                                                            |
| [`SubtleCrypto`](https://developer.mozilla.org/docs/Web/API/SubtleCrypto) | 提供常見加密原語的存取權限，如雜湊、簽名、加密或解密                                        |

## 網頁標準 API

| API                                                                                                                   | 描述                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`AbortController`](https://developer.mozilla.org/docs/Web/API/AbortController)                                       | 允許您根據需求中止一個或多個 DOM 請求                                                                                                                                     |
| [`Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)                           | 表示一組值的陣列                                                                                                                                                                        |
| [`ArrayBuffer`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)               | 表示一個通用的、固定長度的原始二進位資料緩衝區                                                                                                                                            |
| [`Atomics`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics)                       | 提供原子操作作為靜態方法                                                                                                                                                         |
| [`BigInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt)                         | 表示具有任意精度的整數                                                                                                                                                   |
| [`BigInt64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array)           | 表示一個 64 位元有號整數的型別陣列                                                                                                                                                   |
| [`BigUint64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array)         | 表示一個 64 位元無號整數的型別陣列                                                                                                                                                 |
| [`Boolean`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                       | 表示一個邏輯實體，可以有兩個值：`true` 和 `false`                                                                                                                              |
| [`clearInterval`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval)                 | 取消先前通過 `setInterval()` 設定的定時重複動作                                                                                                      |
| [`clearTimeout`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout)                   | 取消先前通過 `setTimeout()` 設定的定時重複動作                                                                                                       |
| [`console`](https://developer.mozilla.org/docs/Web/API/Console)                                                       | 提供對瀏覽器除錯控制台的存取                                                                                                                                                   |
| [`DataView`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView)                     | 表示 `ArrayBuffer` 的通用視圖                                                                                                                                                        |
| [`Date`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date)                             | 以平台無關的格式表示單一時間點                                                                                                                                  |
| [`decodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURI)                   | 解碼先前由 `encodeURI` 或類似方法建立的統一資源識別符 (URI)                                                                                                |
| [`decodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent) | 解碼先前由 `encodeURIComponent` 或類似方法建立的統一資源識別符 (URI) 元件                                                                             |
| [`DOMException`](https://developer.mozilla.org/docs/Web/API/DOMException)                                             | 表示在 DOM 中發生的錯誤                                                                                                                                                           |
| [`encodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)                   | 透過將特定字元的每個實例替換為代表該字元 UTF-8 編碼的一到四個跳脫序列，來編碼統一資源識別符 (URI)           |
| [`encodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) | 透過將特定字元的每個實例替換為代表該字元 UTF-8 編碼的一到四個跳脫序列，來編碼統一資源識別符 (URI) 元件 |
| [`Error`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)                           | 表示嘗試執行陳述式或存取屬性時發生的錯誤                                                                                                                       |
| [`EvalError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/EvalError)                   | 表示與全域函式 `eval()` 相關的錯誤                                                                                                                               |
| [`Float32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float32Array)             | 表示一個 32 位元浮點數的型別陣列                                                                                                                                            |
| [`Float64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float64Array)             | 表示一個 64 位元浮點數的型別陣列                                                                                                                                            |
| [`Function`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function)                     | 表示一個函式                                                                                                                                                                                |
| [`Infinity`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Infinity)                     | 表示數學上的無限大值                                                                                                                                                           |
| [`Int8Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array)                   | 表示一個 8 位元有號整數的型別陣列                                                                                                                                                    |
| [`Int16Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int16Array)                 | 表示一個 16 位元有號整數的型別陣列                                                                                                                                                   |
| [`Int32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int32Array)                 | 表示一個 32 位元有號整數的型別陣列                                                                                                                                                   |
| [`Intl`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl)                             | 提供對國際化和本地化功能的存取                                                                                                                               |
| [`isFinite`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isFinite)                     | 判斷一個值是否為有限數字                                                                                                                                                        |
| [`isNaN`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isNaN)                           | 判斷一個值是否為 `NaN`                                                                                                                                                           |
| [`JSON`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON)                             | 提供將 JavaScript 值轉換為 JSON 格式及反向轉換的功能                                                                                                                      |
| [`Map`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map)                               | 表示一組值的集合，其中每個值只能出現一次                                                                                                                              |
| [`Math`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math)                             | 提供對數學函式和常數的存取                                                                                                                                              |
| [`Number`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                         | 表示一個數值                                                                                                                                                                           |
| [`Object`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)                         | 表示作為所有 JavaScript 物件基礎的物件                                                                                                                                     |
| [`parseFloat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseFloat)                 | 解析字串參數並回傳浮點數                                                                                                                                         |
| [`parseInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseInt)                     | 解析字串參數並回傳指定基數的整數                                                                                                                               |
| [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)                       | 表示非同步操作的最終完成（或失敗）及其結果值                                                                                                |
| [`Proxy`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy)                           | 表示用於為基本操作（如屬性查找、賦值、枚舉、函式調用等）定義自訂行為的物件                                     |
| [`queueMicrotask`](https://developer.mozilla.org/docs/Web/API/queueMicrotask)                                         | 將微任務排入佇列以執行                                                                                                                                                                    |
| [`RangeError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RangeError)                 | 表示當值不在允許的集合或範圍內時發生的錯誤                                                                                                                        |
| [`ReferenceError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError)         | 表示引用不存在的變數時發生的錯誤                                                                                                                                       |
| [`Reflect`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Reflect)                       | 提供可攔截的 JavaScript 操作方法                                                                                                                                             |
| [`RegExp`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RegExp)                         | 表示正規表達式，允許您匹配字元組合                                                                                                                    |
| [`Set`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Set)                               | 表示一組值的集合，其中每個值只能出現一次                                                                                                                              |
| [`setInterval`](https://developer.mozilla.org/docs/Web/API/setInterval)                                               | 以固定的時間間隔重複調用函式                                                                                                                               |
| [`setTimeout`](https://developer.mozilla.org/docs/Web/API/setTimeout)                                                 | 在指定的毫秒數後調用函式或評估表達式                                                                                                                 |
| [`SharedArrayBuffer`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)   | 表示一個通用的、固定長度的原始二進位資料緩衝區                                                                                                                                            |
| [`String`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                         | 表示一個字元序列                                                                                                                                                                  |
| [`structuredClone`](https://developer.mozilla.org/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)            | 建立值的深拷貝                                                                                                                                                                       |
| [`Symbol`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Symbol)                         | 表示一個唯一且不可變的資料類型，用作物件屬性的鍵                                                                                                            |
| [`SyntaxError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError)               | 表示嘗試解析語法無效的程式碼時發生的錯誤                                                                                                                              |
| [`TypeError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypeError)                   | 表示當值不是預期類型時發生的錯誤                                                                                                                                         |
| [`Uint8Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)                 | 表示一個 8 位元無號整數的型別陣列                                                                                                                                                  |
| [`Uint8ClampedArray`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray)   | 表示一個被限制在 0-255 範圍內的 8 位元無號整數的型別陣列                                                                                                                                 |
| [`Uint32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array)               | 表示一個 32 位元無號整數的型別陣列                                                                                                                                                 |
| [`URIError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/URIError)                     | 表示全域 URI 處理函式被錯誤使用時發生的錯誤                                                                                                                      |
| [`URL`](https://developer.mozilla.org/docs/Web/API/URL)                                                               | 表示提供用於建立物件 URL 的靜態方法的物件                                                                                                                          |
| [`URLPattern`](https://developer.mozilla.org/docs/Web/API/URLPattern)                                                 | 表示一個 URL 模式                                                                                                                                                                             |
| [`URLSearchParams`](https://developer.mozilla.org/docs/Web/API/URLSearchParams)                                       | 表示鍵/值對的集合                                                                                                                                                           |
| [`WeakMap`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)                       | 表示鍵/值對的集合，其中鍵是弱引用                                                                                                                   |
| [`WeakSet`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WeakSet)                       | 表示物件的集合，其中每個物件只能出現一次                                                                                                                          |
| [`WebAssembly`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly)               | 提供對 WebAssembly 的存取                                                                                                                                                                       |

## Next.js 專用 Polyfills

- [`AsyncLocalStorage`](https://nodejs.org/api/async_context.html#class-asynclocalstorage)

## 環境變數

你可以使用 `process.env` 來存取[環境變數](/docs/app/building-your-application/configuring/environment-variables)，適用於 `next dev` 和 `next build` 兩種情境。

## 不支援的 API

Edge Runtime 有一些限制，包括：

- **不支援**原生的 Node.js API。例如，你無法讀取或寫入檔案系統。
- 可以使用 `node_modules`，只要它們實作了 ES 模組且未使用原生 Node.js API。
- **不允許**直接呼叫 `require`。請改用 ES 模組。

以下 JavaScript 語言功能已被禁用，**將無法運作**：

| API                                                                                                                             | 描述                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| [`eval`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/eval)                                       | 執行以字串形式表示的 JavaScript 程式碼                               |
| [`new Function(evalString)`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function)               | 使用作為參數提供的程式碼建立新函式                                    |
| [`WebAssembly.compile`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compile)         | 從緩衝區來源編譯 WebAssembly 模組                                    |
| [`WebAssembly.instantiate`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/instantiate) | 從緩衝區來源編譯並實例化 WebAssembly 模組                            |

在極少數情況下，你的程式碼可能包含（或匯入）一些動態程式碼評估語句，這些語句在執行時無法到達且無法透過 treeshaking 移除。  
你可以透過 Middleware 或 Edge API Route 的匯出配置來放寬檢查，允許特定檔案：

```javascript
export const config = {
  runtime: 'edge', // 僅適用於 Edge API Routes
  unstable_allowDynamic: [
    // 允許單一檔案
    '/lib/utilities.js',
    // 使用 glob 模式允許第三方模組 function-bind 中的任何內容
    '**/node_modules/function-bind/**',
  ],
}
```

`unstable_allowDynamic` 是一個 [glob](https://github.com/micromatch/micromatch#matching-features) 或 glob 陣列，用於忽略特定檔案的動態程式碼評估。這些 glob 是相對於你的應用程式根目錄的。

請注意，如果這些語句在 Edge 環境中執行，**它們將拋出錯誤並導致執行時錯誤**。
