---
source-updated-at: 2025-05-16T04:52:11.000Z
translation-updated-at: 2025-05-25T20:46:14.243Z
title: 專案結構與組織
nav_title: 專案結構
description: 概述 Next.js 中的資料夾與檔案慣例，以及如何組織您的專案。
---

本頁面提供 Next.js 中**所有**資料夾與檔案慣例的概述，以及組織專案的建議。

## 資料夾與檔案慣例

### 頂層資料夾

頂層資料夾用於組織應用程式的程式碼與靜態資源。

<Image
  alt="路由區段對應路徑區段"
  srcLight="/docs/light/top-level-folders.png"
  srcDark="/docs/dark/top-level-folders.png"
  width="1600"
  height="525"
/>

|                                                                    |                                    |
| ------------------------------------------------------------------ | ---------------------------------- |
| [`app`](/docs/app/building-your-application/routing)               | App Router                         |
| [`pages`](/docs/pages/building-your-application/routing)           | Pages Router                       |
| [`public`](/docs/app/api-reference/file-conventions/public-folder) | 靜態資源存放位置                   |
| [`src`](/docs/app/api-reference/file-conventions/src-folder)       | 可選的應用程式原始碼資料夾         |

### 頂層檔案

頂層檔案用於設定應用程式、管理依賴項、執行中介軟體、整合監控工具以及定義環境變數。

|                                                                              |                                         |
| ---------------------------------------------------------------------------- | --------------------------------------- |
| **Next.js**                                                                  |                                         |
| [`next.config.js`](/docs/app/api-reference/config/next-config-js)            | Next.js 設定檔                          |
| [`package.json`](/docs/app/getting-started/installation#manual-installation) | 專案依賴項與腳本                        |
| [`instrumentation.ts`](/docs/app/guides/instrumentation)                     | OpenTelemetry 與 Instrumentation 檔案   |
| [`middleware.ts`](/docs/app/building-your-application/routing/middleware)    | Next.js 請求中介軟體                    |
| [`.env`](/docs/app/guides/environment-variables)                             | 環境變數                                |
| [`.env.local`](/docs/app/guides/environment-variables)                       | 本地環境變數                            |
| [`.env.production`](/docs/app/guides/environment-variables)                  | 生產環境變數                            |
| [`.env.development`](/docs/app/guides/environment-variables)                 | 開發環境變數                            |
| [`.eslintrc.json`](/docs/app/api-reference/config/eslint)                    | ESLint 設定檔                           |
| `.gitignore`                                                                 | Git 忽略的檔案與資料夾                  |
| `next-env.d.ts`                                                              | Next.js 的 TypeScript 宣告檔案          |
| `tsconfig.json`                                                              | TypeScript 設定檔                       |
| `jsconfig.json`                                                              | JavaScript 設定檔                       |

<AppOnly>

### 路由檔案

|                                                                               |                     |                              |
| ----------------------------------------------------------------------------- | ------------------- | ---------------------------- |
| [`layout`](/docs/app/api-reference/file-conventions/layout)                   | `.js` `.jsx` `.tsx` | 佈局                         |
| [`page`](/docs/app/api-reference/file-conventions/page)                       | `.js` `.jsx` `.tsx` | 頁面                         |
| [`loading`](/docs/app/api-reference/file-conventions/loading)                 | `.js` `.jsx` `.tsx` | 載入 UI                      |
| [`not-found`](/docs/app/api-reference/file-conventions/not-found)             | `.js` `.jsx` `.tsx` | 找不到頁面 UI                |
| [`error`](/docs/app/api-reference/file-conventions/error)                     | `.js` `.jsx` `.tsx` | 錯誤 UI                      |
| [`global-error`](/docs/app/api-reference/file-conventions/error#global-error) | `.js` `.jsx` `.tsx` | 全域錯誤 UI                  |
| [`route`](/docs/app/api-reference/file-conventions/route)                     | `.js` `.ts`         | API 端點                     |
| [`template`](/docs/app/api-reference/file-conventions/template)               | `.js` `.jsx` `.tsx` | 重新渲染的佈局               |
| [`default`](/docs/app/api-reference/file-conventions/default)                 | `.js` `.jsx` `.tsx` | 平行路由的備用頁面           |

### 巢狀路由

|                 |                      |
| --------------- | -------------------- |
| `folder`        | 路由區段             |
| `folder/folder` | 巢狀路由區段         |

### 動態路由

|                                                                                                           |                                  |
| --------------------------------------------------------------------------------------------------------- | -------------------------------- |
| [`[folder]`](/docs/app/building-your-application/routing/dynamic-routes#convention)                       | 動態路由區段                     |
| [`[...folder]`](/docs/app/building-your-application/routing/dynamic-routes#catch-all-segments)            | 全捕捉路由區段                   |
| [`[[...folder]]`](/docs/app/building-your-application/routing/dynamic-routes#optional-catch-all-segments) | 可選全捕捉路由區段               |

### 路由群組與私有資料夾

|                                                                                   |                                                  |
| --------------------------------------------------------------------------------- | ------------------------------------------------ |
| [`(folder)`](/docs/app/building-your-application/routing/route-groups#convention) | 不影響路由的群組路由                             |
| [`_folder`](#private-folders)                                                     | 將資料夾及其子區段排除在路由之外                 |

### 平行與攔截路由

|                                                                                                |                            |
| ---------------------------------------------------------------------------------------------- | -------------------------- |
| [`@folder`](/docs/app/building-your-application/routing/parallel-routes#slots)                 | 命名插槽                   |
| [`(.)folder`](/docs/app/building-your-application/routing/intercepting-routes#convention)      | 攔截同層級路由             |
| [`(..)folder`](/docs/app/building-your-application/routing/intercepting-routes#convention)     | 攔截上一層級路由           |
| [`(..)(..)folder`](/docs/app/building-your-application/routing/intercepting-routes#convention) | 攔截上兩層級路由           |
| [`(...)folder`](/docs/app/building-your-application/routing/intercepting-routes#convention)    | 從根層級攔截路由           |

### 元資料檔案慣例

#### 應用圖示

|                                                                                                                 |                                     |                          |
| --------------------------------------------------------------------------------------------------------------- | ----------------------------------- | ------------------------ |
| [`favicon`](/docs/app/api-reference/file-conventions/metadata/app-icons#favicon)                                | `.ico`                              | Favicon 檔案             |
| [`icon`](/docs/app/api-reference/file-conventions/metadata/app-icons#icon)                                      | `.ico` `.jpg` `.jpeg` `.png` `.svg` | 應用圖示檔案             |
| [`icon`](/docs/app/api-reference/file-conventions/metadata/app-icons#generate-icons-using-code-js-ts-tsx)       | `.js` `.ts` `.tsx`                  | 生成的應用圖示           |
| [`apple-icon`](/docs/app/api-reference/file-conventions/metadata/app-icons#apple-icon)                          | `.jpg` `.jpeg`, `.png`              | Apple 應用圖示檔案       |
| [`apple-icon`](/docs/app/api-reference/file-conventions/metadata/app-icons#generate-icons-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`                  | 生成的 Apple 應用圖示    |

#### Open Graph 與 Twitter 圖片

|                                                                                                                             |                              |                            |
| --------------------------------------------------------------------------------------------------------------------------- | ---------------------------- | -------------------------- |
| [`opengraph-image`](/docs/app/api-reference/file-conventions/metadata/opengraph-image#opengraph-image)                      | `.jpg` `.jpeg` `.png` `.gif` | Open Graph 圖片檔案        |
| [`opengraph-image`](/docs/app/api-reference/file-conventions/metadata/opengraph-image#generate-images-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`           | 生成的 Open Graph 圖片     |
| [`twitter-image`](/docs/app/api-reference/file-conventions/metadata/opengraph-image#twitter-image)                          | `.jpg` `.jpeg` `.png` `.gif` | Twitter 圖片檔案           |
| [`twitter-image`](/docs/app/api-reference/file-conventions/metadata/opengraph-image#generate-images-using-code-js-ts-tsx)   | `.js` `.ts` `.tsx`           | 生成的 Twitter 圖片        |

#### SEO

|                                                                                                              |             |                       |
| ------------------------------------------------------------------------------------------------------------ | ----------- | --------------------- |
| [`sitemap`](/docs/app/api-reference/file-conventions/metadata/sitemap#sitemap-files-xml)                     | `.xml`      | 網站地圖檔案          |
| [`sitemap`](/docs/app/api-reference/file-conventions/metadata/sitemap#generating-a-sitemap-using-code-js-ts) | `.js` `.ts` | 生成的網站地圖        |
| [`robots`](/docs/app/api-reference/file-conventions/metadata/robots#static-robotstxt)                        | `.txt`      | Robots 檔案           |
| [`robots`](/docs/app/api-reference/file-conventions/metadata/robots#generate-a-robots-file)                  | `.js` `.ts` | 生成的 Robots 檔案    |

</AppOnly>

<PagesOnly>

### 檔案慣例

|                                                                                                             |                     |                   |
| ----------------------------------------------------------------------------------------------------------- | ------------------- | ----------------- |
| [`_app`](/docs/pages/building-your-application/routing/custom-app)                                          | `.js` `.jsx` `.tsx` | 自訂 App          |
| [`_document`](/docs/pages/building-your-application/routing/custom-document)                                | `.js` `.jsx` `.tsx` | 自訂 Document     |
| [`_error`](/docs/pages/building-your-application/routing/custom-error#more-advanced-error-page-customizing) | `.js` `.jsx` `.tsx` | 自訂錯誤頁面      |
| [`404`](/docs/pages/building-your-application/routing/custom-error#404-page)                                | `.js` `.jsx` `.tsx` | 404 錯誤頁面      |
| [`500`](/docs/pages/building-your-application/routing/custom-error#500-page)                                | `.js` `.jsx` `.tsx` | 500 錯誤頁面      |

### 路由

|                                                                                                |                     |             |
| ---------------------------------------------------------------------------------------------- | ------------------- | ----------- |
| **資料夾慣例**                                                                                 |                     |             |
| [`index`](/docs/pages/building-your-application/routing/pages-and-layouts#index-routes)        | `.js` `.jsx` `.tsx` | 首頁        |
| [`folder/index`](/docs/pages/building-your-application/routing/pages-and-layouts#index-routes) | `.js` `.jsx` `.tsx` | 巢狀頁面    |
| **檔案慣例**                                                                                   |                     |             |
| [`index`](/docs/pages/building-your-application/routing/pages-and-layouts#index-routes)        | `.js` `.jsx` `.tsx` | 首頁        |
| [`file`](/docs/pages/building-your-application/routing/pages-and-layouts)                      | `.js` `.jsx` `.tsx` | 巢狀頁面    |

### 動態路由

|                                                                                                                   |                     |                                  |
| ----------------------------------------------------------------------------------------------------------------- | ------------------- | -------------------------------- |
| **資料夾慣例**                                                                                                    |                     |                                  |
| [`[folder]/index`](/docs/pages/building-your-application/routing/dynamic-routes)                                  | `.js` `.jsx` `.tsx` | 動態路由區段                     |
| [`[...folder]/index`](/docs/pages/building-your-application/routing/dynamic-routes#catch-all-segments)            | `.js` `.jsx` `.tsx` | 全捕捉路由區段                   |
| [`[[...folder]]/index`](/docs/pages/building-your-application/routing/dynamic-routes#optional-catch-all-segments) | `.js` `.jsx` `.tsx` | 可選全捕捉路由區段               |
| **檔案慣例**                                                                                                      |                     |                                  |
| [`[file]`](/docs/pages/building-your-application/routing/dynamic-routes)                                          | `.js` `.jsx` `.tsx` | 動態路由區段                     |
| [`[...file]`](/docs/pages/building-your-application/routing/dynamic-routes#catch-all-segments)                    | `.js` `.jsx` `.tsx` | 全捕捉路由區段                   |
| [`[[...file]]`](/docs/pages/building-your-application/routing/dynamic-routes#optional-catch-all-segments)         | `.js` `.jsx` `.tsx` | 可選全捕捉路由區段               |

</PagesOnly>

<AppOnly>

## 組織您的專案

Next.js 對於如何組織與共置專案檔案**沒有強制規範**。但它確實提供了一些功能來幫助您組織專案。

### 元件層級結構

特殊檔案中定義的元件會按照特定層級結構渲染：

- `layout.js`
- `template.js`
- `error.js` (React 錯誤邊界)
- `loading.js` (React suspense 邊界)
- `not-found.js` (React 錯誤邊界)
- `page.js` 或巢狀 `layout.js`

<Image
  alt="檔案慣例的元件層級結構"
  srcLight="/docs/light/file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/file-conventions-component-hierarchy.png"
  width="1600"
  height="643"
/>

這些元件會在巢狀路由中遞迴渲染，意味著路由區段的元件會**嵌套**在其父區段的元件內部。

<Image
  alt="巢狀檔案慣例的元件層級結構"
  srcLight="/docs/light/nested-file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/nested-file-conventions-component-hierarchy.png"
  width="1600"
  height="863"
/>

</AppOnly>

### 共置 (Colocation)

在 `app` 目錄中，嵌套的資料夾定義了路由結構。每個資料夾代表一個路由片段，對應到 URL 路徑中的相應片段。

然而，即使路由結構是透過資料夾定義的，**除非**在路由片段中添加 `page.js` 或 `route.js` 文件，否則路由**不會公開可訪問**。

<Image
  alt="圖表顯示在路由片段中添加 page.js 或 route.js 文件前，路由不會公開可訪問。"
  srcLight="/docs/light/project-organization-not-routable.png"
  srcDark="/docs/dark/project-organization-not-routable.png"
  width="1600"
  height="444"
/>

而且，即使路由已公開可訪問，只有 `page.js` 或 `route.js` **返回的內容**會被發送到客戶端。

<Image
  alt="圖表顯示 page.js 和 route.js 文件如何使路由公開可訪問。"
  srcLight="/docs/light/project-organization-routable.png"
  srcDark="/docs/dark/project-organization-routable.png"
  width="1600"
  height="687"
/>

這意味著**專案文件**可以**安全地共置**在 `app` 目錄的路由片段中，而不會意外成為可路由的內容。

<Image
  alt="圖表顯示即使片段中包含 page.js 或 route.js 文件，共置的專案文件也不會成為可路由的內容。"
  srcLight="/docs/light/project-organization-colocation.png"
  srcDark="/docs/dark/project-organization-colocation.png"
  width="1600"
  height="1011"
/>

> **須知**：雖然你**可以**將專案文件共置在 `app` 目錄中，但這並非**必須**。如果你偏好，也可以[將它們保留在 `app` 目錄之外](#store-project-files-outside-of-app)。

### 私有資料夾 (Private folders)

可以透過在資料夾名稱前加上底線來創建私有資料夾：`_folderName`

這表示該資料夾是私有實現細節，不應被路由系統考慮，從而**將該資料夾及其所有子資料夾**排除在路由之外。

<Image
  alt="使用私有資料夾的範例資料夾結構"
  srcLight="/docs/light/project-organization-private-folders.png"
  srcDark="/docs/dark/project-organization-private-folders.png"
  width="1600"
  height="849"
/>

由於 `app` 目錄中的文件預設可以[安全共置](#colocation)，因此私有資料夾並非共置的必要條件。但它們可用於：

- 將 UI 邏輯與路由邏輯分開。
- 在專案和 Next.js 生態系統中一致地組織內部文件。
- 在代碼編輯器中排序和分組文件。
- 避免與未來 Next.js 文件約定的潛在命名衝突。

> **須知**：
>
> - 雖然這不是框架約定，但你可能也會考慮使用相同的底線模式將私有資料夾外的文件標記為「私有」。
> - 可以透過在資料夾名稱前加上 `%5F`（底線的 URL 編碼形式）來創建以底線開頭的 URL 片段：`%5FfolderName`。
> - 如果不使用私有資料夾，建議了解 Next.js 的[特殊文件約定](/docs/app/getting-started/project-structure#routing-files)，以避免意外的命名衝突。

### 路由群組 (Route groups)

可以透過將資料夾用括號包裹來創建路由群組：`(folderName)`

這表示該資料夾僅用於組織目的，**不應包含**在路由的 URL 路徑中。

<Image
  alt="使用路由群組的範例資料夾結構"
  srcLight="/docs/light/project-organization-route-groups.png"
  srcDark="/docs/dark/project-organization-route-groups.png"
  width="1600"
  height="849"
/>

路由群組適用於：

- 按網站區塊、意圖或團隊組織路由。例如行銷頁面、管理頁面等。
- 在同一路由片段層級啟用嵌套佈局：
  - [在同一片段中創建多個嵌套佈局，包括多個根佈局](#creating-multiple-root-layouts)
  - [在共用片段中為子集路由添加佈局](#opting-specific-segments-into-a-layout)

### `src` 資料夾

Next.js 支援將應用程式代碼（包括 `app`）存放在可選的 [`src` 資料夾](/docs/app/api-reference/file-conventions/src-folder)中。這可以將應用程式代碼與主要位於專案根目錄的專案配置文件分開。

<Image
  alt="包含 `src` 資料夾的範例資料夾結構"
  srcLight="/docs/light/project-organization-src-directory.png"
  srcDark="/docs/dark/project-organization-src-directory.png"
  width="1600"
  height="687"
/>

## 範例

以下部分列出了常見策略的極簡概述。最簡單的建議是選擇適合你和團隊的策略，並在整個專案中保持一致。

> **須知**：在以下範例中，我們使用 `components` 和 `lib` 資料夾作為通用佔位符，它們的命名沒有特殊的框架意義，你的專案可能會使用其他資料夾，如 `ui`、`utils`、`hooks`、`styles` 等。

### 將專案文件儲存在 `app` 之外

此策略將所有應用程式代碼儲存在**專案根目錄**的共享資料夾中，並保持 `app` 目錄純粹用於路由目的。

<Image
  alt="專案文件儲存在 app 之外的範例資料夾結構"
  srcLight="/docs/light/project-organization-project-root.png"
  srcDark="/docs/dark/project-organization-project-root.png"
  width="1600"
  height="849"
/>

### 將專案文件儲存在 `app` 內的頂層資料夾中

此策略將所有應用程式代碼儲存在 `app` 目錄**根目錄**的共享資料夾中。

<Image
  alt="專案文件儲存在 app 內的範例資料夾結構"
  srcLight="/docs/light/project-organization-app-root.png"
  srcDark="/docs/dark/project-organization-app-root.png"
  width="1600"
  height="849"
/>

### 按功能或路由拆分專案文件

此策略將全局共享的應用程式代碼儲存在 `app` 根目錄中，並將更具體的應用程式代碼**拆分**到使用它們的路由片段中。

<Image
  alt="按功能或路由拆分專案文件的範例資料夾結構"
  srcLight="/docs/light/project-organization-app-root-split.png"
  srcDark="/docs/dark/project-organization-app-root-split.png"
  width="1600"
  height="1011"
/>

### 組織路由而不影響 URL 路徑

為了組織路由而不影響 URL，可以創建一個群組來將相關路由放在一起。括號中的資料夾將從 URL 中省略（例如 `(marketing)` 或 `(shop)`）。

<Image
  alt="使用路由群組組織路由"
  srcLight="/docs/light/route-group-organisation.png"
  srcDark="/docs/dark/route-group-organisation.png"
  width="1600"
  height="930"
/>

即使 `(marketing)` 和 `(shop)` 中的路由共享相同的 URL 層級，你也可以透過在它們的資料夾中添加 `layout.js` 文件為每個群組創建不同的佈局。

<Image
  alt="具有多個佈局的路由群組"
  srcLight="/docs/light/route-group-multiple-layouts.png"
  srcDark="/docs/dark/route-group-multiple-layouts.png"
  width="1600"
  height="768"
/>

### 為特定片段選擇佈局

若要為特定路由選擇佈局，可以創建一個新的路由群組（例如 `(shop)`）並將共享相同佈局的路由移動到該群組中（例如 `account` 和 `cart`）。群組外的路由將不共享該佈局（例如 `checkout`）。

<Image
  alt="具有選擇性佈局的路由群組"
  srcLight="/docs/light/route-group-opt-in-layouts.png"
  srcDark="/docs/dark/route-group-opt-in-layouts.png"
  width="1600"
  height="930"
/>

### 為特定路由選擇載入骨架 (loading skeleton)

若要透過 `loading.js` 文件將[載入骨架](/docs/app/building-your-application/routing/loading-ui-and-streaming)應用到特定路由，可以創建一個新的路由群組（例如 `/(overview)`），然後將你的 `loading.tsx` 移動到該路由群組中。

<Image
  alt="資料夾結構顯示路由群組內的 loading.tsx 和 page.tsx"
  srcLight="/docs/light/route-group-loading.png"
  srcDark="/docs/dark/route-group-loading.png"
  width="1600"
  height="444"
/>

現在，`loading.tsx` 文件將僅應用於你的 dashboard → overview 頁面，而不是所有 dashboard 頁面，同時不影響 URL 路徑結構。

### 創建多個根佈局

若要創建多個[根佈局](/docs/app/api-reference/file-conventions/layout#root-layouts)，請移除頂層的 `layout.js` 文件，並在每個路由群組中添加一個 `layout.js` 文件。這適用於將應用程式劃分為具有完全不同 UI 或體驗的區塊。每個根佈局都需要添加 `<html>` 和 `<body>` 標籤。

<Image
  alt="具有多個根佈局的路由群組"
  srcLight="/docs/light/route-group-multiple-root-layouts.png"
  srcDark="/docs/dark/route-group-multiple-root-layouts.png"
  width="1600"
  height="687"
/>

在上面的範例中，`(marketing)` 和 `(shop)` 都有各自的根佈局。

</AppOnly>
